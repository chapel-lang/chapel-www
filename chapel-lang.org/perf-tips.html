<?php
	$title="Performance Tips";
?>
<?php include("stdheader.html");?>

<p>&nbsp;</p>

<h2>Chapel Performance Tips</h2>
<div class="indent">

<h3>Use the <code>--fast</code> flag</h3>

<div class="indent">

Once you have a Chapel program that you believe to be correct and want
to run performance timings on it, make sure to compile with the
<code>--fast</code> flag.  This turns off a number of execution-time
checks, turns on back-end compiler optimizations, and is key to
achieving competitive performance with Chapel.  See its entry on the
<a href = "https://chapel-lang.org/docs/usingchapel/man.html">compiler
man page</a> for details.

<p></p>

Why don't we compile Chapel programs with <code>--fast</code> by
default?  Because then most user coding errors like out-of-bounds
indexing or nil-dereferences would get reported to us as bugs.  We
believe that having Chapel catch such errors by default and then
requiring users take off the safety belt once they're ready to go fast
is most productive for everyone.

</div>


<h3>Check your Communications</h3>

<div class="indent">

Most bad performance for multi-locale Chapel programs is due to
inadvertently doing too much communication.  Though Chapel makes it
trivial to refer to remote values, doing so frequently can kill
performance.  You can instrument your program to see where
communication is being introduced using the <a href =
"https://chapel-lang.org/docs/modules/standard/CommDiagnostics.html">CommDiagnostics</a>
module or the <a href =
"https://chapel-lang.org/docs/tools/chplvis/chplvis.html">chplvis</a>
tool.

<p></p>

Once you've found a section of your Chapel program that communicates
more than it should, there are a variety of ways of fixing it
including caching remote values manually or using advanced language
features for asserting locality.  If you need help with these...

</div>


<h3>Engage the Chapel Team</h3>

<div class="indent">

Though Chapel performance has improved by leaps and bounds in recent
years and can typically be made competitive with C + MPI + OpenMP,
there are still plenty of cases where our implementation doesn't do as
well as it should.  Because it can be difficult to tell whether a
performance problem is due to a problem on your side or ours, please
don't hesitate to contact the Chapel development team through the
<a href = "community-old.html">channels available to users</a> in order to
get help with performance debugging your code.  In addition to saving
you time and frustration, this can provide us with valuable feedback
about where we should do further tuning and optimization.

</div>

<?php include("stdfooter.html");?>
