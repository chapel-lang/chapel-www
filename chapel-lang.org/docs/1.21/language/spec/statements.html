

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Statements &mdash; Chapel Documentation 1.21</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Modules" href="modules.html" />
    <link rel="prev" title="Expressions" href="expressions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.21
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.21";
$pagename = "language/spec/statements";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language Specification</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scope.html">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="notation.html">Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="organization.html">Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="language-overview.html">Language Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexical-structure.html">Lexical Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversions.html">Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#blocks">Blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expression-statements">Expression Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignment-statements">Assignment Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-swap-statement">The Swap Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-i-o-statement">The I/O Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-conditional-statement">The Conditional Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-select-statement">The Select Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-while-do-and-do-while-loops">The While Do and Do While Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-for-loop">The For Loop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zipper-iteration">Zipper Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-for-loops">Parameter For Loops</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-break-continue-and-label-statements">The Break, Continue and Label Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-use-statement">The Use Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-defer-statement">The Defer Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-empty-statement">The Empty Statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="procedures.html">Procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="error-handling.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuples.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="records.html">Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="unions.html">Unions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranges.html">Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterators.html">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="generics.html">Generics</a></li>
<li class="toctree-l2"><a class="reference internal" href="input-and-output.html">Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="task-parallelism-and-synchronization.html">Task Parallelism and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-parallelism.html">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="locales.html">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="domain-maps.html">Domain Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-defined-reductions-and-scans.html">User-Defined Reductions and Scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-consistency-model.html">Memory Consistency Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="interoperability.html">Interoperability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Chapel Language Specification</a> &raquo;</li>
        
      <li>Statements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/language/spec/statements.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="statements">
<span id="chapter-statements"></span><h1>Statements<a class="headerlink" href="#statements" title="Permalink to this headline">¶</a></h1>
<p>Chapel is an imperative language with statements that may have side
effects. Statements allow for the sequencing of program execution.
Chapel provides the following statements:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>statement:
  block-statement
  expression-statement
  assignment-statement
  swap-statement
  io-statement
  conditional-statement
  select-statement
  while-do-statement
  do-while-statement
  for-statement
  label-statement
  break-statement
  continue-statement
  param-for-statement
  use-statement
  defer-statement
  empty-statement
  return-statement
  yield-statement
  module-declaration-statement
  procedure-declaration-statement
  external-procedure-declaration-statement
  exported-procedure-declaration-statement
  iterator-declaration-statement
  method-declaration-statement
  type-declaration-statement
  variable-declaration-statement
  remote-variable-declaration-statement
  on-statement
  cobegin-statement
  coforall-statement
  begin-statement
  sync-statement
  serial-statement
  atomic-statement
  forall-statement
  delete-statement
</pre></div>
</div>
<p>Individual statements are defined in the remainder of this chapter and
additionally as follows:</p>
<ul class="simple">
<li>return <a class="reference internal" href="procedures.html#the-return-statement"><span class="std std-ref">The Return Statement</span></a></li>
<li>yield <a class="reference internal" href="iterators.html#the-yield-statement"><span class="std std-ref">The Yield Statement</span></a></li>
<li>module declaration <a class="reference internal" href="modules.html#chapter-modules"><span class="std std-ref">Modules</span></a></li>
<li>procedure declaration <a class="reference internal" href="procedures.html#function-definitions"><span class="std std-ref">Procedure Definitions</span></a></li>
<li>external procedure declaration
<a class="reference internal" href="interoperability.html#calling-external-functions"><span class="std std-ref">Calling External Functions</span></a></li>
<li>exporting procedure declaration
<a class="reference internal" href="interoperability.html#calling-chapel-functions"><span class="std std-ref">Calling Chapel Functions</span></a></li>
<li>iterator declaration <a class="reference internal" href="iterators.html#iterator-function-definitions"><span class="std std-ref">Iterator Definitions</span></a></li>
<li>method declaration <a class="reference internal" href="classes.html#class-methods"><span class="std std-ref">Class Methods</span></a></li>
<li>type declaration <a class="reference internal" href="types.html#chapter-types"><span class="std std-ref">Types</span></a></li>
<li>variable declaration <a class="reference internal" href="variables.html#variable-declarations"><span class="std std-ref">Variable Declarations</span></a></li>
<li>remote variable declaration
&nbsp;<a class="reference internal" href="locales.html#remote-variable-declarations"><span class="std std-ref">Remote Variable Declarations</span></a></li>
<li><code class="docutils literal notranslate"><span class="pre">on</span></code> statement <a class="reference internal" href="locales.html#on"><span class="std std-ref">The On Statement</span></a></li>
<li>cobegin, coforall, begin, sync, serial and atomic statements
<a class="reference internal" href="task-parallelism-and-synchronization.html#chapter-task-parallelism-and-synchronization"><span class="std std-ref">Task Parallelism and Synchronization</span></a></li>
<li>forall <a class="reference internal" href="data-parallelism.html#chapter-data-parallelism"><span class="std std-ref">Data Parallelism</span></a></li>
<li>delete <a class="reference internal" href="classes.html#class-delete"><span class="std std-ref">Deleting Unmanaged Class Instances</span></a></li>
</ul>
<div class="section" id="blocks">
<span id="id1"></span><h2>Blocks<a class="headerlink" href="#blocks" title="Permalink to this headline">¶</a></h2>
<p>A block is a statement or a possibly empty list of statements that form
their own scope. A block is given by</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>block-statement:
  { statements[OPT] }

statements:
  statement
  statement statements
</pre></div>
</div>
<p>Variables defined within a block are local
variables&nbsp;(<a class="reference internal" href="variables.html#local-variables"><span class="std std-ref">Local Variables</span></a>).</p>
<p>The statements within a block are executed serially unless the block is
in a cobegin statement&nbsp;(<a class="reference internal" href="task-parallelism-and-synchronization.html#cobegin"><span class="std std-ref">The Cobegin Statement</span></a>).</p>
</div>
<div class="section" id="expression-statements">
<span id="id2"></span><h2>Expression Statements<a class="headerlink" href="#expression-statements" title="Permalink to this headline">¶</a></h2>
<p>The expression statement evaluates an expression solely for side
effects. The syntax for an expression statement is given by</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>expression-statement:
  variable-expression ;
  member-access-expression ;
  call-expression ;
  new-expression ;
  let-expression ;
</pre></div>
</div>
</div>
<div class="section" id="assignment-statements">
<span id="id3"></span><h2>Assignment Statements<a class="headerlink" href="#assignment-statements" title="Permalink to this headline">¶</a></h2>
<p>An assignment statement assigns the value of an expression to another
expression, for example, a variable. Assignment statements are given by</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>assignment-statement:
  lvalue-expression assignment-operator expression

assignment-operator: one of
   = += -= *= /= %= **= &amp;= |= ^= &amp;&amp;= ||= &lt;&lt;= &gt;&gt;=
</pre></div>
</div>
<p>The assignment operators that contain a binary operator symbol as a
prefix are <em>compound assignment</em> operators. The remaining assignment
operator <code class="docutils literal notranslate"><span class="pre">=</span></code> is called <em>simple assignment</em>.</p>
<p>The expression on the left-hand side of the assignment operator must be
a valid lvalue&nbsp;(<a class="reference internal" href="expressions.html#lvalue-expressions"><span class="std std-ref">LValue Expressions</span></a>). It is evaluated
before the expression on the right-hand side of the assignment operator,
which can be any expression.</p>
<p>When the left-hand side is of a numerical type, there is an implicit
conversion&nbsp;(<a class="reference internal" href="conversions.html#implicit-conversions"><span class="std std-ref">Implicit Conversions</span></a>) of the right-hand side
expression to the type of the left-hand side expression. Additionally,
for simple assignment, if the left-hand side is of Boolean type, the
right-hand side is implicitly converted to the type of the left-hand
side (i.e. a <code class="docutils literal notranslate"><span class="pre">bool(?w)</span></code> with the same width <code class="docutils literal notranslate"><span class="pre">w</span></code>).</p>
<p>For simple assignment, the validity and semantics of assigning between
classes&nbsp;(<a class="reference internal" href="classes.html#class-assignment"><span class="std std-ref">Class Assignment</span></a>),
records&nbsp;(<a class="reference internal" href="records.html#record-assignment"><span class="std std-ref">Record Assignment</span></a>),
unions&nbsp;(<a class="reference internal" href="unions.html#union-assignment"><span class="std std-ref">Union Assignment</span></a>),
tuples&nbsp;(<a class="reference internal" href="tuples.html#tuple-assignment"><span class="std std-ref">Tuple Assignment</span></a>),
ranges&nbsp;(<a class="reference internal" href="ranges.html#range-assignment"><span class="std std-ref">Range Assignment</span></a>),
domains&nbsp;(<a class="reference internal" href="domains.html#domain-assignment"><span class="std std-ref">Domain Assignment</span></a>), and
arrays&nbsp;(<a class="reference internal" href="arrays.html#array-assignment"><span class="std std-ref">Array Assignment</span></a>) are discussed in these later
sections.</p>
<p>A compound assignment is shorthand for applying the binary operator to
the left- and right-hand side expressions and then assigning the result
to the left-hand side expression. For numerical types, the left-hand
side expression is evaluated only once, and there is an implicit
conversion of the result of the binary operator to the type of the
left-hand side expression. Thus, for example, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+=</span> <span class="pre">y</span></code> is equivalent
to <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code> where the expression <code class="docutils literal notranslate"><span class="pre">x</span></code> is evaluated once.</p>
<p>For all other compound assignments, Chapel provides a completely generic
catch-all implementation defined in the obvious way. For example:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">inline</span> <span class="k">proc</span> <span class="nf">+=</span><span class="p">(</span><span class="kd">ref</span> <span class="nx">lhs</span><span class="p">,</span> <span class="nx">rhs</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">lhs</span> <span class="o">=</span> <span class="nx">lhs</span> <span class="o">+</span> <span class="nx">rhs</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Thus, compound assignment can be used with operands of arbitrary types,
provided that the following provisions are met: If the type of the
left-hand argument of a compound assignment operator <code class="docutils literal notranslate"><span class="pre">op=</span></code> is
<span class="math notranslate nohighlight">\(L\)</span> and that of the right-hand argument is <span class="math notranslate nohighlight">\(R\)</span>, then a
definition for the corresponding binary operator <code class="docutils literal notranslate"><span class="pre">op</span></code> exists, such
that <span class="math notranslate nohighlight">\(L\)</span> is coercible to the type of its left-hand formal and
<span class="math notranslate nohighlight">\(R\)</span> is coercible to the type of its right-hand formal. Further,
the result of <code class="docutils literal notranslate"><span class="pre">op</span></code> must be coercible to <span class="math notranslate nohighlight">\(L\)</span>, and there must
exist a definition for simple assignment between objects of type
<span class="math notranslate nohighlight">\(L\)</span>.</p>
<p>Both simple and compound assignment operators can be overloaded for
different types using operator
overloading&nbsp;(<a class="reference internal" href="procedures.html#function-overloading"><span class="std std-ref">Function and Operator Overloading</span></a>). In such an overload,
the left-hand side expression should have <code class="docutils literal notranslate"><span class="pre">ref</span></code> intent and be modified
within the body of the function. The return type of the function should
be <code class="docutils literal notranslate"><span class="pre">void</span></code>.</p>
</div>
<div class="section" id="the-swap-statement">
<span id="id4"></span><h2>The Swap Statement<a class="headerlink" href="#the-swap-statement" title="Permalink to this headline">¶</a></h2>
<p>The swap statement indicates to swap the values in the expressions on
either side of the swap operator. Since both expressions are assigned
to, each must be a valid lvalue
expression&nbsp;(<a class="reference internal" href="expressions.html#lvalue-expressions"><span class="std std-ref">LValue Expressions</span></a>).</p>
<p>The swap operator can be overloaded for different types using operator
overloading&nbsp;(<a class="reference internal" href="procedures.html#function-overloading"><span class="std std-ref">Function and Operator Overloading</span></a>).</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>swap-statement:
  lvalue-expression swap-operator lvalue-expression

swap-operator:
  &lt;=&gt;
</pre></div>
</div>
<p>To implement the swap operation, the compiler uses temporary variables
as necessary.</p>
<blockquote>
<div><p><em>Example</em>.</p>
<p>When resolved to the default swap operator, the following swap
statement</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kt">real</span><span class="p">;</span>

<span class="nx">a</span> <span class="o">&lt;=&gt;</span> <span class="nx">b</span><span class="p">;</span>
</pre></div>
</div>
<p>is semantically equivalent to:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
<span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
<span class="nx">a</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-i-o-statement">
<span id="the-io-statement"></span><h2>The I/O Statement<a class="headerlink" href="#the-i-o-statement" title="Permalink to this headline">¶</a></h2>
<p>The I/O operator indicates writing to the left-hand-side the value in
the right-hand-side; or reading from the left-hand-side and storing the
result in the variable on the right-hand-side. This operator can be
chained with other I/O operator calls.</p>
<p>The I/O operator can be overloaded for different types using operator
overloading&nbsp;(<a class="reference internal" href="procedures.html#function-overloading"><span class="std std-ref">Function and Operator Overloading</span></a>).</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>io-statement:
  io-expression io-operator expression

io-expression:
  expression
  io-expression io-operator expression

io-operator:
  &lt;~&gt;
</pre></div>
</div>
<p>See the module documentation on I/O for details on how to use the I/O
statement.</p>
<blockquote>
<div><p><em>Example</em>.</p>
<p>In the example below,</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">opentmp</span><span class="p">().</span><span class="nx">writer</span><span class="p">();</span> <span class="c1">// a channel</span>
<span class="kd">var</span> <span class="nx">a</span><span class="p">:</span> <span class="kt">real</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>

<span class="nx">w</span> <span class="o">&lt;~&gt;</span> <span class="nx">a</span> <span class="o">&lt;~&gt;</span> <span class="nx">b</span><span class="p">;</span>
</pre></div>
</div>
<p>the I/O operator is left-associative and indicates writing <code class="docutils literal notranslate"><span class="pre">a</span></code> and
then <code class="docutils literal notranslate"><span class="pre">b</span></code> to <code class="docutils literal notranslate"><span class="pre">w</span></code> in this case.</p>
</div></blockquote>
</div>
<div class="section" id="the-conditional-statement">
<span id="id5"></span><h2>The Conditional Statement<a class="headerlink" href="#the-conditional-statement" title="Permalink to this headline">¶</a></h2>
<p>The conditional statement allows execution to choose between two
statements based on the evaluation of an expression of <code class="docutils literal notranslate"><span class="pre">bool</span></code> type.
The syntax for a conditional statement is given by</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>conditional-statement:
  `if&#39; expression `then&#39; statement else-part[OPT]
  `if&#39; expression block-statement else-part[OPT]

else-part:
  `else&#39; statement
</pre></div>
</div>
<p>A conditional statement evaluates an expression of bool type. If the
expression evaluates to true, the first statement in the conditional
statement is executed. If the expression evaluates to false and the
optional else-clause exists, the statement following the <code class="docutils literal notranslate"><span class="pre">else</span></code>
keyword is executed.</p>
<p>If the expression is a parameter, the conditional statement is folded by
the compiler. If the expression evaluates to true, the first statement
replaces the conditional statement. If the expression evaluates to
false, the second statement, if it exists, replaces the conditional
statement; if the second statement does not exist, the conditional
statement is removed.</p>
<p>Each statement embedded in the <em>conditional-statement</em> has its own scope
whether or not an explicit block surrounds it.</p>
<p>If the statement that immediately follows the optional <code class="docutils literal notranslate"><span class="pre">then</span></code> keyword
is a conditional statement and it is not in a block, the else-clause is
bound to the nearest preceding conditional statement without an
else-clause. The statement in the else-clause can be a conditional
statement, too.</p>
<blockquote>
<div><p><em>Example (conditionals.chpl)</em>.</p>
<p>The following function prints <code class="docutils literal notranslate"><span class="pre">two</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is <code class="docutils literal notranslate"><span class="pre">2</span></code> and
<code class="docutils literal notranslate"><span class="pre">B,four</span></code> when <code class="docutils literal notranslate"><span class="pre">x</span></code> is <code class="docutils literal notranslate"><span class="pre">4</span></code>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">condtest</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">then</span>
    <span class="k">if</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="k">then</span>
      <span class="nx">write</span><span class="p">(</span><span class="s">&quot;A,&quot;</span><span class="p">);</span>
    <span class="k">else</span>
      <span class="nx">write</span><span class="p">(</span><span class="s">&quot;B,&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="nx">x</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">then</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;two&quot;</span><span class="p">);</span>
  <span class="k">else</span> <span class="k">if</span> <span class="nx">x</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">then</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;four&quot;</span><span class="p">);</span>
  <span class="k">else</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;other&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-select-statement">
<span id="id6"></span><h2>The Select Statement<a class="headerlink" href="#the-select-statement" title="Permalink to this headline">¶</a></h2>
<p>The select statement is a multi-way variant of the conditional
statement. The syntax is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>select-statement:
  `select&#39; expression { when-statements }

when-statements:
  when-statement
  when-statement when-statements

when-statement:
  `when&#39; expression-list `do&#39; statement
  `when&#39; expression-list block-statement
  `otherwise&#39; statement
  `otherwise&#39; `do&#39; statement

expression-list:
  expression
  expression , expression-list
</pre></div>
</div>
<p>The expression that follows the keyword <code class="docutils literal notranslate"><span class="pre">select</span></code>, the select
expression, is evaluated once and its value is then compared with the
list of case expressions following each <code class="docutils literal notranslate"><span class="pre">when</span></code> keyword. These values
are compared using the equality operator <code class="docutils literal notranslate"><span class="pre">==</span></code>. If the expressions
cannot be compared with the equality operator, a compile-time error is
generated. The first case expression that contains an expression where
that comparison is <code class="docutils literal notranslate"><span class="pre">true</span></code> will be selected and control transferred to
the associated statement. If the comparison is always <code class="docutils literal notranslate"><span class="pre">false</span></code>, the
statement associated with the keyword <code class="docutils literal notranslate"><span class="pre">otherwise</span></code>, if it exists, will
be selected and control transferred to it. There may be at most one
<code class="docutils literal notranslate"><span class="pre">otherwise</span></code> statement and its location within the select statement
does not matter.</p>
<p>Each statement embedded in the <em>when-statement</em> or the
<em>otherwise-statement</em> has its own scope whether or not an explicit block
surrounds it.</p>
</div>
<div class="section" id="the-while-do-and-do-while-loops">
<span id="the-while-and-do-while-loops"></span><h2>The While Do and Do While Loops<a class="headerlink" href="#the-while-do-and-do-while-loops" title="Permalink to this headline">¶</a></h2>
<p>There are two variants of the while loop in Chapel. The syntax of the
while-do loop is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>while-do-statement:
  `while&#39; expression `do&#39; statement
  `while&#39; expression block-statement
</pre></div>
</div>
<p>The syntax of the do-while loop is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>do-while-statement:
  `do&#39; statement `while&#39; expression ;
</pre></div>
</div>
<p>In both variants, the expression evaluates to a value of type <code class="docutils literal notranslate"><span class="pre">bool</span></code>
which determines when the loop terminates and control continues with the
statement following the loop.</p>
<p>The while-do loop is executed as follows:</p>
<ol class="arabic simple">
<li>The expression is evaluated.</li>
<li>If the expression evaluates to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the statement is not
executed and control continues to the statement following the loop.</li>
<li>If the expression evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the statement is executed
and control continues to step 1, evaluating the expression again.</li>
</ol>
<p>The do-while loop is executed as follows:</p>
<ol class="arabic simple">
<li>The statement is executed.</li>
<li>The expression is evaluated.</li>
<li>If the expression evaluates to <code class="docutils literal notranslate"><span class="pre">false</span></code>, control continues to the
statement following the loop.</li>
<li>If the expression evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>, control continues to step 1
and the the statement is executed again.</li>
</ol>
<p>In this second form of the loop, note that the statement is executed
unconditionally the first time.</p>
<blockquote>
<div><p><em>Example (while.chpl)</em>.</p>
<p>The following example illustrates the difference between the
<code class="docutils literal notranslate"><span class="pre">do-while-statement</span></code> and the <code class="docutils literal notranslate"><span class="pre">while-do-statement</span></code>. The body of
the do-while loop is always executed at least once, even if the loop
conditional is already false when it is entered. The code</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>

<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Scope of do while loop:&quot;</span><span class="p">);</span>
<span class="k">do</span> <span class="p">{</span>
  <span class="nx">t</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">);</span>

<span class="nx">t</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
<span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Scope of while loop:&quot;</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">t</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>Scope of do while loop:
12
Scope of while loop:
</pre></div>
</div>
</div></blockquote>
<p>Chapel do-while loops differ from those found in most other languages in
one important regard. If the body of a do-while statement is a block
statement and new variables are defined within that block statement,
then the scope of those variables extends to cover the loop’s
termination expression.</p>
<blockquote>
<div><p><em>Example (do-while.chpl)</em>.</p>
<p>The following example demonstrates that the scope of the variable t
includes the loop termination expression.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">do</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
  <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">t</span> <span class="o">!=</span> <span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
5
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-for-loop">
<span id="id7"></span><h2>The For Loop<a class="headerlink" href="#the-for-loop" title="Permalink to this headline">¶</a></h2>
<p>The for loop iterates over ranges, domains, arrays, iterators, or any
class that implements an iterator named <code class="docutils literal notranslate"><span class="pre">these</span></code>. The syntax of the for
loop is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>for-statement:
  `for&#39; index-var-declaration `in&#39; iteratable-expression `do&#39; statement
  `for&#39; index-var-declaration `in&#39; iteratable-expression block-statement
  `for&#39; iteratable-expression `do&#39; statement
  `for&#39; iteratable-expression block-statement

index-var-declaration:
  identifier
  tuple-grouped-identifier-list

iteratable-expression:
  expression
  `zip&#39; ( expression-list )
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">index-var-declaration</span></code> declares new variables for the scope of
the loop. It may specify a new identifier or may specify multiple
identifiers grouped using a tuple notation in order to destructure the
values returned by the iterator expression, as described
in&nbsp;<a class="reference internal" href="tuples.html#indices-in-a-tuple"><span class="std std-ref">Splitting a Tuple into Multiple Indices of a Loop</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">index-var-declaration</span></code> is optional and may be omitted if the
indices do not need to be referenced in the loop.</p>
<p>If the iteratable-expression begins with the keyword <code class="docutils literal notranslate"><span class="pre">zip</span></code> followed by
a parenthesized expression-list, the listed expressions must support
zipper iteration.</p>
<div class="section" id="zipper-iteration">
<span id="id8"></span><h3>Zipper Iteration<a class="headerlink" href="#zipper-iteration" title="Permalink to this headline">¶</a></h3>
<p>When multiple iterators are iterated over in a zipper context, on each
iteration, each expression is iterated over, the values are returned by
the iterators in a tuple and assigned to the index, and then statement
is executed.</p>
<p>The shape of each iterator, the rank and the extents in each dimension,
must be identical.</p>
<blockquote>
<div><p><em>Example (zipper.chpl)</em>.</p>
<p>The output of</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="kd">in</span> <span class="k">zip</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="o">..</span><span class="mi">6</span><span class="p">)</span> <span class="k">do</span>
  <span class="nx">write</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>is</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>1 4 2 5 3 6
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="parameter-for-loops">
<span id="id9"></span><h3>Parameter For Loops<a class="headerlink" href="#parameter-for-loops" title="Permalink to this headline">¶</a></h3>
<p>Parameter for loops are unrolled by the compiler so that the index
variable is a parameter rather than a variable. The syntax for a
parameter for loop statement is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>param-for-statement:
  `for&#39; `param&#39; identifier `in&#39; param-iteratable-expression `do&#39; statement
  `for&#39; `param&#39; identifier `in&#39; param-iteratable-expression block-statement

param-iteratable-expression:
  range-literal
  range-literal `by&#39; integer-literal
</pre></div>
</div>
<p>Parameter for loops are restricted to iteration over range literals with
an optional by expression where the bounds and stride must be
parameters. The loop is then unrolled for each iteration.</p>
</div>
</div>
<div class="section" id="the-break-continue-and-label-statements">
<span id="label-break-continue"></span><h2>The Break, Continue and Label Statements<a class="headerlink" href="#the-break-continue-and-label-statements" title="Permalink to this headline">¶</a></h2>
<p>The break- and continue-statements are used to alter the flow of control
within a loop construct. A break-statement causes flow to exit the
containing loop and resume with the statement immediately following it.
A continue-statement causes control to jump to the end of the body of
the containing loop and resume execution from there. By default, break-
and continue-statements exit or skip the body of the
immediately-containing loop construct.</p>
<p>The label-statement is used to name a specific loop so that <code class="docutils literal notranslate"><span class="pre">break</span></code>
and <code class="docutils literal notranslate"><span class="pre">continue</span></code> can exit or resume a less-nested loop. Labels can only
be attached to for-, while-do- and do-while-statements. When a break
statement has a label, execution continues with the first statement
following the loop statement with the matching label. When a continue
statement has a label, execution continues at the end of the body of the
loop with the matching label. If there is no containing loop construct
with a matching label, a compile-time error occurs.</p>
<p>The syntax for label, break, and continue statements is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>break-statement:
  `break&#39; identifier[OPT] ;

continue-statement:
  `continue&#39; identifier[OPT] ;

label-statement:
  `label&#39; identifier statement
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">break</span></code> statement cannot be used to exit a parallel loop
<a class="reference internal" href="data-parallelism.html#forall"><span class="std std-ref">The Forall Statement</span></a>.</p>
<blockquote>
<div><p><em>Rationale</em>.</p>
<p>Breaks are not permitted in parallel loops because the execution
order of the iterations of parallel loops is not defined.</p>
</div></blockquote>
<blockquote>
<div><p><em>Future</em>.</p>
<p>We expect to support a <em>eureka</em> concept which would enable one or
more tasks to stop the execution of all current and future iterations
of the loop.</p>
<p><em>Example</em>.</p>
<p>In the following code, the index of the first element in each row of
<code class="docutils literal notranslate"><span class="pre">A</span></code> that is equal to <code class="docutils literal notranslate"><span class="pre">findVal</span></code> is printed. Once a match is found,
the continue statement is executed causing the outer loop to move to
the next row.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="nx">outer</span> <span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="nx">n</span> <span class="p">{</span>
  <span class="k">for</span> <span class="nx">j</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="nx">n</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">A</span><span class="p">[</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">]</span> <span class="o">==</span> <span class="nx">findVal</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;index: &quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">),</span> <span class="s">&quot; matches.&quot;</span><span class="p">);</span>
      <span class="k">continue</span> <span class="nx">outer</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-use-statement">
<span id="id10"></span><h2>The Use Statement<a class="headerlink" href="#the-use-statement" title="Permalink to this headline">¶</a></h2>
<p>The use statement provides access to the constants in an enumerated type
or to the public symbols of a module without the need to use a fully
qualified name. When using a module, the statement also ensures that the
module symbol itself is visible within the current scope (top-level
modules are not otherwise visible without a <code class="docutils literal notranslate"><span class="pre">use</span></code>).</p>
<p>The syntax of the use statement is given by:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>use-statement:
  privacy-specifier[OPT] `use&#39; module-or-enum-name-list ;

module-or-enum-name-list:
  module-or-enum-name limitation-clause[OPT]
  module-or-enum-name , module-or-enum-name-list

module-or-enum-name:
  identifier
  identifier . module-or-enum-name

limitation-clause:
  `except&#39; exclude-list
  `only&#39; rename-list[OPT]

exclude-list:
  identifier-list
  $ * $

rename-list:
  rename-base
  rename-base , rename-list

rename-base:
  identifier `as&#39; identifier
  identifier
</pre></div>
</div>
<p>For example, the program</p>
<blockquote>
<div><p><em>Example (use1.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">M1</span> <span class="p">{</span>
  <span class="k">proc</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;In M1&#39;s foo.&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">module</span> <span class="nc">M2</span> <span class="p">{</span>
  <span class="k">use</span> <span class="nx">M1</span><span class="p">;</span>
  <span class="k">proc</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;In M2&#39;s main.&quot;</span><span class="p">);</span>
    <span class="nx">M1</span><span class="p">.</span><span class="nx">foo</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>prints out</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>In M2&#39;s main.
In M1&#39;s foo.
</pre></div>
</div>
</div></blockquote>
<p>This program is equivalent to:</p>
<blockquote>
<div><p><em>Example (use2.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">M1</span> <span class="p">{</span>
  <span class="k">proc</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;In M1&#39;s foo.&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">module</span> <span class="nc">M2</span> <span class="p">{</span>
  <span class="k">proc</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">use</span> <span class="nx">M1</span><span class="p">;</span>

    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;In M2&#39;s main.&quot;</span><span class="p">);</span>
    <span class="nx">foo</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>which also prints out</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>In M2&#39;s main.
In M1&#39;s foo.
</pre></div>
</div>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">module-or-enum-name</span></code> in a <code class="docutils literal notranslate"><span class="pre">use</span></code> statement must begin with one of
the following:</p>
<blockquote>
<div><ul class="simple">
<li>a top-level module name</li>
<li>a submodule of the current module</li>
<li>a module name currently in scope due to another <code class="docutils literal notranslate"><span class="pre">use</span></code> statement</li>
<li>any number of <code class="docutils literal notranslate"><span class="pre">super</span></code> components to indicate a number of parents of
the current module (e.g. <code class="docutils literal notranslate"><span class="pre">super.super.SomeModule</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">this</span></code> to indicate the requested module is a submodule of the
current module</li>
</ul>
</div></blockquote>
<p>The names that are imported by a use statement are inserted in to a new
scope that immediately encloses the scope within which the statement
appears. This implies that the position of the use statement within a
scope has no effect on its behavior. If a scope includes multiple use
statements then the imported names are inserted in to a common enclosing
scope.</p>
<p>An error is signaled if multiple enumeration constants or public
module-level symbols would be inserted into this enclosing scope with
the same name, and that name is referenced by other statements in the
same scope as the use.</p>
<p>Use statements may be explicitly delared <code class="docutils literal notranslate"><span class="pre">public</span></code> or <code class="docutils literal notranslate"><span class="pre">private</span></code>.
By default, uses are <code class="docutils literal notranslate"><span class="pre">private</span></code>.  Making a use <code class="docutils literal notranslate"><span class="pre">public</span></code> causes its
symbols to be transitively visible: if module A uses module B, and
module B contains a public use of a module or enumerated type C, then
C’s public symbols will also be visible to A unless they are shadowed
by symbols of the same name in B.  Conversely, if B’s use of C is
<code class="docutils literal notranslate"><span class="pre">private</span></code> then A will not be able to see C’s symbols due to that
<code class="docutils literal notranslate"><span class="pre">use</span></code>.</p>
<p>This notion of transitivity extends to the case in which a scope
imports symbols from multiple modules or constants from multiple
enumeration types. For example if a module A uses modules B1, B2, B3
and modules B1, B2, B3 publicly use modules C1, C2, C3 respectively,
then all of the public symbols in B1, B2, B3 have the potential to
shadow the public symbols of C1, C2, and C3. However an error is
signaled if C1, C2, C3 have conflicting public module-level
definitions of the same symbol.</p>
<p>An optional <code class="docutils literal notranslate"><span class="pre">limitation-clause</span></code> may be provided to limit the symbols
made available by a given use statement. If an <code class="docutils literal notranslate"><span class="pre">except</span></code> list is
provided, then all the visible but unlisted symbols in the module or
enumerated type will be made available without prefix. If an <code class="docutils literal notranslate"><span class="pre">only</span></code>
list is provided, then just the listed visible symbols in the module or
enumerated type will be made available without prefix. All visible
symbols not provided via these limited use statements are still
accessible by prefixing the access with the name of the module or
enumerated type. It is an error to provide a name in a
<code class="docutils literal notranslate"><span class="pre">limitation-clause</span></code> that does not exist or is not visible in the
respective module or enumerated type.</p>
<p>If a type is specified in the <code class="docutils literal notranslate"><span class="pre">limitation-clause</span></code>, then the type’s
fields and methods are treated similarly to the type name. These fields
and methods cannot be specified in a <code class="docutils literal notranslate"><span class="pre">limitation-clause</span></code> on their own.</p>
<p>If an <code class="docutils literal notranslate"><span class="pre">only</span></code> list is left empty or <code class="docutils literal notranslate"><span class="pre">except</span></code> is followed by <span class="math notranslate nohighlight">\(*\)</span>
then no symbols are made available to the scope without prefix. However,
any methods or fields defined within a module used in this way will
still be accessible on instances of the type. For example:</p>
<blockquote>
<div><p><em>Example (limited-access.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">M1</span> <span class="p">{</span>
  <span class="k">record</span> <span class="nc">A</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">proc</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;In A.foo()&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">module</span> <span class="nc">M2</span> <span class="p">{</span>
  <span class="k">proc</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">use</span> <span class="nx">M1</span> <span class="k">only</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">M1</span><span class="p">.</span><span class="nx">A</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// Only accessible via the module prefix</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// Accessible because we have a record instance</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">foo</span><span class="p">();</span> <span class="c1">// Ditto</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>will print out</p>
<div class="highlight-printoutput notranslate"><div class="highlight"><pre><span></span>3
In A.foo()
</pre></div>
</div>
</div></blockquote>
<p>Within an <code class="docutils literal notranslate"><span class="pre">only</span></code> list, a visible symbol from that module may
optionally be given a new name using the <code class="docutils literal notranslate"><span class="pre">as</span></code> keyword. This new name
will be usable from the scope of the use in place of the old name unless
the old name is additionally specified in the <code class="docutils literal notranslate"><span class="pre">only</span></code> list. If a use
which renames a symbol is present at module scope, uses of that module
will also be able to reference that symbol using the new name instead of
the old name. Renaming does not affect accesses to that symbol via the
source module’s or enumerated type’s prefix, nor does it affect uses of
that module or enumerated type from other contexts. It is an error to
attempt to rename a symbol that does not exist or is not visible in the
respective module or enumerated type, or to rename a symbol to a name
that is already present in the same <code class="docutils literal notranslate"><span class="pre">only</span></code> list. It is, however,
perfectly acceptable to rename a symbol to a name present in the
respective module or enumerated type which was not specified via that
<code class="docutils literal notranslate"><span class="pre">only</span></code> list.</p>
<p>If a use statement mentions multiple modules or enumerated types or a
mix of these symbols, only the last module or enumerated type can have a
<code class="docutils literal notranslate"><span class="pre">limitation-clause</span></code>. Limitation clauses are applied transitively as
well - in the first example, if module A’s use of module B contains an
<code class="docutils literal notranslate"><span class="pre">except</span></code> or <code class="docutils literal notranslate"><span class="pre">only</span></code> list, that list will also limit which of C’s
symbols are visible to A.</p>
<p>For more information on enumerated types, please
see&nbsp;<a class="reference internal" href="types.html#enumerated-types"><span class="std std-ref">Enumerated Types</span></a>. For use statement rules which are
only applicable to modules, please see&nbsp;<a class="reference internal" href="modules.html#using-modules"><span class="std std-ref">Using Modules</span></a>.
For more information on modules in general, please
see&nbsp;<a class="reference internal" href="modules.html#chapter-modules"><span class="std std-ref">Modules</span></a>.</p>
</div>
<div class="section" id="the-defer-statement">
<span id="id11"></span><h2>The Defer Statement<a class="headerlink" href="#the-defer-statement" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement declares a clean-up action to be run when exiting
a block. <code class="docutils literal notranslate"><span class="pre">defer</span></code> is useful because the clean-up action will be run no
matter how the block is exited.</p>
<p>The syntax is:</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>defer-statement:
  `defer&#39; statement
</pre></div>
</div>
<p>At a given place where control flow exits a block, the in-scope
<code class="docutils literal notranslate"><span class="pre">defer</span></code> statements and the local variables will be handled in reverse
declaration order. Handling a <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement consists of executing
the contained clean-up action. Handling a local variable consists of
running its deinitializer if it is of record type.</p>
<p>When an iterator contains a <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement at the top level, the
associated clean-up action will be executed when the loop running the
iterator exits. <code class="docutils literal notranslate"><span class="pre">defer</span></code> actions inside a loop body are executed when
that iteration completes.</p>
<p>The following program demonstrates a simple use of <code class="docutils literal notranslate"><span class="pre">defer</span></code> to create
an action to be executed when returning from a function:</p>
<blockquote>
<div><p><em>Example (defer1.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Integer</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span><span class="p">:</span><span class="kt">int</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">proc</span> <span class="nf">deferInFunction</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="k">unmanaged</span> <span class="nx">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;created &quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
  <span class="nx">defer</span> <span class="p">{</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;defer action: deleting &quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
    <span class="k">delete</span> <span class="nx">c</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// ... (function body, possibly including return statements)</span>
  <span class="c1">// The defer action is executed no matter how this function returns.</span>
<span class="p">}</span>
<span class="nx">deferInFunction</span><span class="p">();</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>created <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
defer action: deleting <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The following example uses a nested block to demonstrate that <code class="docutils literal notranslate"><span class="pre">defer</span></code>
is handled when exiting the block in which it is contained:</p>
<blockquote>
<div><p><em>Example (defer2.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Integer</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span><span class="p">:</span><span class="kt">int</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">proc</span> <span class="nf">deferInNestedBlock</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;before inner block&quot;</span><span class="p">);</span>
  <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="k">unmanaged</span> <span class="nx">Integer</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;created &quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
    <span class="nx">defer</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;defer action: deleting &quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
      <span class="k">delete</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;in inner block&quot;</span><span class="p">);</span>
    <span class="c1">// note, defer action is executed no matter how this block is exited</span>
  <span class="p">}</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;after inner block&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">deferInNestedBlock</span><span class="p">();</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>before inner block
created <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
in inner block
defer action: deleting <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
after inner block
</pre></div>
</div>
</div></blockquote>
<p>Lastly, this example shows that when <code class="docutils literal notranslate"><span class="pre">defer</span></code> is used in a loop, the
action will be executed for every loop iteration, whether or not loop
body is exited early.</p>
<blockquote>
<div><p><em>Example (defer3.chpl)</em>.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Integer</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span><span class="p">:</span><span class="kt">int</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">proc</span> <span class="nf">deferInLoop</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">10</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="k">unmanaged</span> <span class="nx">Integer</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;created &quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
    <span class="nx">defer</span> <span class="p">{</span>
      <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;defer action: deleting &quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
      <span class="k">delete</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">writeln</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
    <span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">then</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">deferInLoop</span><span class="p">();</span>
</pre></div>
</div>
<p>produces the output</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>created <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
<span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
defer action: deleting <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">}</span>
created <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">2</span><span class="o">}</span>
<span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">2</span><span class="o">}</span>
defer action: deleting <span class="o">{</span><span class="nv">x</span> <span class="o">=</span> <span class="m">2</span><span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-empty-statement">
<span id="id12"></span><h2>The Empty Statement<a class="headerlink" href="#the-empty-statement" title="Permalink to this headline">¶</a></h2>
<p>An empty statement has no effect. The syntax of an empty statement is
given by</p>
<div class="highlight-syntax notranslate"><div class="highlight"><pre><span></span>empty-statement:
  ;
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules.html" class="btn btn-neutral float-right" title="Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="expressions.html" class="btn btn-neutral float-left" title="Expressions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hewlett Packard Enterprise Development LP

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>