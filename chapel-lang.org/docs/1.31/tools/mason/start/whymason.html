<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Why would I want to use mason? &mdash; Chapel Documentation 1.31</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Basic Usage" href="../guide/basicusage.html" />
    <link rel="prev" title="Using a Mason Package" href="helloworld.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.31
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.31";
$pagename = "tools/mason/start/whymason";
include "../../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../c2chapel/c2chapel.html">c2chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chpldoc/chpldoc.html">chpldoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chplvis/chplvis.html">chplvis</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../mason.html">Mason</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../mason.html#overview">Overview</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mason.html#getting-started-with-mason">Getting Started with Mason</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="installation.html">Installation Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="helloworld.html">Using a Mason Package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Why would I want to use mason?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-three-modes-of-mason">The Three Modes of Mason</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mason.html#mason-guide">Mason Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../protoc-gen-chpl/protoc-gen-chpl.html">Protocol Buffers Support in Chapel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">Tools</a> &raquo;</li>
          <li><a href="../mason.html">Mason</a> &raquo;</li>
      <li>Why would I want to use mason?</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/tools/mason/start/whymason.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="why-would-i-want-to-use-mason">
<h1>Why would I want to use mason?<a class="headerlink" href="#why-would-i-want-to-use-mason" title="Permalink to this headline">¶</a></h1>
<p>So, you want to write some Chapel code and find yourself asking if it would
make sense to use mason or if it would just end up adding needless overhead to your
project in the long run. Here’s an answer for you: Yes! You should use mason!</p>
<p>Using mason brings with it a number of valuable features that are not available
to users of the old-fashioned <code class="docutils literal notranslate"><span class="pre">chpl</span></code> command. Some of these are:</p>
<ul class="simple">
<li><p>access to libraries contributed by the Chapel community (see <a class="reference internal" href="helloworld.html#using-a-package"><span class="std std-ref">Using a Mason Package</span></a>)</p></li>
<li><p>portable, simple build commands (see <a class="reference internal" href="../guide/buildingandrunning.html#building-and-running"><span class="std std-ref">Building and Running</span></a>)</p></li>
<li><p>a built-in testing framework to help test your code (see <a class="reference internal" href="../guide/testing.html#testing-with-mason"><span class="std std-ref">Testing your Package</span></a>)</p></li>
<li><p>make your code easily shareable on GitHub (see <a class="reference internal" href="../guide/gitdependencies.html#mason-git-dependencies"><span class="std std-ref">Specifying Dependencies from git Repositories</span></a>)</p></li>
<li><p>contribute your own libraries and help the Chapel community grow (see <a class="reference internal" href="../guide/submitting.html#submit-a-package"><span class="std std-ref">Submit a Package</span></a>)</p></li>
</ul>
<p>So, you see, a better question would be “Why not use mason?” instead of “Why use mason?”</p>
</div>
<div class="section" id="the-three-modes-of-mason">
<h1>The Three Modes of Mason<a class="headerlink" href="#the-three-modes-of-mason" title="Permalink to this headline">¶</a></h1>
<p>Now, having answered the “why” of mason, let’s get into the “how”.</p>
<p>There are three distinct types of mason packages:</p>
<ol class="arabic simple">
<li><p>mason applications</p></li>
<li><p>mason libraries</p></li>
<li><p>mason lightweight projects</p></li>
</ol>
<p>Each of these types of mason packages serve different purposes and, to use mason effectively,
it helps to know what each type has been designed for.</p>
<div class="section" id="mason-applications">
<h2>Mason Applications<a class="headerlink" href="#mason-applications" title="Permalink to this headline">¶</a></h2>
<p>A mason application, which is the default type of mason package, is meant to be a self-contained,
executable, full application. What this means is that a mason application will have a main
module and expect to be built and run as a standalone application, as opposed to being only a
library that contains functions that are valuable to users, but you wouldn’t want to run by
themselves.</p>
<p>When you create a mason application with <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">new</span> <span class="pre">&lt;package-name&gt;</span></code> or
<code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">new</span> <span class="pre">&lt;package-name&gt;</span> <span class="pre">--app</span></code>, the default module created will have a <code class="docutils literal notranslate"><span class="pre">main()</span></code> function
already in place. This is what drives your application and where the execution will start.
This <code class="docutils literal notranslate"><span class="pre">main()</span></code> function is unique to the mason application package type and makes it the only
type of mason package that can be ran via <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">run</span></code>.</p>
<p>When compiling Chapel code, there can only be one <code class="docutils literal notranslate"><span class="pre">main()</span></code> function (or you will need to use the
<code class="docutils literal notranslate"><span class="pre">--main-module</span></code> flag to specify which one to run). This means that mason application package
types are not meant to be used as dependencies for other mason packages and cannot be added as a
dependency with the <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">add</span> <span class="pre">&lt;library-name&#64;version&gt;</span></code> command. Rather, mason applications published
to the mason registry can be downloaded, built, and run using the mason install &lt;application-name&gt;
command (which is currently a work in progress). If you would like to create a library with functions
to be exposed to other users, the mason library is what you are looking for (see <a class="reference internal" href="#mason-libraries"><span class="std std-ref">Mason Libraries</span></a>).</p>
<p>Some examples of when you would want to use a mason application as opposed to one of the other
types are a benchmark that you would like others to be able to compile and execute in a reproducible
way, an application that simulates the weather, or just about anywhere you have a cool program that
you would like to share.</p>
</div>
<div class="section" id="mason-libraries">
<span id="id1"></span><h2>Mason Libraries<a class="headerlink" href="#mason-libraries" title="Permalink to this headline">¶</a></h2>
<p>A mason library is meant to be a module that contains functions that are to be made accessible
to other users. Mason libraries do not have a <code class="docutils literal notranslate"><span class="pre">main()</span></code> function and cannot be run with the
<code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">run</span></code> command, but Mason library code can be executed through examples
(see <a class="reference internal" href="../guide/examples.html#mason-examples"><span class="std std-ref">Creating and Running Examples</span></a>).</p>
<p>To start writing your own mason library, use the <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">new</span> <span class="pre">&lt;package-name&gt;</span> <span class="pre">--lib</span></code> command and
mason will create an empty default module. Inside the empty module you can define the
functions your library will provide to its users.</p>
<p>Some examples of when you would want to create a mason library as opposed to an application are:</p>
<ul class="simple">
<li><p>You want to provide a linear algebra library for other Chapel programs</p></li>
<li><p>You have multiple Chapel projects that depend on a common set of functionality you wish to centralize</p></li>
<li><p>You found some functionality missing from Chapel, and think others could benefit from your solution</p></li>
</ul>
</div>
<div class="section" id="mason-lightweight-projects">
<h2>Mason Lightweight Projects<a class="headerlink" href="#mason-lightweight-projects" title="Permalink to this headline">¶</a></h2>
<p>A mason lightweight project is simply a mason manifest file that tracks which mason packages your
Chapel code depends on. This gives all Chapel users the ability to use mason libraries
as dependencies, without forcing your project to use the folder structure defined for mason packages.</p>
<p>Lightweight packages cannot use most mason commands, such as <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">build</span></code> or <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">run</span></code>, but a special
<code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">modules</span></code> command allows you to get the <code class="docutils literal notranslate"><span class="pre">chpl</span></code> compiler flags necessary to include the list of
dependencies in your Chapel project.</p>
<p>When you run the <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">new</span> <span class="pre">--light</span></code> command to create a lightweight package, mason creates a basic
<code class="docutils literal notranslate"><span class="pre">Mason.toml</span></code> file in the current directory. You can add dependencies to that file by using the
<code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">add</span> <span class="pre">&lt;package-name&#64;ver&gt;</span></code> command or specifying a git dependency (see <a class="reference internal" href="../guide/gitdependencies.html#mason-git-dependencies"><span class="std std-ref">Specifying Dependencies from git Repositories</span></a>),
the same as you would for other mason package types.</p>
<p>After adding your project’s dependencies to the <code class="docutils literal notranslate"><span class="pre">Mason.toml</span></code> file, use the <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">modules</span></code> command to
print out the flags that should be added to your build system’s chpl compilation step.</p>
<p>The main reason you would use a lightweight mason project as opposed to one of the other
types of mason project types would be in the case that you already have a project that is
built out and has its own well-defined build process that uses something like a <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>
to handle building, so you just want to use some mason packages without having to corral
your directory structure to fit the requirements of a mason application.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="helloworld.html" class="btn btn-neutral float-left" title="Using a Mason Package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../guide/basicusage.html" class="btn btn-neutral float-right" title="Basic Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>