

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Chapel’s Deprecation Policy &mdash; Chapel Documentation 1.25</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Nightly Testing" href="NightlyTesting.html" />
    <link rel="prev" title="Sanitizers" href="Sanitizers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.25
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.25";
$pagename = "developer/bestPractices/Deprecation";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Docs for Contributors</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Best Practices for Contributors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="ContributorInfo.html">Contributor Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="DCO.html">Getting started with Chapel and the Developer Certificate of Origin (DCO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CompilerDebugging.html">Tips On Debugging The Compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="CompilerIRTricks.html">Examining/Debugging Compiler IR</a></li>
<li class="toctree-l3"><a class="reference internal" href="ErrorWarningMessaging.html">How To Generate Warnings And Error Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="RuntimeLibrary.html">The Chapel Runtime Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="GeneratedCode.html">All About Compiler-Generated Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="GASNetOnDesktops.html">Running Chapel Programs with GASNet on your Desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="git.html">Git tips for Chapel developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHPL_DEVELOPER.html">The CHPL_DEVELOPER environment variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="TestSystem.html">Chapel Testing System</a></li>
<li class="toctree-l3"><a class="reference internal" href="SpellChecking.html">chplspell</a></li>
<li class="toctree-l3"><a class="reference internal" href="Valgrind.html">Valgrind</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sanitizers.html">Sanitizers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Chapel’s Deprecation Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="NightlyTesting.html">Nightly Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="StandardModuleStyle.html">Standard Module Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="TestAnnotationsLocally.html">How to test ANNOTATIONS.yaml changes locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildingdocs.html">Building Chapel Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Potpourri.html">Miscellaneous Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiler-internals/index.html">Compiler Library API Docs</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Docs for Contributors</a> &raquo;</li>
        
          <li><a href="index.html">Best Practices for Contributors</a> &raquo;</li>
        
      <li>Chapel’s Deprecation Policy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/developer/bestPractices/Deprecation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="chapel-s-deprecation-policy">
<span id="best-practices-deprecation"></span><h1>Chapel’s Deprecation Policy<a class="headerlink" href="#chapel-s-deprecation-policy" title="Permalink to this headline">¶</a></h1>
<p>When removing a feature in Chapel, the feature is to be deprecated and
supported for at least 1 release cycle.</p>
<p>Major feature removals can be supported for more than 1 release cycle.</p>
<p>Non-public interface features can be removed or modified without deprecation.</p>
<p>This is the deprecation process:</p>
<ol class="arabic simple">
<li><p>Provide a warning or error message when a deprecated feature is used. This
may be in the module code, compiler, or runtime, and can be emitted at
compile-time or runtime.</p></li>
</ol>
<p>The deprecation message uses the following format:</p>
<p><code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">is</span> <span class="pre">deprecated</span> <span class="pre">-</span> <span class="pre">please</span> <span class="pre">use</span> <span class="pre">bar</span></code></p>
<p>For compile-time messaging you can use <code class="docutils literal notranslate"><span class="pre">compilerWarning()</span></code> to do this, but
when deprecating symbols the <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> keyword often works better because
it can be applied to any symbol in a uniform way.  Look in the test/deprecated
and test/deprecated-keyword directories for many examples.  Note that the
<code class="docutils literal notranslate"><span class="pre">deprecated</span></code> keyword itself is likely to be replaced by different syntax in
the future, though this may not affect its use in practice since deprecations
typically only last for one release anyway.</p>
<p>Currently, the <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> keyword optionally takes a string literal, which
is used for the deprecated symbol’s documentation and compiler warning message.
If there is also a documentation comment applied to the symbol that comment
will take precedence when producing documentation.  When we produce a compiler
warning we filter it to remove any inline markup.</p>
<p>This means if your deprecation message points to the preferred feature using
syntax like this: <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">is</span> <span class="pre">deprecated</span> <span class="pre">-</span> <span class="pre">please</span> <span class="pre">use</span> <span class="pre">:proc:`bar`</span></code>, then in the
generated documentation “bar” will link to the documentation for the “bar”
procedure, and when producing the compiler warning the “:proc:” syntax and
backticks will be filtered out.</p>
<ol class="arabic simple" start="2">
<li><p>Update the deprecated feature documentation to state that it is deprecated
and point to the preferred feature.</p></li>
</ol>
<p>For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Foo module short description.

<span class="p">..</span> <span class="ow">warning</span><span class="p">::</span>

    This module has been deprecated - please use <span class="na">:mod:</span><span class="nv">`bar`</span> instead.

Foo module long description.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step is not necessary when using the <code class="docutils literal notranslate"><span class="pre">deprecated</span></code> keyword to
generate the documentation.</p>
</div>
<ol class="arabic simple" start="3">
<li><p>Search for error messages that refer to the deprecated feature.
If appropriate, update them to refer to the new feature.</p></li>
<li><p>Add a deprecation test to <code class="docutils literal notranslate"><span class="pre">test/deprecated/</span></code> to:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>confirm the deprecation warning works as intended</p></li>
<li><p>remind us to to remove the deprecated feature in the following release</p></li>
</ul>
</div></blockquote>
<p>Optionally include deprecation timeline in comments of deprecation test:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="c1">// Deprecated in Chapel 1.14, to be removed in Chapel 1.15</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="NightlyTesting.html" class="btn btn-neutral float-right" title="Nightly Testing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Sanitizers.html" class="btn btn-neutral float-left" title="Sanitizers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Hewlett Packard Enterprise Development LP.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 



</body>
</html>