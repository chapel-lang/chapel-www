

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Module: AdvancedIters &mdash; chpldoc 0.0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="chpldoc 0.0.1 documentation" href="../../index.html"/>
        <link rel="next" title="Module: Assert" href="Assert.html"/>
        <link rel="prev" title="chpldoc documentation" href="../../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> chpldoc</a>
        
        
<?php   // Variables given by sphinx 
   $chplTitle = "1.11";   $pagename = "./modules/standard/AdvancedIters";   include "../../versionButton.php";   ?>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">chpldoc documentation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Module: AdvancedIters</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assert.html">Module: Assert</a></li>
<li class="toctree-l1"><a class="reference internal" href="BitOps.html">Module: BitOps</a></li>
<li class="toctree-l1"><a class="reference internal" href="Buffers.html">Module: Buffers</a></li>
<li class="toctree-l1"><a class="reference internal" href="CommDiagnostics.html">Module: CommDiagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Curl.html">Module: Curl</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#enabling-curl-support">Enabling Curl Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#using-curl-support-in-chapel">Using Curl Support in Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-1">Example 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-2">Example 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-3">Example 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-4">Example 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-5">Example 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-6">Example 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#example-7">Example 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="Curl.html#curl-support-types-and-functions">Curl Support Types and Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Error.html">Module: Error</a></li>
<li class="toctree-l1"><a class="reference internal" href="FFTW.html">Module: FFTW</a></li>
<li class="toctree-l1"><a class="reference internal" href="FFTW_MT.html">Module: FFTW_MT</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileSystem.html">Module: FileSystem</a><ul>
<li class="toctree-l2"><a class="reference internal" href="FileSystem.html#file-directory-manipulations">File/Directory Manipulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileSystem.html#file-directory-properties">File/Directory Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileSystem.html#locale-state-functionality">Locale State Functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileSystem.html#file-system-traversal-iterators">File System Traversal Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileSystem.html#constant-and-function-definitions">Constant and Function Definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="GMP.html">Module: GMP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="GMP.html#using-the-gmp-module">Using the GMP Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="GMP.html#using-the-bigint-class">Using the BigInt class</a></li>
<li class="toctree-l2"><a class="reference internal" href="GMP.html#calling-gmp-functions-directly">Calling GMP functions directly</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDFS.html">Module: HDFS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDFS.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDFS.html#enabling-hdfs-support">Enabling HDFS Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDFS.html#using-hdfs-support-in-chapel">Using HDFS Support in Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDFS.html#setting-up-hadoop">Setting up Hadoop</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDFS.html#hdfs-support-types-and-functions">HDFS Support Types and Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDFSiterator.html">Module: HDFSiterator</a></li>
<li class="toctree-l1"><a class="reference internal" href="Help.html">Module: Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="IO.html">Module: IO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="IO.html#i-o-overview">I/O Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#design-rationale">Design Rationale</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#i-o-styles">I/O Styles</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#files">Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#functions-for-channel-creation">Functions for Channel Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#synchronization-of-channel-data-and-avoiding-data-races">Synchronization of Channel Data and Avoiding Data Races</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#performing-i-o-with-channels">Performing I/O with Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#functions-for-closing-channels">Functions for Closing Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#the-stdin-stdout-and-stderr-channels">The <tt class="docutils literal"><span class="pre">stdin</span></tt>, <tt class="docutils literal"><span class="pre">stdout</span></tt>, and <tt class="docutils literal"><span class="pre">stderr</span></tt> Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#error-handling">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#ensuring-successful-i-o">Ensuring Successful I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#correspondence-to-c-i-o">Correspondence to C I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#bytes-type">Bytes Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#buffers">Buffers</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#formatted-i-o">Formatted I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="IO.html#io-functions-and-types">IO Functions and Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="List.html">Module: List</a></li>
<li class="toctree-l1"><a class="reference internal" href="Math.html">Module: Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="Memory.html">Module: Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="Norm.html">Module: Norm</a></li>
<li class="toctree-l1"><a class="reference internal" href="Path.html">Module: Path</a></li>
<li class="toctree-l1"><a class="reference internal" href="Random.html">Module: Random</a></li>
<li class="toctree-l1"><a class="reference internal" href="RecordParser.html">Module: RecordParser</a><ul>
<li class="toctree-l2"><a class="reference internal" href="RecordParser.html#example-1">Example 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="RecordParser.html#example-2">Example 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="RecordParser.html#recordparser-types-and-functions">RecordParser Types and Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Regexp.html">Module: Regexp</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Regexp.html#enabling-regular-expression-support">Enabling Regular Expression Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="Regexp.html#using-regular-expression-support">Using Regular Expression Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="Regexp.html#re2-regular-expression-syntax-reference">RE2 regular expression syntax reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="Regexp.html#regular-expression-types-and-methods">Regular Expression Types and Methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Search.html">Module: Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sort.html">Module: Sort</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sys.html">Module: Sys</a></li>
<li class="toctree-l1"><a class="reference internal" href="SysBasic.html">Module: SysBasic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Time.html">Module: Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="Types.html">Module: Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="UtilMath.html">Module: UtilMath</a></li>
<li class="toctree-l1"><a class="reference internal" href="UtilReplicatedVar.html">Module: UtilReplicatedVar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="UtilReplicatedVar.html#how-to-use-replicated-variables">How to use replicated variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="UtilReplicatedVar.html#replicating-over-a-subset-of-locales">Replicating over a subset of locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="UtilReplicatedVar.html#declarations">Declarations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gen/doc/SysCTypes.html">Module: SysCTypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="startInitCommDiags.html">Module: startInitCommDiags</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">chpldoc</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Module: AdvancedIters</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/modules/standard/AdvancedIters.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <span class="target" id="module-AdvancedIters"></span><div class="section" id="module-advancediters">
<h1>Module: AdvancedIters<a class="headerlink" href="#module-advancediters" title="Permalink to this headline">¶</a></h1>
<p>This module contains several iterators that can be used to drive a <cite>forall</cite>
loop by performing dynamic and adaptive splitting of a range&#8217;s iterations.</p>
<p>For more information, see <em>User-Defined Parallel Zippered Iterators
in Chapel</em>. Bradford L. Chamberlain, Sung-Eun Choi, Steven J. Deitz,
Angeles Navarro. <em>PGAS 2011: Fifth Conference on Partitioned Global
Address Space Programming Models</em>, October 2011.</p>
<dl class="data">
<dt id="AdvancedIters.debugAdvancedIters">
<em class="property">config param </em><tt class="descname">debugAdvancedIters</tt>: bool = false<a class="headerlink" href="#AdvancedIters.debugAdvancedIters" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle debugging output.</p>
</dd></dl>

<dl class="iterfunction">
<dt id="AdvancedIters.dynamic">
<em class="property">iter </em><tt class="descname">dynamic</tt><big>(</big><em>c: range(?)</em>, <em>chunkSize: int</em>, <em>numTasks: int = 0</em><big>)</big><a class="headerlink" href="#AdvancedIters.dynamic" title="Permalink to this definition">¶</a></dt>
<dd><p>The serial version of the dynamic iterator.</p>
<p>Equivalent to serial iteration over the range <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</dd></dl>

<dl class="iterfunction">
<dt>
<em class="property">iter </em><tt class="descname">dynamic</tt><big>(</big><em>param tag: iterKind</em>, <em>c: range(?)</em>, <em>chunkSize: int</em>, <em>numTasks: int = 0</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>c</strong> : <em>range(?)</em> &#8211; The range to iterate over. The length of the range must be greater
than zero.</li>
<li><strong>chunkSize</strong> : <em>int</em> &#8211; The size of chunks to be yielded to each thread. Must be
greater than zero.</li>
<li><strong>numTasks</strong> : <em>int</em> &#8211; The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<tt class="docutils literal"><span class="pre">dataParTasksPerLocale</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last">Indices in the range <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
<p>This iterator is equivalent to the dynamic scheduling approach of OpenMP.</p>
<p>Given an input range <tt class="docutils literal"><span class="pre">c</span></tt>, each task is assigned chunks of size
<tt class="docutils literal"><span class="pre">chunkSize</span></tt> from <tt class="docutils literal"><span class="pre">c</span></tt> (or the remaining iterations if there are fewer
than <tt class="docutils literal"><span class="pre">chunkSize</span></tt>). This continues until there are no remaining iterations
in <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</dd></dl>

<dl class="iterfunction">
<dt id="AdvancedIters.guided">
<em class="property">iter </em><tt class="descname">guided</tt><big>(</big><em>c: range(?)</em>, <em>numTasks: int = 0</em><big>)</big><a class="headerlink" href="#AdvancedIters.guided" title="Permalink to this definition">¶</a></dt>
<dd><p>The serial version of the guided iterator.</p>
<p>Equivalent to serial iteration over the range <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</dd></dl>

<dl class="iterfunction">
<dt>
<em class="property">iter </em><tt class="descname">guided</tt><big>(</big><em>param tag: iterKind</em>, <em>c: range(?)</em>, <em>numTasks: int = 0</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>c</strong> : <em>range(?)</em> &#8211; The range to iterate over. Must have a length greater than zero.</li>
<li><strong>numTasks</strong> : <em>int</em> &#8211; The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<tt class="docutils literal"><span class="pre">dataParTasksPerLocale</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last">Indices in the range <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
<p>This iterator is equivalent to the guided policy of OpenMP: Given an input
range <tt class="docutils literal"><span class="pre">c</span></tt>, each task is assigned chunks of variable size, until there are
no remaining iterations in <tt class="docutils literal"><span class="pre">c</span></tt>. The size of each chunk is the number of
unassigned iterations divided by the number of tasks, <tt class="docutils literal"><span class="pre">numTasks</span></tt>. The size
decreases approximately exponentially to 1. The splitting strategy is
therefore adaptive.</p>
</dd></dl>

<dl class="iterfunction">
<dt id="AdvancedIters.adaptive">
<em class="property">iter </em><tt class="descname">adaptive</tt><big>(</big><em>c: range(?)</em>, <em>numTasks: int = 0</em><big>)</big><a class="headerlink" href="#AdvancedIters.adaptive" title="Permalink to this definition">¶</a></dt>
<dd><p>The serial version of the adaptive iterator.</p>
<p>Equivalent to serial iteration over the range <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</dd></dl>

<dl class="enum">
<dt id="AdvancedIters.Method">
<em class="property">enum </em><tt class="descname">Method</tt> { Whole, RoundRobin, WholeTail }<a class="headerlink" href="#AdvancedIters.Method" title="Permalink to this definition">¶</a></dt>
<dd><p>The enum used to represent adaptive methods.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Whole</span></tt>
Each task without work tries to steal from its neighbor range
until it exhausts that range. Then the task continues with the next
neighbor range, and so on until there is no more work. This is the default
policy.</li>
<li><tt class="docutils literal"><span class="pre">RoundRobin</span></tt>
Each task without work tries to steal once from its neighbor range, next
from the following neighbor range and so on in a round-robin way until
there is no more work.</li>
<li><tt class="docutils literal"><span class="pre">WholeTail</span></tt>
Similar to the <tt class="docutils literal"><span class="pre">Whole</span></tt> method, but now the splitting in the victim
range is performed from its tail.</li>
</ul>
</dd></dl>

<dl class="data">
<dt id="AdvancedIters.methodStealing">
<em class="property">config param </em><tt class="descname">methodStealing</tt> = .(Method, &quot;Whole&quot;)<a class="headerlink" href="#AdvancedIters.methodStealing" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to select the adaptive stealing method. Defaults to <tt class="docutils literal"><span class="pre">Whole</span></tt>.
See <a class="reference internal" href="#AdvancedIters.Method" title="AdvancedIters.Method"><tt class="xref chpl chpl-data docutils literal"><span class="pre">Method</span></tt></a> for more information.</p>
</dd></dl>

<dl class="iterfunction">
<dt>
<em class="property">iter </em><tt class="descname">adaptive</tt><big>(</big><em>param tag: iterKind</em>, <em>c: range(?)</em>, <em>numTasks: int = 0</em><big>)</big></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>c</strong> : <em>range(?)</em> &#8211; The range to iterate over. Must have a length greater than zero.</li>
<li><strong>numTasks</strong> : <em>int</em> &#8211; The number of tasks to use. Must be &gt;= zero. If this argument
has the value 0, it will use the value indicated by
<tt class="docutils literal"><span class="pre">dataParTasksPerLocale</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last">Indices in the range <tt class="docutils literal"><span class="pre">c</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
<p>This iterator implements a naive adaptive binary splitting work-stealing
strategy: Initially the leader iterator distributes the range to split, <tt class="docutils literal"><span class="pre">c</span></tt>,
evenly among the <tt class="docutils literal"><span class="pre">numTasks</span></tt> tasks.</p>
<p>Then, each task performs adaptive splitting on its local sub-range&#8217;s iterations.
When a task exhausts its local iterations, it steals and splits from the
range of another task (the victim). The splitting method on the local range
and on the victim range is binary: i.e. the size of each chunk is computed as
the number of unassigned iterations divided by 2. There are three stealing
strategies that can be selected at compile time using the config param
<a class="reference internal" href="#AdvancedIters.methodStealing" title="AdvancedIters.methodStealing"><tt class="xref chpl chpl-param docutils literal"><span class="pre">methodStealing</span></tt></a>.</p>
</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Assert.html" class="btn btn-neutral float-right" title="Module: Assert">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../index.html" class="btn btn-neutral" title="chpldoc documentation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Cray Inc.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

</body>
</html>
