<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DistributedBag &mdash; Chapel Documentation 2.3</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c3c8ae58"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DistributedBagDeprecated" href="DistributedBagDeprecated.html" />
    <link rel="prev" title="ConcurrentMap" href="ConcurrentMap.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.3
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.3";
$pagename = "modules/packages/DistributedBag";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">Standard Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../packages.html">Package Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../packages.html#algorithms">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#communication-inter-locale">Communication (Inter-Locale)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../packages.html#data-structures">Data Structures</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ConcurrentMap.html">ConcurrentMap</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DistributedBag</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="DistributedBagDeprecated.html">DistributedBagDeprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="DistributedDeque.html">DistributedDeque</a></li>
<li class="toctree-l3"><a class="reference internal" href="DistributedIters.html">DistributedIters</a></li>
<li class="toctree-l3"><a class="reference internal" href="LinkedLists.html">LinkedLists</a></li>
<li class="toctree-l3"><a class="reference internal" href="LockFreeQueue.html">LockFreeQueue</a></li>
<li class="toctree-l3"><a class="reference internal" href="LockFreeStack.html">LockFreeStack</a></li>
<li class="toctree-l3"><a class="reference internal" href="SortedMap.html">SortedMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="SortedSet.html">SortedSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="UnrolledLinkedList.html">UnrolledLinkedList</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#file-formats-and-i-o">File Formats and I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#interoperability">Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#math-numerical-computing">Math / Numerical Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#memory-management">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#networking-inter-process-communication">Networking / Inter-Process Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#parallel-computing">Parallel Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#tool-support">Tool Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../packages.html">Package Modules</a></li>
      <li class="breadcrumb-item active">DistributedBag</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/modules/packages/DistributedBag.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="distributedbag">
<span id="module-DistributedBag"></span><h1>DistributedBag<a class="headerlink" href="#distributedbag" title="Link to this heading">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">DistributedBag</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">DistributedBag</span><span class="p">;</span>
</pre></div>
</div>
<p>Implements a parallel segmented multi-pool for depth-first tree-search.
The data structure is sometimes referred to as <code class="docutils literal notranslate"><span class="pre">DistBag_DFS</span></code>.</p>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>A parallel-safe distributed multi-pool implementation specialized for depth-first
search (DFS), that scales in terms of nodes, processors per node (PPN), and workload;
the more PPN, the more segments we allocate to increase raw parallelism, and the larger
the workload the better locality (see <a class="reference internal" href="#DistributedBag.distributedBagInitialSegmentCap" title="DistributedBag.distributedBagInitialSegmentCap"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">distributedBagInitialSegmentCap</span></code></a>). This
data structure is locally ordered (ensuring DFS), encapsulates a dynamic work stealing
mechanism to balance work across nodes, and provides a means to obtain a privatized
instance of the data structure for maximized performance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module is a work in progress and may change in future releases.</p>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>To use <a class="reference internal" href="#DistributedBag.distBag" title="DistributedBag.distBag"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">distBag</span></code></a>, the initializer must be invoked explicitly to
properly initialize the data structure. By default, one bag instance is
initialized per locale, and one segment per task.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">bag</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">distBag</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="nx">targetLocales</span><span class="o">=</span><span class="nx">ourTargetLocales</span><span class="p">);</span>
</pre></div>
</div>
<p>The basic methods that distBag supports require a <code class="docutils literal notranslate"><span class="pre">taskId</span></code> argument. This
<code class="docutils literal notranslate"><span class="pre">taskId</span></code> will serve as an index to the segment to be updated and it must be
in <code class="docutils literal notranslate"><span class="pre">0..&lt;here.maskTaskPar</span></code>. More precisely, it is used to map each task to a
segment, which ensures the parallel-safety of the data structure, as well as the
local DFS ordering.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">bag</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">taskId</span><span class="p">);</span>
<span class="nx">bag</span><span class="p">.</span><span class="nx">addBulk</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="p">,</span> <span class="nx">taskId</span><span class="p">);</span>
<span class="kd">var</span> <span class="p">(</span><span class="nx">hasElt</span><span class="p">,</span> <span class="nx">elt</span><span class="p">)</span> <span class="o">=</span> <span class="nx">bag</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">taskId</span><span class="p">)</span>
</pre></div>
</div>
<p>While the bag is safe to use in a distributed manner, each locale always operates
on its privatized instance. This means that it is easy to add data in bulk,
expecting it to be distributed, when in reality it is not; if another locale needs
data, it will steal work on-demand. Here is an example of concurrent operations
on distBag across multiple locales and tasks:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">coforall</span> <span class="nx">loc</span> <span class="kd">in</span> <span class="nx">Locales</span> <span class="k">do</span> <span class="k">on</span> <span class="nx">loc</span> <span class="p">{</span>
  <span class="k">coforall</span> <span class="nx">taskId</span> <span class="kd">in</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="nx">here</span><span class="p">.</span><span class="nx">maxTaskPar</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="p">(</span><span class="nx">hasElt</span><span class="p">,</span> <span class="nx">elt</span><span class="p">)</span> <span class="o">=</span> <span class="nx">bag</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">taskId</span><span class="p">);</span>
    <span class="k">if</span> <span class="nx">hasElt</span> <span class="p">{</span>
      <span class="nx">elt</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">bag</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">elt</span><span class="p">,</span> <span class="nx">taskId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally, distBag supports serial and parallel iteration, as well as a set of
global operations. Here is an example of a distributed parallel iteration and a
few global operations working with a <code class="docutils literal notranslate"><span class="pre">distBag</span></code>:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">forall</span> <span class="nx">elts</span> <span class="kd">in</span> <span class="nx">bag</span> <span class="k">do</span>
  <span class="nx">body</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">bag</span><span class="p">.</span><span class="nx">getSize</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">foundElt</span> <span class="o">=</span> <span class="nx">bag</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">elt</span><span class="p">);</span>
<span class="nx">bag</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h2>
<dl class="chpl data">
<dt class="sig sig-object chpl" id="DistributedBag.distributedBagInitialSegmentCap">
<em class="property"><span class="pre">config</span> <span class="pre">const</span> </em><span class="sig-name descname"><span class="pre">distributedBagInitialSegmentCap</span></span><em class="property"> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1024</span></em><a class="headerlink" href="#DistributedBag.distributedBagInitialSegmentCap" title="Link to this definition">¶</a></dt>
<dd><p>The initial capacity of each segment. When a segment is full, we double its
capacity.</p>
</dd></dl>

<dl class="chpl data">
<dt class="sig sig-object chpl" id="DistributedBag.distributedBagMaxSegmentCap">
<em class="property"><span class="pre">config</span> <span class="pre">const</span> </em><span class="sig-name descname"><span class="pre">distributedBagMaxSegmentCap</span></span><em class="property"> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1024</span> <span class="pre">*</span> <span class="pre">1024</span></em><a class="headerlink" href="#DistributedBag.distributedBagMaxSegmentCap" title="Link to this definition">¶</a></dt>
<dd><p>The maximum capacity of each segment. This is crucial to ensure memory usage
does not grow out of control.</p>
</dd></dl>

<dl class="chpl data">
<dt class="sig sig-object chpl" id="DistributedBag.distributedBagWorkStealingMinElts">
<em class="property"><span class="pre">config</span> <span class="pre">const</span> </em><span class="sig-name descname"><span class="pre">distributedBagWorkStealingMinElts</span></span><em class="property"> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#DistributedBag.distributedBagWorkStealingMinElts" title="Link to this definition">¶</a></dt>
<dd><p>The minimum number of elements a segment must have to become eligible to be
stolen from. This may be useful if some segments contain fewer elements than
others and should not be stolen from.</p>
</dd></dl>

<dl class="chpl record">
<dt class="sig sig-object chpl" id="DistributedBag.distBag">
<em class="property"><span class="pre">record</span> </em><span class="sig-name descname"><span class="pre">distBag</span></span><em class="property"> <span class="pre">:</span> <span class="pre">serializable</span></em><a class="headerlink" href="#DistributedBag.distBag" title="Link to this definition">¶</a></dt>
<dd><p>A parallel-safe distributed multi-pool implementation specialized for depth-first
search (DFS), that scales in terms of nodes, processors per node (PPN), and workload;
the more PPN, the more segments we allocate to increase raw parallelism, and the
larger the workload the better locality (see <a class="reference internal" href="#DistributedBag.distributedBagInitialSegmentCap" title="DistributedBag.distributedBagInitialSegmentCap"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">distributedBagInitialSegmentCap</span></code></a>).
This data structure is locally DFS ordered, encapsulates a dynamic work stealing
mechanism to balance work across nodes, and provides a means to obtain a privatized
instance of the data structure for maximized performance.</p>
<dl class="chpl attribute">
<dt class="sig sig-object chpl" id="DistributedBag.distBag.eltType">
<em class="property"><span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">eltType</span></span><a class="headerlink" href="#DistributedBag.distBag.eltType" title="Link to this definition">¶</a></dt>
<dd><p>The type of the elements contained in this distBag.</p>
</dd></dl>

<dl class="chpl attribute">
<dt class="sig sig-object chpl" id="DistributedBag.distBag._impl">
<em class="property"><span class="pre">var</span> </em><span class="sig-name descname"><span class="pre">_impl</span></span><em class="property"> <span class="pre">:</span> <span class="pre">unmanaged</span> <span class="pre">DistributedBagImpl(eltType)?</span></em><a class="headerlink" href="#DistributedBag.distBag._impl" title="Link to this definition">¶</a></dt>
<dd><p>The implementation of the Bag is forwarded. See <a class="reference internal" href="#DistributedBag.DistributedBagImpl" title="DistributedBag.DistributedBagImpl"><code class="xref chpl chpl-class docutils literal notranslate"><span class="pre">DistributedBagImpl</span></code></a> for
documentation.</p>
</dd></dl>

</dd></dl>

<dl class="chpl class">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">DistributedBagImpl</span></span><em class="property"> <span class="pre">:</span> <span class="pre">CollectionImpl(?)</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl" title="Link to this definition">¶</a></dt>
<dd><dl class="chpl attribute">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.targetLocales">
<em class="property"><span class="pre">var</span> </em><span class="sig-name descname"><span class="pre">targetLocales</span></span><em class="property"> <span class="pre">:</span> <span class="pre">[targetLocDom]</span> <span class="pre">locale</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.targetLocales" title="Link to this definition">¶</a></dt>
<dd><p>The locales to allocate bags for and load balance across. <code class="docutils literal notranslate"><span class="pre">targetLocDom</span></code>
represents the corresponding range of locales.</p>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.init">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">type</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">targetLocales:</span> <span class="pre">[?targetLocDom]</span> <span class="pre">locale</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span><a class="headerlink" href="#DistributedBag.DistributedBagImpl.init" title="Link to this definition">¶</a></dt>
<dd><p>Initialize an empty distBag.</p>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.add">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">elt:</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">taskId:</span> <span class="pre">int</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.add" title="Link to this definition">¶</a></dt>
<dd><p>Insert an element in segment <code class="docutils literal notranslate"><span class="pre">taskId</span></code>. The ordering is guaranteed to be
preserved. If <a class="reference internal" href="#DistributedBag.distributedBagMaxSegmentCap" title="DistributedBag.distributedBagMaxSegmentCap"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">distributedBagMaxSegmentCap</span></code></a> is reached, the insertion
fails and returns <cite>false</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elt</strong> : <cite>eltType</cite> – The element to insert.</p></li>
<li><p><strong>taskId</strong> : <cite>int</cite> – The index of the segment into which the element is inserted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><cite>true</cite> if <code class="docutils literal notranslate"><span class="pre">elt</span></code> is successfully inserted in segment <code class="docutils literal notranslate"><span class="pre">taskId</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>bool</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.addBulk">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">addBulk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">elts</span></em>, <em class="sig-param"><span class="pre">taskId:</span> <span class="pre">int</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.addBulk" title="Link to this definition">¶</a></dt>
<dd><p>Insert elements in bulk in segment <code class="docutils literal notranslate"><span class="pre">taskId</span></code>. If the bag instance rejects
an element (e.g., when <a class="reference internal" href="#DistributedBag.distributedBagMaxSegmentCap" title="DistributedBag.distributedBagMaxSegmentCap"><code class="xref chpl chpl-const docutils literal notranslate"><span class="pre">distributedBagMaxSegmentCap</span></code></a> is reached), we
cease to offer more. We return the number of elements successfully inserted.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elts</strong> – The elements to insert.</p></li>
<li><p><strong>taskId</strong> : <cite>int</cite> – The index of the segment into which the element is inserted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of elements successfully inserted in segment <code class="docutils literal notranslate"><span class="pre">taskId</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>int</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.remove">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">taskId:</span> <span class="pre">int</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">(bool,</span> <span class="pre">eltType)</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.remove" title="Link to this definition">¶</a></dt>
<dd><p>Remove an element from segment <code class="docutils literal notranslate"><span class="pre">taskId</span></code>. The order in which elements are
removed is guaranteed to be the same order they have been inserted. If this
bag instance is empty, it will attempt to steal elements from bags of other
nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>taskId</strong> : <cite>int</cite> – The index of the segment from which the element is removed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Depending on the scenarios: <cite>(true, elt)</cite> if we successfully removed
element <cite>elt</cite> from distBag; <cite>(false, defaultOf(eltType))</cite> otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>(bool, eltType)</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.getSize">
<em class="property"><span class="pre">override</span> <span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">getSize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.getSize" title="Link to this definition">¶</a></dt>
<dd><p>Obtain the number of elements held in this distBag.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The current number of elements contained in this distBag.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><cite>int</cite></p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is best-effort and can be non-deterministic for concurrent
updates across nodes, and may miss elements resulting from any concurrent
insertion or removal operations.</p>
</div>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.contains">
<em class="property"><span class="pre">override</span> <span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">contains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">elt:</span> <span class="pre">eltType</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.contains" title="Link to this definition">¶</a></dt>
<dd><p>Perform a lookup to determine if the requested element exists in this
distBag.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>elt</strong> : <cite>eltType</cite> – An element to search for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><cite>true</cite> if this distBag contains <code class="docutils literal notranslate"><span class="pre">elt</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>bool</cite></p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is best-effort and can be non-deterministic for concurrent
updates across nodes, and may miss elements resulting from any concurrent
insertion or removal operations.</p>
</div>
</dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.clear">
<em class="property"><span class="pre">override</span> <span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">void</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.clear" title="Link to this definition">¶</a></dt>
<dd><p>Clear this distBag.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is best-effort and can be non-deterministic for concurrent
updates across nodes, and may miss elements resulting from any concurrent
insertion or removal operations.</p>
</div>
</dd></dl>

<dl class="chpl itermethod">
<dt class="sig sig-object chpl" id="DistributedBag.DistributedBagImpl.these">
<em class="property"><span class="pre">override</span> <span class="pre">iter</span> </em><span class="sig-name descname"><span class="pre">these</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">eltType</span></em><a class="headerlink" href="#DistributedBag.DistributedBagImpl.these" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over the elements of this distBag. To avoid holding onto locks,
we take a snapshot approach, increasing memory consumption but also
increasing parallelism. This allows other concurrent, even mutating,
operations while iterating, but opens the possibility to iterating over
duplicates or missing elements from concurrent operations.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields<span class="colon">:</span></dt>
<dd class="field-odd"><p>A reference to one of the elements contained in this distBag.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Iteration takes a snapshot approach, and as such can easily result in a
Out-Of-Memory issue. If the data structure is large, the user is doubly
advised to use parallel iteration, for both performance and memory benefit.</p>
</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ConcurrentMap.html" class="btn btn-neutral float-left" title="ConcurrentMap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DistributedBagDeprecated.html" class="btn btn-neutral float-right" title="DistributedBagDeprecated" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>