<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Special Methods &mdash; Chapel Documentation 2.3</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c3c8ae58"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Generic Classes and Records" href="genericClasses.html" />
    <link rel="prev" title="Records" href="records.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.3
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.3";
$pagename = "primers/specialMethods";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Primers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#language-basics">Language Basics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="loops.html">Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="procedures.html">Procedures</a></li>
<li class="toctree-l3"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="records.html">Records</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Special Methods on Classes and Records</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#initializers-and-deinitializers">Initializers and Deinitializers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-this-accessor">The <code class="docutils literal notranslate"><span class="pre">this</span></code> Accessor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-iterators">Default Iterators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-hashing">Custom Hashing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#io-methods">IO Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operator-overloads">Operator Overloads</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="genericClasses.html">Generic Classes and Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuples.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="varargs.html">Variadic Arguments (var args)</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="nothingVariables.html">Nothing Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="errorHandling.html">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#iterators">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#task-parallelism">Task Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#locality">Locality</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#data-parallelism">Data Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#interoperability">Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#library-utilities">Library Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#numerical-libraries">Numerical Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tools">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#language-overview">Language Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Primers</a></li>
      <li class="breadcrumb-item active">Special Methods</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/primers/specialMethods.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="special-methods">
<span id="primers-specialmethods"></span><h1>Special Methods<a class="headerlink" href="#special-methods" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://github.com/chapel-lang/chapel/blob/main/test/release/examples/primers/specialMethods.chpl">View specialMethods.chpl on GitHub</a></p>
<p>This primer covers special methods for classes and records</p>
<p>Classes and records can have a handful of methods that are specially named
and treated differently than other methods.  These methods enable
operations such as initializing or deinitializing a class or record
instance, accessing a class or record as though it were an array,
iterating over an class or record, and defining the way a class or record
is read from or written to a channel.</p>
<p>Note that there are two ways to declare a method. Methods declared within
a class or record are called primary methods:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">ExampleRecord1</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">exampleField</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="k">proc</span> <span class="nf">primaryMethod</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Methods declared outside of a class or record are called secondary methods:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">ExampleRecord2</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">exampleField</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">proc</span> <span class="nf">ExampleRecord2.secondaryMethod</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<p>Methods declared outside of a class or record and outside of the scope where
the type is defined are called tertiary methods.  Tertiary methods follow the
same declaration syntax as secondary methods.</p>
<p>This primer will use the secondary method form, but all of the special
methods can also be written as primary methods.</p>
<p>First we will declare a simple record with a field that is a tuple of
integers.  We’ll add special methods and iterators to this record later.
To make the language recognize a special method, it’s necessary to implement
the corresponding interface. For the <code class="docutils literal notranslate"><span class="pre">hash</span></code> method we’ll see below, the
appropriate interface is <code class="docutils literal notranslate"><span class="pre">hashable</span></code>. We can mark <code class="docutils literal notranslate"><span class="pre">R</span></code> as implementing
<code class="docutils literal notranslate"><span class="pre">hashable</span></code> by including a <code class="docutils literal notranslate"><span class="pre">:</span> <span class="pre">hashable</span></code> after its name when we declare it.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">R</span> <span class="p">:</span> <span class="nx">hashable</span><span class="p">,</span> <span class="nx">writeSerializable</span><span class="p">,</span> <span class="nx">readDeserializable</span> <span class="p">{</span>
  <span class="kd">param</span> <span class="nx">size</span><span class="p">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">vals</span><span class="p">:</span> <span class="nx">size</span><span class="o">*</span><span class="kt">int</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="initializers-and-deinitializers">
<h2>Initializers and Deinitializers<a class="headerlink" href="#initializers-and-deinitializers" title="Link to this heading">¶</a></h2>
<p>An initializer named <code class="docutils literal notranslate"><span class="pre">init</span></code> is called when creating an instance of the
class or record, for example with the <code class="docutils literal notranslate"><span class="pre">new</span></code> keyword. An initializer
accepting zero arguments is called a <em>default initializer</em>.</p>
<p>A method named <code class="docutils literal notranslate"><span class="pre">init=</span></code> is called a <em>copy initializer</em> and accepts a
single argument.</p>
<p>If a method named <code class="docutils literal notranslate"><span class="pre">postinit</span></code> that accepts zero arguments exists for a
class or record type, it will automatically be called after the
initializer call completes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">deinit</span></code> method will deinitialize a record when it leaves scope,
or a class when <code class="docutils literal notranslate"><span class="pre">delete</span></code> is called on it. If the class or record
contained any unmanaged classes, open files, etc. this method would be
the place to delete them or otherwise clean them up. See the <a class="reference internal" href="records.html"><span class="doc">Records</span></a>
primer for more details on initializers and deinitializers.</p>
</section>
<section id="the-this-accessor">
<h2>The <code class="docutils literal notranslate"><span class="pre">this</span></code> Accessor<a class="headerlink" href="#the-this-accessor" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">this</span></code> method gives the record the ability to be accessed like an
array.  Here we use the argument as an index to choose a tuple element.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">ref</span> <span class="nx">R</span><span class="p">.</span><span class="k">this</span><span class="p">(</span><span class="nx">n</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">ref</span> <span class="p">{</span>
  <span class="k">if</span> <span class="o">!</span><span class="nx">vals</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="k">then</span>
    <span class="nx">halt</span><span class="p">(</span><span class="s">&quot;index out of bounds accessing R&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">vals</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>All functions and methods in Chapel can be called using either parenthesis
or square brackets. Here we’ll access the record by implicitly calling
the <code class="docutils literal notranslate"><span class="pre">this</span></code> method defined above.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">R</span><span class="p">();</span>

<span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">r</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">vals</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="default-iterators">
<h2>Default Iterators<a class="headerlink" href="#default-iterators" title="Link to this heading">¶</a></h2>
<p>An iterator named <code class="docutils literal notranslate"><span class="pre">these</span></code> that can accept zero arguments is automatically
called when a record or class instance is used in the iterator position
of a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">iter</span> <span class="nf">ref</span> <span class="nx">R</span><span class="p">.</span><span class="nx">these</span><span class="p">()</span> <span class="kd">ref</span> <span class="p">{</span>
  <span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="nx">vals</span><span class="p">.</span><span class="nx">indices</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="nx">vals</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span> <span class="nx">val</span> <span class="kd">in</span> <span class="nx">r</span> <span class="p">{</span>
  <span class="nx">val</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">vals</span><span class="p">);</span>
</pre></div>
</div>
<p>Classes and records can also define parallel iterators including
leader/follower iterator pairs and standalone parallel iterators. For
more information on parallel iterators, see the <a class="reference internal" href="parIters.html"><span class="doc">Parallel Iterators</span></a> primer.</p>
</section>
<section id="custom-hashing">
<h2>Custom Hashing<a class="headerlink" href="#custom-hashing" title="Link to this heading">¶</a></h2>
<p>By default, the compiler will define a hash method for any record
that does not define its own <code class="docutils literal notranslate"><span class="pre">==</span></code> or <code class="docutils literal notranslate"><span class="pre">!=</span></code> overloads.  This
permits such records to be used as the indices of associative
domains, the values in a <a class="reference internal" href="../modules/standard/Set.html#module-Set" title="Set: This module contains the implementation of Chapel's standard 'set' type."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">Set</span></code></a>, or the keys in a <a class="reference internal" href="../modules/standard/Map.html#module-Map" title="Map: Provides Chapel's standard ``map`` type for key-value storage."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">Map</span></code></a>.
Users can override this default by supplying their own hash method
that returns a <code class="docutils literal notranslate"><span class="pre">uint</span></code> or <code class="docutils literal notranslate"><span class="pre">int</span></code> value.  For example:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Map</span><span class="p">;</span>

<span class="k">proc</span> <span class="nf">R.hash</span><span class="p">():</span> <span class="kt">uint</span> <span class="p">{</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;In custom hash function&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="kt">uint</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now that the record R has a <code class="docutils literal notranslate"><span class="pre">hash</span></code> method defined, Chapel’s,
<code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, and associative domain types will call this
custom <code class="docutils literal notranslate"><span class="pre">hash</span></code> instead of the compiler-generated method.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">map</span><span class="p">(</span><span class="nx">R</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">myD</span><span class="p">:</span> <span class="k">domain</span><span class="p">(</span><span class="nx">R</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">myR</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">R</span><span class="p">();</span>

<span class="nx">myMap</span><span class="p">[</span><span class="nx">myR</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nx">myD</span> <span class="o">+=</span> <span class="nx">myR</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="io-methods">
<h2>IO Methods<a class="headerlink" href="#io-methods" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">serialize</span></code> method defines how to write an instance of R to a
channel. We’ll write the <code class="docutils literal notranslate"><span class="pre">vals</span></code> tuple between asterisks. See section
<a class="reference internal" href="../modules/standard/IO.html#serialize-deserialize"><span class="std std-ref">The ‘serialize’ and ‘deserialize’ Methods</span></a> for more information  on the <code class="docutils literal notranslate"><span class="pre">serialize</span></code> and
<code class="docutils literal notranslate"><span class="pre">deserialize</span></code> methods.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">IO</span><span class="p">;</span> <span class="c1">// required for file operations</span>

<span class="kd">config</span> <span class="kd">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="s">&quot;tempfile.txt&quot;</span><span class="p">;</span>

<span class="k">proc</span> <span class="nf">R.serialize</span><span class="p">(</span><span class="nx">writer</span><span class="p">:</span> <span class="nx">fileWriter</span><span class="p">(?),</span>
                 <span class="kd">ref</span> <span class="nx">serializer</span><span class="p">:</span> <span class="nx">writer</span><span class="p">.</span><span class="nx">serializerType</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
  <span class="nx">writer</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="nx">vals</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">{</span>
  <span class="c1">// Open the fileWriter in a new block so that deinitializers</span>
  <span class="c1">// will close it at the end of the block</span>
  <span class="kd">var</span> <span class="nx">fw</span> <span class="o">=</span> <span class="nx">openWriter</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
  <span class="nx">fw</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">deserialize</span></code> method defines how to read an instance of R from a
channel. We’ll read the <code class="docutils literal notranslate"><span class="pre">vals</span></code> tuple between asterisks like how it
was written above.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">ref</span> <span class="nx">R</span><span class="p">.</span><span class="nx">deserialize</span><span class="p">(</span><span class="nx">reader</span><span class="p">:</span> <span class="nx">fileReader</span><span class="p">(?),</span>
                       <span class="kd">ref</span> <span class="nx">deserializer</span><span class="p">:</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">deserializerType</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
  <span class="nx">reader</span><span class="p">.</span><span class="nx">readLiteral</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
  <span class="nx">reader</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">vals</span><span class="p">);</span>
  <span class="nx">reader</span><span class="p">.</span><span class="nx">readLiteral</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fr</span> <span class="o">=</span> <span class="nx">openReader</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">R</span><span class="p">();</span>
  <span class="nx">fr</span><span class="p">.</span><span class="nx">readln</span><span class="p">(</span><span class="nx">r2</span><span class="p">);</span>
  <span class="nx">assert</span><span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="nx">r2</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fw</span> <span class="o">=</span> <span class="nx">openWriter</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
  <span class="nx">fw</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
  <span class="nx">fw</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>

  <span class="nx">writeln</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">R</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">fr</span> <span class="o">=</span> <span class="nx">openReader</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
  <span class="nx">fr</span><span class="p">.</span><span class="nx">readln</span><span class="p">(</span><span class="nx">r2</span><span class="p">);</span>
  <span class="nx">assert</span><span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="nx">r2</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Clean up the temporary file we created earlier.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="k">use</span> <span class="nx">FileSystem</span><span class="p">;</span>
  <span class="k">if</span> <span class="nx">exists</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span> <span class="k">then</span>
    <span class="nx">remove</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="operator-overloads">
<h2>Operator Overloads<a class="headerlink" href="#operator-overloads" title="Link to this heading">¶</a></h2>
<p>Operators can be overloaded for record types to support
assignment (<code class="docutils literal notranslate"><span class="pre">=</span></code>), comparisons, (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>,
<code class="docutils literal notranslate"><span class="pre">!=</span></code>), and other general operators (<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, …).
These are declared as regular functions using the <code class="docutils literal notranslate"><span class="pre">operator</span></code> keyword.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="records.html" class="btn btn-neutral float-left" title="Records" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="genericClasses.html" class="btn btn-neutral float-right" title="Generic Classes and Records" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>