<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building and Running &mdash; Chapel Documentation 1.28</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Building Larger Packages" href="buildinglargerpackages.html" />
    <link rel="prev" title="Basic Usage" href="basicusage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.28
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.28";
$pagename = "mason-packages/guide/buildingandrunning";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builtins/index.html">Built-in Types and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Mason Packages (WIP)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#getting-started-with-mason">Getting Started with Mason</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#mason-guide">Mason Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basicusage.html">Basic Usage</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Building and Running</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildinglargerpackages.html">Building Larger Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="runtimearguments.html">Runtime/Compilation Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="testing.html">Testing your Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">Creating and Running Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="documentation.html">Documenting a Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="chapeldependencies.html">Using Chapel Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="gitdependencies.html">Specifying Dependencies from <cite>git</cite> Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="externaldependencies.html">Using Non-Chapel Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="masonregistry.html">Mason-Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="masonregistry.html#local-registries">Local Registries</a></li>
<li class="toctree-l3"><a class="reference internal" href="submitting.html">Submit a Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="submitting.html#semantic-versioning">Semantic Versioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="submitting.html#incompatible-version-resolution-strategy">Incompatible Version Resolution Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="manifestfile.html">The Manifest File</a></li>
<li class="toctree-l3"><a class="reference internal" href="manifestfile.html#the-lock-file">The Lock File</a></li>
<li class="toctree-l3"><a class="reference internal" href="environmentvariables.html">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="namespacing.html">Namespacing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Mason Packages (WIP)</a> &raquo;</li>
      <li>Building and Running</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/mason-packages/guide/buildingandrunning.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="building-and-running">
<span id="id1"></span><h1>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h1>
<p>When invoked, <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">build</span> <span class="pre">[</span> <span class="pre">options</span> <span class="pre">]</span></code> will do the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Run update to make sure any manual manifest edits are reflected in the dependency code.</p></li>
<li><p>Build <code class="docutils literal notranslate"><span class="pre">MyPackage.chpl</span></code> in the <code class="docutils literal notranslate"><span class="pre">src/</span></code> directory.</p></li>
<li><p>All packages are compiled into binaries and placed into <code class="docutils literal notranslate"><span class="pre">target/</span></code></p></li>
<li><dl class="simple">
<dt>To forward options to the Chapel compiler(<code class="docutils literal notranslate"><span class="pre">chpl</span></code>), seperate them with a double dash</dt><dd><ul>
<li><p>e.g., mason build –force – –savec tmpdir</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">run</span> <span class="pre">[</span> <span class="pre">options</span> <span class="pre">]</span></code> will, in turn:</p>
<blockquote>
<div><ul class="simple">
<li><p>Run the executable built above out of <code class="docutils literal notranslate"><span class="pre">target/</span></code>, if it exists.</p></li>
<li><p>All options not recognized by <code class="docutils literal notranslate"><span class="pre">mason</span></code> will be forwarded to the executable.</p></li>
</ul>
</div></blockquote>
<p>For example, after <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">run</span> <span class="pre">--build</span> <span class="pre">[</span> <span class="pre">options</span> <span class="pre">]</span></code>, the package directory appears as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MyPackage/
 │
 ├── Mason.lock
 ├── Mason.toml
 ├── example/
 ├── src/
 │   └── myPackage.chpl
 ├── target/
 │   ├── debug/
 │   │   └── myPackage
 │   ├── example/
 │   └── test/
 └── test/
</pre></div>
</div>
<p>As you can see, new files have been added to the package, the first of which
is the <code class="docutils literal notranslate"><span class="pre">Mason.lock</span></code>. You can think of this file as a snapshot of a single
run of the program. This file “locks” in the settings in which the program
was built upon invocation of <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">build</span></code>. This file can be generated manually
with the <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">update</span></code> command. <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">update</span></code> will read the <code class="docutils literal notranslate"><span class="pre">Mason.toml</span></code>,
resolve dependencies, and generate the <code class="docutils literal notranslate"><span class="pre">Mason.lock</span></code> based on it’s contents.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">target/</span></code> directory is where Mason stores all the binaries related to your package.
These could be binaries for the main source code as well as examples and tests. There are two types of
targets for building. The default location of a package binary is <code class="docutils literal notranslate"><span class="pre">target/debug/</span></code>, as shown in the
example above. However, if a final version of an application or library is
being produced, the <code class="docutils literal notranslate"><span class="pre">--release</span></code> flag can be thrown as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mason build --release --force

OR

mason run --build --release --force
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--release</span></code> option adds the <code class="docutils literal notranslate"><span class="pre">--fast</span></code> argument to the compilation step.</p>
<p>The argument <code class="docutils literal notranslate"><span class="pre">--force</span></code> is included as Mason will only build the package if
the package has been modified. Throwing the <code class="docutils literal notranslate"><span class="pre">--release</span></code> flag will result in
the following package structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MyPackage/
 │
 ├── Mason.lock
 ├── Mason.toml
 ├── example/
 ├── src/
 │   └── myPackage.chpl
 ├── target/
 │   ├── debug/
 │   │   └── myPackage
 │   ├── example/
 │   ├── release/
 │   │   └── myPackage
 │   └── test/
 └── test/
</pre></div>
</div>
<p>As you can see there are now two binaries of <code class="docutils literal notranslate"><span class="pre">MyPackage</span></code>, one under <code class="docutils literal notranslate"><span class="pre">debug/</span></code> and
one under <code class="docutils literal notranslate"><span class="pre">release</span></code>.  To remove the <code class="docutils literal notranslate"><span class="pre">target/</span></code> directory along with all of the binaries
for your package, use the <code class="docutils literal notranslate"><span class="pre">mason</span> <span class="pre">clean</span></code> command.</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="basicusage.html" class="btn btn-neutral float-left" title="Basic Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="buildinglargerpackages.html" class="btn btn-neutral float-right" title="Building Larger Packages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>