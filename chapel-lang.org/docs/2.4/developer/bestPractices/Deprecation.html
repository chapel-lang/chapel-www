<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chapel’s Deprecation Policy &mdash; Chapel Documentation 2.4</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=4d935f96"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Unstable Features" href="Unstable.html" />
    <link rel="prev" title="Sanitizers" href="Sanitizers.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.4
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.4";
$pagename = "developer/bestPractices/Deprecation";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Docs for Contributors</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Best Practices for Contributors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="ContributorInfo.html">Contributor Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="DCO.html">Getting started with Chapel and the Developer Certificate of Origin (DCO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CompilerDebugging.html">Tips On Debugging The Compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="CompilerIRTricks.html">Examining/Debugging Compiler IR</a></li>
<li class="toctree-l3"><a class="reference internal" href="ErrorWarningMessaging.html">How To Generate Warnings And Error Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="RuntimeLibrary.html">The Chapel Runtime Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="GeneratedCode.html">All About Compiler-Generated Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="GASNetOnDesktops.html">Running Chapel Programs with GASNet on your Desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="git.html">Git tips for Chapel developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHPL_DEVELOPER.html">The CHPL_DEVELOPER environment variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="TestSystem.html">Chapel Testing System</a></li>
<li class="toctree-l3"><a class="reference internal" href="SpellChecking.html">chplspell</a></li>
<li class="toctree-l3"><a class="reference internal" href="Valgrind.html">Valgrind</a></li>
<li class="toctree-l3"><a class="reference internal" href="Sanitizers.html">Sanitizers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Chapel’s Deprecation Policy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Unstable.html">Unstable Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="NightlyTesting.html">Nightly Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="StandardModuleStyle.html">Standard Module Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="TestAnnotationsLocally.html">How to test ANNOTATIONS.yaml changes locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildingdocs.html">Building Chapel Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Potpourri.html">Miscellaneous Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../compiler-internals/index.html">Frontend Library API Docs</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Docs for Contributors</a></li>
          <li class="breadcrumb-item"><a href="index.html">Best Practices for Contributors</a></li>
      <li class="breadcrumb-item active">Chapel’s Deprecation Policy</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developer/bestPractices/Deprecation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="chapel-s-deprecation-policy">
<span id="best-practices-deprecation"></span><h1>Chapel’s Deprecation Policy<a class="headerlink" href="#chapel-s-deprecation-policy" title="Link to this heading">¶</a></h1>
<p>When removing a feature in Chapel, the feature is to be deprecated and
supported for at least 1 release cycle.</p>
<p>Major feature removals can be supported for more than 1 release cycle.</p>
<p>Non-public interface features can be removed or modified without deprecation.</p>
<p>This is the deprecation process:</p>
<ol class="arabic simple">
<li><p>Provide a warning or error message when a deprecated feature is used. This
may be in the module code, compiler, or runtime, and can be emitted at
compile-time or runtime.</p></li>
</ol>
<p>The deprecation message uses the following format:</p>
<p><code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">is</span> <span class="pre">deprecated</span> <span class="pre">-</span> <span class="pre">please</span> <span class="pre">use</span> <span class="pre">bar</span></code></p>
<p>For compile-time messaging you can use <code class="docutils literal notranslate"><span class="pre">compilerWarning()</span></code> to do this, but
when deprecating symbols the <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> attribute often works better because
it can be applied to any symbol in a uniform way.  Look in the test/deprecated
and test/deprecated-keyword directories for many examples.</p>
<p>Currently, the <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> attribute optionally takes a string literal,
which is used for the deprecated symbol’s documentation and compiler warning
message. If there is also a documentation comment applied to the symbol that
comment will take precedence when producing documentation.</p>
<p>When we produce a compiler warning we filter it to remove any inline markup.
This means if your deprecation message points to the preferred feature using
syntax like this: <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">is</span> <span class="pre">deprecated</span> <span class="pre">-</span> <span class="pre">please</span> <span class="pre">use</span> <span class="pre">:proc:`bar`</span></code>, then in the
generated documentation “bar” will link to the documentation for the “bar”
procedure, and when producing the compiler warning the “:proc:” syntax and
backticks will be filtered out.</p>
<ol class="arabic simple" start="2">
<li><p>Update the deprecated feature documentation to state that it is deprecated
and point to the preferred feature.</p></li>
</ol>
<p>For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Foo module short description.

<span class="p">..</span> <span class="ow">warning</span><span class="p">::</span>

    This module has been deprecated - please use <span class="na">:mod:</span><span class="nv">`bar`</span> instead.

Foo module long description.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step is not necessary when using the <code class="docutils literal notranslate"><span class="pre">&#64;deprecated</span></code> attribute to
generate the documentation.</p>
</div>
<ol class="arabic simple" start="3">
<li><p>Search for error messages that refer to the deprecated feature.
If appropriate, update them to refer to the new feature.</p></li>
<li><p>Add a deprecation test to <code class="docutils literal notranslate"><span class="pre">test/deprecated/</span></code> to:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>confirm the deprecation warning works as intended</p></li>
<li><p>remind us to to remove the deprecated feature in the following release</p></li>
</ul>
</div></blockquote>
<p>Optionally include deprecation timeline in comments of deprecation test:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="c1">// Deprecated in Chapel 1.14, to be removed in Chapel 1.15</span>
</pre></div>
</div>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>The following section contains some examples of how to deprecate symbols in
unusual situations.</p>
<section id="changing-a-function-s-return-type">
<h3>Changing A Function’s Return Type<a class="headerlink" href="#changing-a-function-s-return-type" title="Link to this heading">¶</a></h3>
<p>When nothing about a function except its return type needs to change, it can
be tricky for a user to opt in to the new behavior.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">@</span><span class="nd">deprecated</span><span class="p">(</span><span class="s">&quot;foo returning &#39;int&#39; is deprecated&quot;</span><span class="p">)</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">():</span> <span class="kt">int</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>

<span class="c1">// As written, this replacement would conflict with the original, how can a</span>
<span class="c1">// user call it?</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">():</span> <span class="kt">bool</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>
</pre></div>
</div>
<p>In this situation, we recommend adding a <code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">param</span></code> and a <code class="docutils literal notranslate"><span class="pre">where</span></code> clause
that responds to it to the deprecated function and its replacement:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="c1">// The default state should result in the deprecated behavior, so users can</span>
<span class="c1">// adjust their code at their leisure</span>
<span class="kd">config</span> <span class="kd">param</span> <span class="nx">fooReturnsBool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// The deprecation message should alert the user to the new flag</span>
<span class="k">@</span><span class="nd">deprecated</span><span class="p">(</span><span class="s">&quot;foo returning &#39;int&#39; is deprecated, please compile with &#39;-sfooReturnsBool=true&#39; to get the new return type&quot;</span><span class="p">)</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">():</span> <span class="kt">int</span> <span class="k">where</span> <span class="o">!</span><span class="nx">fooReturnsBool</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>

<span class="c1">// The new function should also use a &#39;where&#39; clause to opt in to the new</span>
<span class="c1">// behavior</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">():</span> <span class="kt">bool</span> <span class="k">where</span> <span class="nx">fooReturnsBool</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>
</pre></div>
</div>
<p>When the deprecated function is removed, the flag should also be deprecated (and
removed from the new function to avoid generating noise for the user):</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">@</span><span class="nd">deprecated</span><span class="p">(</span><span class="s">&quot;&#39;fooReturnsBool&#39; is deprecated and no longer has an effect&quot;</span><span class="p">)</span>
<span class="kd">config</span> <span class="kd">param</span> <span class="nx">fooReturnsBool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// The old version has been removed, and the flag is no longer needed, so</span>
<span class="c1">// the new function can be in its final state.</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">():</span> <span class="kt">bool</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>
</pre></div>
</div>
<p>There is a drawback with this approach - config params are not adjustable during
the lifetime of a program, so updates must be made all at once before they can
be tested by the user.  So, if you can think of a better solution, please
suggest it and we will update this example!</p>
</section>
<section id="changing-a-function-s-argument-name">
<h3>Changing A Function’s Argument Name<a class="headerlink" href="#changing-a-function-s-argument-name" title="Link to this heading">¶</a></h3>
<p>When only the name of a function argument needs to change and not its type, a
new overload will encounter conflicts when a user relies solely on positional
ordering:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">@</span><span class="nd">deprecated</span><span class="p">(</span><span class="s">&quot;argument name &#39;a&#39; is deprecated, use &#39;b&#39; instead&quot;</span><span class="p">)</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>

<span class="k">proc</span> <span class="nf">foo</span><span class="p">(</span><span class="nx">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>

<span class="o">..</span><span class="p">.</span>

<span class="c1">// This will obviously use the deprecated version</span>
<span class="nx">foo</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span>
<span class="c1">// And this will obviously use the new version</span>
<span class="nx">foo</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span>
<span class="c1">// But which overload will this call?  The compiler can&#39;t choose between them</span>
<span class="nx">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</pre></div>
</div>
<p>In this case, we still want to generate warnings when the old argument name is
used, but we want positional ordering to work without indicating anything has
changed.  To accomplish this, mark the deprecated version with <code class="docutils literal notranslate"><span class="pre">pragma</span> <span class="pre">&quot;last</span>
<span class="pre">resort&quot;</span></code> - this will avoid conflicts in the positional ordering case while
still keeping the old argument name available to generate the deprecation
warning:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">pragma</span> <span class="s">&quot;last resort&quot;</span>
<span class="k">@</span><span class="nd">deprecated</span><span class="p">(</span><span class="s">&quot;argument name &#39;a&#39; is deprecated, use &#39;b&#39; instead&quot;</span><span class="p">)</span>
<span class="k">proc</span> <span class="nf">foo</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">foo</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// Call function with new argument name</span>
<span class="p">}</span>

<span class="k">proc</span> <span class="nf">foo</span><span class="p">(</span><span class="nx">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>

<span class="o">..</span><span class="p">.</span>

<span class="c1">// The behavior of these two calls is unchanged</span>
<span class="nx">foo</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span>
<span class="nx">foo</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span>
<span class="c1">// Now this will call the new version without conflict</span>
<span class="nx">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="replacing-a-field">
<h3>Replacing A Field<a class="headerlink" href="#replacing-a-field" title="Link to this heading">¶</a></h3>
<p>While the obvious strategy for replacing a field would be to add an additional
one with the new name, following this strategy can lead to a number of problems.
Maintaining both the old field and the new field impacts the memory footprint of
the type in which it lives.  In the case of <code class="docutils literal notranslate"><span class="pre">param</span></code> and <code class="docutils literal notranslate"><span class="pre">type</span></code> fields, it
can also lead to difficulties storing old and new versions in the same data
structure or break explicit declarations of the enclosing type.  It can make
default initializers no longer compatible with the original uses, requiring the
addition of explicit initializers.  Additionally, keeping the old and new fields
in sync with each other to maintain behavior and enable incremental replacement
is burdensome and might trigger deprecation warnings the user can’t resolve
themselves.</p>
<p>With all of that in mind, the ideal strategy for replacing a renamed field with
another one is to make the old field into a paren-less method.  For instance:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="kd">type</span> <span class="nx">oldName</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>can be transformed into:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="kd">type</span> <span class="nx">newName</span><span class="p">;</span>

  <span class="k">proc</span> <span class="nf">oldName</span> <span class="kd">type</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newName</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When replacing var fields, remember that fields are capable of being explicitly
set outside of the contents of the type.  Thus, the paren-less method should
use the <code class="docutils literal notranslate"><span class="pre">ref</span></code> return intent so that users are still able to update the field
using the old name:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">newName</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>

  <span class="k">proc</span> <span class="nf">oldName</span> <span class="kd">ref</span><span class="p">:</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newName</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">oldName</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// Should warn, but still function</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">newName</span><span class="p">);</span> <span class="c1">// Should be 33</span>
</pre></div>
</div>
<p>While this strategy enables positional initialization calls to continue to work
without adjustment, it does still break named initialization calls, e.g <code class="docutils literal notranslate"><span class="pre">new</span>
<span class="pre">Foo(oldName=30)</span></code>.  The only solution for this is to add an initializer overload
with the old name that will generate a deprecation warning.  However, without
support for opting in to maintaining the default initializer (which is planned
but not currently implemented), this will also require the addition of an
equivalent replacement for the default initializer, which is a burden.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">newName</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>

  <span class="k">proc</span> <span class="nf">oldName</span> <span class="kd">ref</span><span class="p">:</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">newName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">pragma</span> <span class="s">&quot;last resort&quot;</span>
  <span class="k">@</span><span class="nd">deprecated</span><span class="p">(</span><span class="s">&quot;&#39;new Foo(oldName=val)&#39; is deprecated, please use &#39;new Foo(newName=val)&#39; or &#39;new Foo(val)&#39; instead&quot;</span><span class="p">)</span>
  <span class="k">proc</span> <span class="nf">init</span><span class="p">(</span><span class="nx">oldName</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newName</span> <span class="o">=</span> <span class="nx">oldName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Required because previous initializer prevented the generation of the</span>
  <span class="c1">// default initializer</span>
  <span class="c1">// Could also write `newName: int = 0` to avoid writing two initializers</span>
  <span class="k">proc</span> <span class="nf">init</span><span class="p">(</span><span class="nx">newName</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newName</span> <span class="o">=</span> <span class="nx">newName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Required because first initializer prevented the generation of the</span>
  <span class="c1">// default initializer</span>
  <span class="c1">// Relies on omitted field initialization</span>
  <span class="k">proc</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="nx">oldName</span><span class="o">=</span><span class="mi">30</span><span class="p">);</span> <span class="c1">// Now warns</span>
<span class="kd">var</span> <span class="nx">f2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="nx">newName</span><span class="o">=</span><span class="mi">30</span><span class="p">);</span> <span class="c1">// Still works without warning</span>
<span class="kd">var</span> <span class="nx">f3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span> <span class="c1">// Still works without warning</span>
<span class="kd">var</span> <span class="nx">f4</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">();</span> <span class="c1">// Still works without warning</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Sanitizers.html" class="btn btn-neutral float-left" title="Sanitizers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Unstable.html" class="btn btn-neutral float-right" title="Unstable Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>