<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CompressedSparseLayout &mdash; Chapel Documentation 2.4</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=4d935f96"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="LayoutCS" href="LayoutCS.html" />
    <link rel="prev" title="Standard Layouts and Distributions" href="../layoutdist.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.4
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.4";
$pagename = "modules/layouts/CompressedSparseLayout";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../layoutdist.html#standard-layouts">Standard Layouts</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">CompressedSparseLayout</a></li>
<li class="toctree-l3"><a class="reference internal" href="LayoutCS.html">LayoutCS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../layoutdist.html#standard-distributions">Standard Distributions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../layoutdist.html">Standard Layouts and Distributions</a></li>
      <li class="breadcrumb-item active">CompressedSparseLayout</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/modules/layouts/CompressedSparseLayout.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compressedsparselayout">
<span id="module-CompressedSparseLayout"></span><h1>CompressedSparseLayout<a class="headerlink" href="#compressedsparselayout" title="Link to this heading">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CompressedSparseLayout</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">CompressedSparseLayout</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>‘CompressedSparseLayout’ is unstable and may change in the future</p>
</div>
<p>This module supports Compressed Sparse Row/Column (CSR/CSC) memory
layouts for sparse domains and the arrays declared over them.  It
does this via a pair of records, <a class="reference internal" href="#CompressedSparseLayout.csrLayout" title="CompressedSparseLayout.csrLayout"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">csrLayout</span></code></a> and
<a class="reference internal" href="#CompressedSparseLayout.cscLayout" title="CompressedSparseLayout.cscLayout"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">cscLayout</span></code></a>, which correspond to the CSR and CSC approaches,
respectively.  These two records are duals of one another, where the
CSR format supports efficient iteration over rows while the CSC
format is better for column-wise traversals.</p>
<p>A sparse domain can be declared using these layouts using syntax
like the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CompressedSparseLayout</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">D</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="nx">m</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">},</span>  <span class="c1">// a dense domain defining a bounding box</span>
      <span class="nx">CSRDomain</span><span class="p">:</span> <span class="k">sparse</span> <span class="k">subdomain</span><span class="p">(</span><span class="nx">D</span><span class="p">)</span> <span class="k">dmapped</span> <span class="k">new</span> <span class="nx">csrLayout</span><span class="p">()</span> <span class="o">=</span> <span class="o">..</span><span class="p">.;</span>

<span class="kd">var</span> <span class="nx">CSRArray</span><span class="p">:</span> <span class="p">[</span><span class="nx">CSRDomain</span><span class="p">]</span> <span class="kt">real</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>In addition to the standard methods and operators defined on sparse
domains and arrays in Chapel, these layouts also support the
following methods:</p>
<ul class="simple">
<li><p>Domains and arrays support <code class="docutils literal notranslate"><span class="pre">.rows()/.cols()</span></code> queries, which
return a <code class="docutils literal notranslate"><span class="pre">range</span></code> value representing the indices of the rows or
columns over which the domain is defined.  Note that some of these
rows or columns may be empty in practice.</p></li>
<li><p>CSR/CSC arrays support <code class="docutils literal notranslate"><span class="pre">.colsAndVals(row)</span></code>/<code class="docutils literal notranslate"><span class="pre">.rowsAndVals(col)</span></code>
iterators, which take a given row/column index as input and yield
2-tuples corresponding the column/row index and value at that
index, respectively.  Note that CSR only supports
<code class="docutils literal notranslate"><span class="pre">.colsAndVals()</span></code> and CSC only supports <code class="docutils literal notranslate"><span class="pre">.rowsAndVals()</span></code>.</p></li>
</ul>
<dl class="chpl data">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.csLayoutSortByDefault">
<em class="property"><span class="pre">config</span> <span class="pre">param</span> </em><span class="sig-name descname"><span class="pre">csLayoutSortByDefault</span></span><span class="w"> </span><em class="property"> <span class="pre">=</span> <span class="pre">true</span></em><a class="headerlink" href="#CompressedSparseLayout.csLayoutSortByDefault" title="Link to this definition">¶</a></dt>
<dd><p>Indicates whether the indices within a row/column of a CSR/CSC
layout should be sorted by default or not.  Note that this default
can be overridden on a per-instance basis using the
<code class="docutils literal notranslate"><span class="pre">sortedIndices</span></code> initializer arguments below.</p>
</dd></dl>

<dl class="chpl record">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.csrLayout">
<em class="property"><span class="pre">record</span> </em><span class="sig-name descname"><span class="pre">csrLayout</span></span><a class="headerlink" href="#CompressedSparseLayout.csrLayout" title="Link to this definition">¶</a></dt>
<dd><p>This record implements a 2D compressed sparse row layout (CSR, for
short).</p>
<p>Each domain declared over this layout represents its sparse index
set using an <code class="docutils literal notranslate"><span class="pre">.size</span></code>-element vector to store the column indices
and a ~#rows-element vector indicating the offset where each row
starts.  The <code class="docutils literal notranslate"><span class="pre">sortedIndices</span></code> argument in the initializer
indicates whether the column indices within each row are stored in
sorted order or not.</p>
<p>Arrays declared over such domains store their elements
corresponding to the domain’s indices using a dense
<code class="docutils literal notranslate"><span class="pre">.size</span></code>-element vector.</p>
<p>As a result of this storage format, CSR domains and arrays support
efficient iteration over rows, but not over columns.</p>
<dl class="chpl attribute">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.csrLayout.sortedIndices">
<em class="property"><span class="pre">param</span> </em><span class="sig-name descname"><span class="pre">sortedIndices</span></span><em class="property"> <span class="pre">:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">csLayoutSortByDefault</span></em><a class="headerlink" href="#CompressedSparseLayout.csrLayout.sortedIndices" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.csrLayout.init">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">param</span> <span class="pre">sortedIndices:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">csLayoutSortByDefault</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CompressedSparseLayout.csrLayout.init" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="chpl record">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.cscLayout">
<em class="property"><span class="pre">record</span> </em><span class="sig-name descname"><span class="pre">cscLayout</span></span><a class="headerlink" href="#CompressedSparseLayout.cscLayout" title="Link to this definition">¶</a></dt>
<dd><p>This record implements a 2D compressed sparse column layout (CSC,
for short).  It is the dual of the <a class="reference internal" href="#CompressedSparseLayout.csrLayout" title="CompressedSparseLayout.csrLayout"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">csrLayout</span></code></a> layout
above, simply swapping rows and columns in its representation and
operators.  As a result, it effectively stores its arrays’ values
in column-major order, supporting efficient iteration over rows,
but not over columns.</p>
<dl class="chpl attribute">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.cscLayout.sortedIndices">
<em class="property"><span class="pre">param</span> </em><span class="sig-name descname"><span class="pre">sortedIndices</span></span><em class="property"> <span class="pre">:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">csLayoutSortByDefault</span></em><a class="headerlink" href="#CompressedSparseLayout.cscLayout.sortedIndices" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="chpl method">
<dt class="sig sig-object chpl" id="CompressedSparseLayout.cscLayout.init">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">param</span> <span class="pre">sortedIndices:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">csLayoutSortByDefault</span></em><span class="sig-paren">)</span><a class="headerlink" href="#CompressedSparseLayout.cscLayout.init" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../layoutdist.html" class="btn btn-neutral float-left" title="Standard Layouts and Distributions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="LayoutCS.html" class="btn btn-neutral float-right" title="LayoutCS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>