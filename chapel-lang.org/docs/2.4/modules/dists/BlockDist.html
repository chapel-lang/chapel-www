<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BlockDist &mdash; Chapel Documentation 2.4</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=4d935f96"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CyclicDist" href="CyclicDist.html" />
    <link rel="prev" title="BlockCycDist" href="BlockCycDist.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.4
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.4";
$pagename = "modules/dists/BlockDist";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layoutdist.html#standard-layouts">Standard Layouts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../layoutdist.html#standard-distributions">Standard Distributions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="BlockCycDist.html">BlockCycDist</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">BlockDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="CyclicDist.html">CyclicDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="DimensionalDist2D.html">DimensionalDist2D</a></li>
<li class="toctree-l3"><a class="reference internal" href="HashedDist.html">HashedDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="PrivateDist.html">PrivateDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="ReplicatedDist.html">ReplicatedDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="StencilDist.html">StencilDist</a></li>
<li class="toctree-l3"><a class="reference internal" href="dims/BlockCycDim.html">BlockCycDim</a></li>
<li class="toctree-l3"><a class="reference internal" href="dims/BlockDim.html">BlockDim</a></li>
<li class="toctree-l3"><a class="reference internal" href="dims/ReplicatedDim.html">ReplicatedDim</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../layoutdist.html">Standard Layouts and Distributions</a></li>
      <li class="breadcrumb-item active">BlockDist</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/modules/dists/BlockDist.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="blockdist">
<span id="module-BlockDist"></span><h1>BlockDist<a class="headerlink" href="#blockdist" title="Link to this heading">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">BlockDist</span><span class="p">;</span>
</pre></div>
</div>
<dl class="chpl record">
<dt class="sig sig-object chpl" id="BlockDist.blockDist">
<em class="property"><span class="pre">record</span> </em><span class="sig-name descname"><span class="pre">blockDist</span></span><em class="property"> <span class="pre">:</span> <span class="pre">writeSerializable</span></em><a class="headerlink" href="#BlockDist.blockDist" title="Link to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> distribution partitions the indices specified by a
<code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> domain into contiguous blocks, mapping each block to a
distinct locale in a <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> array.  The indices within the
bounding box are partitioned as evenly as possible across the target
locales.  An index outside the bounding box is mapped to the same
locale as the nearest index within the bounding box.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> distribution was, until recently, a class named
<code class="docutils literal notranslate"><span class="pre">Block</span></code>.  Today, <code class="docutils literal notranslate"><span class="pre">Block</span></code> is still supported in a deprecated
form, yet is an alias to the <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> record here.  In our
experience, most uses of <code class="docutils literal notranslate"><span class="pre">Block</span></code> in distribution contexts should
continue to work, but updating to <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> is requested going
forward due to the deprecation.</p>
</div>
<p>More precisely, an index <code class="docutils literal notranslate"><span class="pre">idx</span></code> is mapped to
<code class="docutils literal notranslate"><span class="pre">targetLocales[locIdx]</span></code>, where <code class="docutils literal notranslate"><span class="pre">locIdx</span></code> is computed as follows.</p>
<p>In the 1-dimensional case, for a <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> distribution with:</p>
<blockquote>
<div><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">boundingBox</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{low..high}</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">targetLocales</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[0..n-1]</span> <span class="pre">locale</span></code></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">locIdx</span></code> is computed from <code class="docutils literal notranslate"><span class="pre">idx</span></code> as follows:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>if <code class="docutils literal notranslate"><span class="pre">idx</span></code> is …</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">locIdx</span></code> is …</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">&lt;=</span> <span class="pre">idx</span> <span class="pre">&lt;=</span> <span class="pre">high</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">floor((idx-low)*N</span> <span class="pre">/</span> <span class="pre">(high-low+1))</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">idx</span> <span class="pre">&lt;</span> <span class="pre">low</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">high</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">n-1</span></code></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>In the multidimensional case, <code class="docutils literal notranslate"><span class="pre">idx</span></code> and <code class="docutils literal notranslate"><span class="pre">locIdx</span></code> are tuples
of indices; <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> and <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> are multi-dimensional;
and the above computation is applied in each dimension.</p>
<p><strong>Example</strong></p>
<p>The following code declares a domain <code class="docutils literal notranslate"><span class="pre">D</span></code> distributed over a
<code class="docutils literal notranslate"><span class="pre">blockDist</span></code> distribution with a bounding box and index set equal to
the non-distributed domain <code class="docutils literal notranslate"><span class="pre">Space</span></code>.  It then declares an array <code class="docutils literal notranslate"><span class="pre">A</span></code>
over that domain.  The <cite>forall</cite> loop sets each array element to the ID
of the locale to which it is mapped.</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Space</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">Dist</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">blockDist</span><span class="p">(</span><span class="nx">boundingBox</span><span class="o">=</span><span class="nx">Space</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">D</span> <span class="o">=</span> <span class="nx">Dist</span><span class="p">.</span><span class="nx">createDomain</span><span class="p">(</span><span class="nx">Space</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">A</span><span class="p">:</span> <span class="p">[</span><span class="nx">D</span><span class="p">]</span> <span class="kt">int</span><span class="p">;</span>

<span class="k">forall</span> <span class="nx">a</span> <span class="kd">in</span> <span class="nx">A</span> <span class="k">do</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="nx">here</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>

<span class="nx">writeln</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>When run on 6 locales, the output is:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>
<span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Data-Parallel Iteration</strong></p>
<p>As demonstrated by the above example, a <cite>forall</cite> loop over a
<code class="docutils literal notranslate"><span class="pre">blockDist</span></code>-distributed domain or array executes each iteration on
the locale owning the index in question.</p>
<p>By default, parallelism within each locale is applied to that locale’s
block of indices by creating a task for each available processor core
(or the number of local indices if it is less than the number of
cores). The local domain indices are then statically divided as evenly
as possible between those tasks.</p>
<p><strong>Initializer Arguments</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> initializer is defined as follows:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">blockDist.init</span><span class="p">(</span>
  <span class="nx">boundingBox</span><span class="p">:</span> <span class="k">domain</span><span class="p">(?),</span>
  <span class="nx">targetLocales</span><span class="p">:</span> <span class="p">[]</span> <span class="kt">locale</span>  <span class="o">=</span> <span class="nx">Locales</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The arguments <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> (a domain) and <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> (an array)
define the mapping of any index of <code class="docutils literal notranslate"><span class="pre">idxType</span></code> type to a locale
as described above.</p>
<p>The rank of <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> must match the rank of the distribution,
or be <code class="docutils literal notranslate"><span class="pre">1</span></code>.  If the rank of <code class="docutils literal notranslate"><span class="pre">targetLocales</span></code> is <code class="docutils literal notranslate"><span class="pre">1</span></code>, a greedy
heuristic is used to reshape the array of target locales so that it
matches the rank of the distribution and each dimension contains an
approximately equal number of indices.</p>
<p><strong>Convenience Factory Methods</strong></p>
<p>It is common for a <code class="docutils literal notranslate"><span class="pre">blockDist</span></code>-distributed domain or array to be
declared using the same indices for both its <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> and its
index set (as in the example using <code class="docutils literal notranslate"><span class="pre">Space</span></code> above).  It is also
common to not override any of the other defaulted initializer
arguments.  In such cases, factory methods can be used for
convenience and to avoid repetition.</p>
<p>These methods take a domain or series of ranges as arguments and
return a new block-distributed domain or array.  For example, the
following declarations create new <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">x</span> <span class="pre">5</span></code> block-distributed domains
and arrays using <code class="docutils literal notranslate"><span class="pre">{1..5,</span> <span class="pre">1..5}</span></code> as both the bounding box and index
set:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">BlockDom1</span> <span class="o">=</span> <span class="nx">blockDist</span><span class="p">.</span><span class="nx">createDomain</span><span class="p">({</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">BlockDom2</span> <span class="o">=</span> <span class="nx">blockDist</span><span class="p">.</span><span class="nx">createDomain</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">BlockArr1</span> <span class="o">=</span> <span class="nx">blockDist</span><span class="p">.</span><span class="nx">createArray</span><span class="p">({</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">},</span> <span class="kt">real</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">BlockArr2</span> <span class="o">=</span> <span class="nx">blockDist</span><span class="p">.</span><span class="nx">createArray</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="p">,</span> <span class="kt">real</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The helper methods on <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> have the following signatures:</p>
<blockquote>
<div><dl class="chpl function">
<dt class="sig sig-object chpl" id="BlockDist.blockDist.createDomain">
<em class="property"><span class="pre">proc</span> <span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">createDomain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dom:</span> <span class="pre">domain</span></em>, <em class="sig-param"><span class="pre">targetLocales</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span><a class="headerlink" href="#BlockDist.blockDist.createDomain" title="Link to this definition">¶</a></dt>
<dd><p>Create a block-distributed domain. The provided domain is used as the
<code class="docutils literal notranslate"><span class="pre">boundingBox</span></code>.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl">
<em class="property"><span class="pre">proc</span> <span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">createDomain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">rng:</span> <span class="pre">range(?)...</span></em>, <em class="sig-param"><span class="pre">targetLocales</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a block-distributed domain from a series of ranges. The ranges
are also used to construct the <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code>.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="BlockDist.blockDist.createArray">
<em class="property"><span class="pre">proc</span> <span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">createArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dom:</span> <span class="pre">domain</span></em>, <em class="sig-param"><span class="pre">type</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">targetLocales</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span><a class="headerlink" href="#BlockDist.blockDist.createArray" title="Link to this definition">¶</a></dt>
<dd><p>Create a default-initialized block-distributed array whose indices
match those of the given domain.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl">
<em class="property"><span class="pre">proc</span> <span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">createArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">rng:</span> <span class="pre">range(?)...</span></em>, <em class="sig-param"><span class="pre">type</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">targetLocales</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a default-initialized block-distributed array using a
domain constructed from the series of ranges.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl">
<em class="property"><span class="pre">proc</span> <span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">createArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dom:</span> <span class="pre">domain</span></em>, <em class="sig-param"><span class="pre">type</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">initExpr</span></em>, <em class="sig-param"><span class="pre">targetLocales</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a block-distributed array whose indices match those of the
given domain.</p>
<p>The array’s values are initialized using <code class="docutils literal notranslate"><span class="pre">initExpr</span></code> which can be any of
the following:</p>
<ul class="simple">
<li><p>a value coercible to <code class="docutils literal notranslate"><span class="pre">eltType</span></code> — all elements of the array will be
assigned with this value</p></li>
<li><p>an iterator expression with compatible size and type — the array elements
will be initialized with the values yielded by the iterator</p></li>
<li><p>an array of compatible size and type — the array will be assigned into
the distributed array</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">blockDist.createArray</span></code> with an <code class="docutils literal notranslate"><span class="pre">initExpr</span></code> formal is unstable and may change in a future release</p>
</div>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl">
<em class="property"><span class="pre">proc</span> <span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">createArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">rng:</span> <span class="pre">range(?)...</span></em>, <em class="sig-param"><span class="pre">type</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">initExpr</span></em>, <em class="sig-param"><span class="pre">targetLocales</span> <span class="pre">=</span> <span class="pre">Locales</span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a block-distributed array using a domain constructed from
the series of ranges.</p>
<p>The array’s values are initialized using <code class="docutils literal notranslate"><span class="pre">initExpr</span></code> which can be any of
the following:</p>
<ul class="simple">
<li><p>a value coercible to <code class="docutils literal notranslate"><span class="pre">eltType</span></code> — all elements of the array will be
assigned with this value</p></li>
<li><p>an iterator expression with compatible size and type — the array elements
will be initialized with the values yielded by the iterator</p></li>
<li><p>an array of compatible size and type — the array will be assigned into
the distributed array</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">blockDist.createArray</span></code> with an <code class="docutils literal notranslate"><span class="pre">initExpr</span></code> formal is unstable and may change in a future release</p>
</div>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">createDomain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dom:</span> <span class="pre">domain(?)</span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a block-distributed domain over an existing <code class="docutils literal notranslate"><span class="pre">blockDist</span></code> by copying
the index space from the passed domain.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">createDomain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">rng:</span> <span class="pre">range(?)...</span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a block-distributed domain from a series of ranges over an existing
<code class="docutils literal notranslate"><span class="pre">blockDist</span></code>.</p>
</dd></dl>

</div></blockquote>
<p><strong>Sparse Subdomains</strong></p>
<p>When a <code class="docutils literal notranslate"><span class="pre">sparse</span> <span class="pre">subdomain</span></code> is created from a block-distributed
domain, the resulting sparse domain will share the same block
distribution across locales.  The sparse layout used in this sparse
subdomain can be controlled with the <code class="docutils literal notranslate"><span class="pre">sparseLayoutType</span></code> initializer
argument to <code class="docutils literal notranslate"><span class="pre">blockDist</span></code>.</p>
<p>The following example demonstrates a block-distributed sparse domain
and array:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span> <span class="k">use</span> <span class="nx">BlockDist</span><span class="p">;</span>

 <span class="kd">const</span> <span class="nx">Space</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">8</span><span class="p">};</span>

 <span class="c1">// Declare a dense, blockDist-distributed domain.</span>
 <span class="kd">const</span> <span class="nx">DenseDom</span> <span class="o">=</span> <span class="nx">blockDist</span><span class="p">.</span><span class="nx">createDomain</span><span class="p">(</span><span class="nx">Space</span><span class="p">);</span>

 <span class="c1">// Declare a sparse subdomain.</span>
 <span class="c1">// Since DenseDom is blockDist-distributed, SparseDom will be as well.</span>
 <span class="kd">var</span> <span class="nx">SparseDom</span><span class="p">:</span> <span class="k">sparse</span> <span class="k">subdomain</span><span class="p">(</span><span class="nx">DenseDom</span><span class="p">);</span>

 <span class="c1">// Add some elements to the sparse subdomain.</span>
 <span class="c1">// SparseDom.bulkAdd is another way to do this that allows more control.</span>
 <span class="nx">SparseDom</span> <span class="o">+=</span> <span class="p">[</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="p">];</span>

 <span class="c1">// Declare a sparse array.</span>
 <span class="c1">// This array is also blockDist-distributed.</span>
 <span class="kd">var</span> <span class="nx">A</span><span class="p">:</span> <span class="p">[</span><span class="nx">SparseDom</span><span class="p">]</span> <span class="kt">int</span><span class="p">;</span>

 <span class="nx">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

 <span class="nx">writeln</span><span class="p">(</span> <span class="s">&quot;A[(1, 1)] = &quot;</span><span class="p">,</span> <span class="nx">A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span>
 <span class="k">for</span> <span class="p">(</span><span class="nx">ij</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span> <span class="kd">in</span> <span class="k">zip</span><span class="p">(</span><span class="nx">SparseDom</span><span class="p">,</span> <span class="nx">A</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">writeln</span><span class="p">(</span> <span class="s">&quot;A[&quot;</span><span class="p">,</span> <span class="nx">ij</span><span class="p">,</span> <span class="s">&quot;] = &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="s">&quot; on locale &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">.</span><span class="kt">locale</span><span class="p">);</span>
 <span class="p">}</span>

<span class="c1">// Results in this output when run on 4 locales:</span>
<span class="c1">// A[(1, 1)] = 0</span>
<span class="c1">// A[(1, 2)] = 1 on locale LOCALE0</span>
<span class="c1">// A[(3, 6)] = 1 on locale LOCALE1</span>
<span class="c1">// A[(5, 4)] = 1 on locale LOCALE2</span>
<span class="c1">// A[(7, 8)] = 1 on locale LOCALE3</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="BlockCycDist.html" class="btn btn-neutral float-left" title="BlockCycDist" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="CyclicDist.html" class="btn btn-neutral float-right" title="CyclicDist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>