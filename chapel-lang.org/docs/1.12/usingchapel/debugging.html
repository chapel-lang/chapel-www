

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Debugging Chapel Programs &mdash; Chapel Documentation 1.12 1.12.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  

  
    <link rel="top" title="Chapel Documentation 1.12 1.12.0 documentation" href="../index.html"/>
        <link rel="up" title="Using Chapel" href="index.html"/>
        <link rel="next" title="Reporting Chapel Bugs" href="bugs.html"/>
        <link rel="prev" title="Chapel Tasks" href="tasks.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> Chapel Documentation</a>
        
        
<?php   // Variables given by sphinx 
   $chplTitle = "1.12";   $pagename = "./usingchapel/debugging";   include "../versionButton.php";   ?>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Quickstart Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="README.html#quick-start-instructions">Quick Start Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="README.html#what-s-next">What&#8217;s next?</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using Chapel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="building.html">Building Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Debugging Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="bugs.html">Reporting Chapel Bugs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../platforms/cray.html">Using Chapel on Cray Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/cygwin.html">Using Chapel on Cygwin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/ibm.html">Using Chapel on IBM Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/knc.html">Using Chapel on Intel Xeon Phi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/macosx.html">Using Chapel on Mac OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/marenostrum.html">Using Chapel on MareNostrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/sgi.html">Using Chapel on SGI Altix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/builtins.html">Built-in Types and Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/Atomics.html">Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelArray.html">Domain and Array Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelComplex_forDocs.html">Complex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelIO.html">IO Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelIteratorSupport.html">Vectorizing Iterator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelLocale.html">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelRange.html">Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelSyncvar.html">Synchronization Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelTuple.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/UtilMisc_forDocs.html">Misc Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standardlibrary.html">Standard Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/distributions.html">Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/layouts.html">Layouts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../technotes/allocators.html">Chapel&#8217;s Use of Allocators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/atomics.html">Runtime Support for Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/auxIO.html">Auxiliary I/O Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/chpl-ipe.html">Interactive Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/chpldoc.html">Documenting Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/dsi.html">Domain Map Standard Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/extern.html">C Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/firstClassFns.html">First-class Functions in Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/libraries.html">Exporting Chapel as a Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/llvm.html">LLVM Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/local.html">The &#8216;local&#8217; Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/localeModels.html">Locale Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/main.html">Support for main() Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/module_search.html">Module Search Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/reduceIntents.html">Reduce Intents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/sets.html">Associative Set Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/subquery.html">Querying a Local Subdomain</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/chplvis/index.html">chplvis</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Chapel Documentation 1.12</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Using Chapel</a> &raquo;</li>
      
    <li>Debugging Chapel Programs</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/usingchapel/debugging.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="debugging-chapel-programs">
<span id="readme-debugging"></span><h1><a class="toc-backref" href="#id1">Debugging Chapel Programs</a><a class="headerlink" href="#debugging-chapel-programs" title="Permalink to this headline">Â¶</a></h1>
<p>This document discusses support for debugging your Chapel program and a set of
experimental flags and configuration constants to enable task monitoring and
memory tracking.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#debugging-chapel-programs" id="id1">Debugging Chapel Programs</a><ul>
<li><a class="reference internal" href="#running-in-gdb" id="id2">Running in gdb</a></li>
<li><a class="reference internal" href="#flags-for-tracking-tasks" id="id3">Flags for Tracking Tasks</a></li>
<li><a class="reference internal" href="#configuration-constants-for-tracking-memory" id="id4">Configuration Constants for Tracking Memory</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="running-in-gdb">
<h2><a class="toc-backref" href="#id2">Running in gdb</a><a class="headerlink" href="#running-in-gdb" title="Permalink to this headline">Â¶</a></h2>
<p>The compiler-generated executable has a <tt class="docutils literal"><span class="pre">--gdb</span></tt> flag that can be used
to launch the program within a <tt class="docutils literal"><span class="pre">gdb</span></tt> session.  For best results, make
sure that your program has been compiled using the chpl compiler&#8217;s
<tt class="docutils literal"><span class="pre">-g</span></tt> flag.  With <tt class="docutils literal"><span class="pre">CHPL_COMM=gasnet</span></tt>, launching <tt class="docutils literal"><span class="pre">gdb</span></tt> is supported
via the environment variable <tt class="docutils literal"><span class="pre">CHPL_COMM_USE_GDB</span></tt>.  This will open up a
separate xterm running <tt class="docutils literal"><span class="pre">gdb</span></tt> for each locale.  Note that we only know
this to work for the <tt class="docutils literal"><span class="pre">amudprun</span></tt> launcher.</p>
<p>The utility of this feature depends greatly on your familiarity with
the Chapel generated code.  However, if your program is crashing or
running into a runtime error, you can often determine where that is
taking place by looking at a stack trace within <tt class="docutils literal"><span class="pre">gdb</span></tt>.</p>
<p>When debugging Chapel, it is useful to know that in generating its code,
the Chapel compiler renames user identifiers.  By default, the Chapel
compiler munges all user identifiers, such that a variable named <tt class="docutils literal"><span class="pre">x</span></tt>
would be code generated as <tt class="docutils literal"><span class="pre">x_chpl</span></tt>.  This munging can be controlled
using the <tt class="docutils literal"><span class="pre">--[no-]munge-user-idents</span></tt> flag (see the <tt class="docutils literal"><span class="pre">chpl</span></tt> man page
for more information).  In some cases, additional munging may be
required or applied that cannot be turned off.</p>
<p>The net effect of this is that Chapel variables can often be inspected
using <tt class="docutils literal"><span class="pre">p</span></tt> <em>name</em><tt class="docutils literal"><span class="pre">_chpl</span></tt> (or <tt class="docutils literal"><span class="pre">p</span></tt> <em>name</em><tt class="docutils literal"><span class="pre">_chpl&lt;TAB&gt;</span></tt> in cases
where the compiler has further renamed the variable).  If the
<tt class="docutils literal"><span class="pre">--no-munge-user-idents</span></tt> flag is used, <tt class="docutils literal"><span class="pre">p</span></tt> <em>name</em> or
<tt class="docutils literal"><span class="pre">p</span></tt> <em>name</em><tt class="docutils literal"><span class="pre">&lt;TAB&gt;</span></tt> should work in most cases.</p>
<p>Over time, we plan to improve our ability to debug the generated C
code for a Chapel program.  If you find yourself debugging the
generated code a lot and need help or have requests for better
support, please let us know so that we can prioritize accordingly.</p>
</div>
<div class="section" id="flags-for-tracking-tasks">
<h2><a class="toc-backref" href="#id3">Flags for Tracking Tasks</a><a class="headerlink" href="#flags-for-tracking-tasks" title="Permalink to this headline">Â¶</a></h2>
<p>For certain tasking layers, Chapel supports a few experimental
capabilities for tracking the status of tasks, primarily designed for
use in a single-locale execution.  To enable this capability, your
program must be compiled with the <tt class="docutils literal"><span class="pre">--task-tracking</span></tt> flag.  These flags
add a fair amount of runtime overhead to task-parallel programs. The
flags are as follows:</p>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-b</span>, <span class="option">--blockreport</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>When <tt class="docutils literal"><span class="pre">&lt;CTRL-C&gt;</span></tt> is entered during a program
executing under this flag, it will display a list
of where tasks are blocked on a synchronization
variable.  Running with this flag will also cause
the executable to attempt to automatically detect
deadlock for single-locale executions.  This is
only supported with <tt class="docutils literal"><span class="pre">CHPL_TASKS=qthreads</span></tt> or
<tt class="docutils literal"><span class="pre">CHPL_TASKS=fifo</span></tt>.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-t</span>, <span class="option">--taskreport</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>When <tt class="docutils literal"><span class="pre">&lt;CTRL-C&gt;</span></tt> is entered during a program
executing under this flag, a list of pending and
executing tasks will be printed to the console,
giving an indication of which tasks are at which
source locations.  This is only supported with
<tt class="docutils literal"><span class="pre">CHPL_TASKS=fifo</span></tt>.</td></tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="configuration-constants-for-tracking-memory">
<h2><a class="toc-backref" href="#id4">Configuration Constants for Tracking Memory</a><a class="headerlink" href="#configuration-constants-for-tracking-memory" title="Permalink to this headline">Â¶</a></h2>
<p>Chapel supports a number of configuration constants related to dynamic
memory allocation for the compiler-generated executable, currently
designed for use primarily by the development team to track memory
usage in tests.  Please note that our generated code currently
contains memory leaks, so you should not be surprised if your program
requires more memory than it seems it should.</p>
<p>For full information on these configuration constants consult
<a class="reference internal" href="../modules/standard/Memory.html#module-Memory" title="Memory: The :mod:`Memory` module provides procedures which report information"><tt class="xref chpl chpl-mod docutils literal"><span class="pre">Memory</span></tt></a>.</p>
<p>A brief synopsis of these configuration constants is as follows:</p>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--memTrack</span></kbd></td>
<td>turn on memory tracking and enable reporting</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--memStats</span></kbd></td>
<td>call <tt class="docutils literal"><span class="pre">printMemAllocStats()</span></tt> on normal termination</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--memLeaksByType</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>call <tt class="docutils literal"><span class="pre">printMemAllocsByType()</span></tt> on normal termination</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--memLeaks</span></kbd></td>
<td>call <tt class="docutils literal"><span class="pre">printMemAllocs()</span></tt> on normal termination</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--memMax=<var>int</var></span></kbd></td>
<td>set maximum level of allocatable memory</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--memThreshold=<var>int</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>set minimum threshold for memory tracking</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--memLog=<var>string</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>file to contain all memory reporting</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--memLeaksLog=<var>string</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>if set, append final stats and leaks-by-type here</td></tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bugs.html" class="btn btn-neutral float-right" title="Reporting Chapel Bugs">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tasks.html" class="btn btn-neutral" title="Chapel Tasks"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Cray Inc.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.12.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

</body>
</html>
