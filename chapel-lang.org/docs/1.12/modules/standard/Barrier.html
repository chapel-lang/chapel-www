

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Module: Barrier &mdash; Chapel Documentation 1.12 1.12.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  

  
    <link rel="top" title="Chapel Documentation 1.12 1.12.0 documentation" href="../../index.html"/>
        <link rel="up" title="Modules" href="../modules.html"/>
        <link rel="next" title="Module: BitOps" href="BitOps.html"/>
        <link rel="prev" title="Module: Assert" href="Assert.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> Chapel Documentation</a>
        
        
<?php   // Variables given by sphinx 
   $chplTitle = "1.12";   $pagename = "./modules/standard/Barrier";   include "../../versionButton.php";   ?>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/README.html">Quickstart Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/README.html#quick-start-instructions">Quick Start Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/README.html#what-s-next">What&#8217;s next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/building.html">Building Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/debugging.html">Debugging Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usingchapel/bugs.html">Reporting Chapel Bugs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/cray.html">Using Chapel on Cray Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/cygwin.html">Using Chapel on Cygwin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/ibm.html">Using Chapel on IBM Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/knc.html">Using Chapel on Intel Xeon Phi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/macosx.html">Using Chapel on Mac OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/marenostrum.html">Using Chapel on MareNostrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platforms/sgi.html">Using Chapel on SGI Altix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../builtins.html">Built-in Types and Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../internal/Atomics.html">Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelArray.html">Domain and Array Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelComplex_forDocs.html">Complex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelIO.html">IO Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelIteratorSupport.html">Vectorizing Iterator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelLocale.html">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelRange.html">Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelSyncvar.html">Synchronization Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/ChapelTuple.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal/UtilMisc_forDocs.html">Misc Functions</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../standardlibrary.html">Standard Library</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../distributions.html">Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layouts.html">Layouts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/allocators.html">Chapel&#8217;s Use of Allocators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/atomics.html">Runtime Support for Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/auxIO.html">Auxiliary I/O Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/chpl-ipe.html">Interactive Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/chpldoc.html">Documenting Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/dsi.html">Domain Map Standard Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/extern.html">C Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/firstClassFns.html">First-class Functions in Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/libraries.html">Exporting Chapel as a Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/llvm.html">LLVM Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/local.html">The &#8216;local&#8217; Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/localeModels.html">Locale Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/main.html">Support for main() Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/module_search.html">Module Search Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/reduceIntents.html">Reduce Intents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/sets.html">Associative Set Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../technotes/subquery.html">Querying a Local Subdomain</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/chplvis/index.html">chplvis</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Chapel Documentation 1.12</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../standardlibrary.html">Standard Library</a> &raquo;</li>
      
          <li><a href="../modules.html">Modules</a> &raquo;</li>
      
    <li>Module: Barrier</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/modules/standard/Barrier.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <span class="target" id="module-Barrier"></span><div class="section" id="module-barrier">
<h1>Module: Barrier<a class="headerlink" href="#module-barrier" title="Permalink to this headline">¶</a></h1>
<p>Support for task barriers.</p>
<p>The Barrier type provided in this module can be used to prevent tasks
from proceeding until all other related tasks have also reached the
barrier.</p>
<p>In the following example, all of the tasks created by the coforall loop
will print their &#8220;entering the barrier&#8221; messages in an unspecified order,
then all of the tasks will print their &#8220;past the barrier&#8221; messages, also
in an unspecified order.  Because of the barrier, all of the
&#8220;entering the barrier&#8221; messages will be printed before any of the
&#8220;past the barrier&#8221; messages.</p>
<div class="highlight-python"><div class="highlight"><pre>use Barrier;

config const numTasks = here.maxTaskPar;
var b = new Barrier(numTasks);

coforall tid in 1..numTasks {
  writeln(&quot;Task &quot;, tid, &quot; is entering the barrier&quot;);
  b.barrier();
  writeln(&quot;Task &quot;, tid, &quot; is past the barrier&quot;);
}

delete b;
</pre></div>
</div>
<div class="section" id="future-direction">
<h2>Future direction<a class="headerlink" href="#future-direction" title="Permalink to this headline">¶</a></h2>
<p>In the future, we expect to add more language-level support for a
&#8220;task-team&#8221; concept.  A task-team will more directly support collective
operations such as barriers between the tasks within a team.</p>
<p>The Barrier type is currently implemented as a class, requiring it to be
explicitly deleted before it goes out of scope.  It is expected that this
type will be changed into a record allowing it to be automatically
reclaimed.  When this change happens, code that uses this Barrier will need
to have the explicit deletes removed, but should require no other changes.</p>
<p>The current implementation is designed for correctness, but is not expected
to perform well at scale.  We expect performance at scale to improve as
this barrier implementation is optimized and as the task-team concept is
implemented and optimized.</p>
<dl class="enum">
<dt id="Barrier.BarrierType">
<em class="property">enum </em><tt class="descname">BarrierType</tt> { Atomic, Sync }<a class="headerlink" href="#Barrier.BarrierType" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration of the different barrier implementations.  Used to choose
the implementation to use when constructing a new barrier object.</p>
<ul class="simple">
<li><cite>BarrierType.Atomic</cite> uses Chapel atomic variables to control the barrier.</li>
<li><cite>BarrierType.Sync</cite> uses Chapel sync variables to control the barrier.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="Barrier.Barrier">
<em class="property">class </em><tt class="descname">Barrier</tt><a class="headerlink" href="#Barrier.Barrier" title="Permalink to this definition">¶</a></dt>
<dd><p>A barrier that will cause <cite>numTasks</cite> to wait before proceeding.</p>
<dl class="method">
<dt id="Barrier.Barrier.Barrier">
<em class="property">proc </em><tt class="descname">Barrier</tt><big>(</big><em>numTasks: int</em>, <em>barrierType: BarrierType = BarrierType.Atomic</em>, <em>reusable: bool = barrierType==BarrierType.Atomic</em><big>)</big><a class="headerlink" href="#Barrier.Barrier.Barrier" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new barrier object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>numTasks</strong> &#8211; The number of tasks that will use this barrier</li>
<li><strong>barrierType</strong> &#8211; The barrier implementation to use</li>
<li><strong>reusable</strong> &#8211; Incur some extra overhead to allow reuse of this barrier?</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Barrier.Barrier.barrier">
<em class="property">proc </em><tt class="descname">barrier</tt><big>(</big><big>)</big><a class="headerlink" href="#Barrier.Barrier.barrier" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until all related tasks have called this method.  If <cite>reusable</cite>
is true, reset the barrier to be used again.</p>
</dd></dl>

<dl class="method">
<dt id="Barrier.Barrier.notify">
<em class="property">proc </em><tt class="descname">notify</tt><big>(</big><big>)</big><a class="headerlink" href="#Barrier.Barrier.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify the barrier that this task has reached this point.</p>
</dd></dl>

<dl class="method">
<dt id="Barrier.Barrier.wait">
<em class="property">proc </em><tt class="descname">wait</tt><big>(</big><big>)</big><a class="headerlink" href="#Barrier.Barrier.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until <cite>n</cite> tasks have called <a class="reference internal" href="#Barrier.Barrier.notify" title="Barrier.Barrier.notify"><tt class="xref chpl chpl-proc docutils literal"><span class="pre">notify</span></tt></a>.  If <cite>reusable</cite> is true,
reset the barrier to be used again.  Note: if <cite>reusable</cite> is true
<a class="reference internal" href="#Barrier.Barrier.wait" title="Barrier.Barrier.wait"><tt class="xref chpl chpl-proc docutils literal"><span class="pre">wait</span></tt></a> will block until <cite>n</cite> tasks have called it after calling
<a class="reference internal" href="#Barrier.Barrier.notify" title="Barrier.Barrier.notify"><tt class="xref chpl chpl-proc docutils literal"><span class="pre">notify</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="Barrier.Barrier.try">
<em class="property">proc </em><tt class="descname">try</tt><big>(</big><big>)</big>: bool<a class="headerlink" href="#Barrier.Barrier.try" title="Permalink to this definition">¶</a></dt>
<dd><p>return <cite>true</cite> if <cite>n</cite> tasks have called <a class="reference internal" href="#Barrier.Barrier.notify" title="Barrier.Barrier.notify"><tt class="xref chpl chpl-proc docutils literal"><span class="pre">notify</span></tt></a></p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="BitOps.html" class="btn btn-neutral float-right" title="Module: BitOps">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Assert.html" class="btn btn-neutral" title="Module: Assert"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Cray Inc.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.12.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

</body>
</html>
