

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Chapel on MareNostrum &mdash; Chapel Documentation 1.12 1.12.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  

  
    <link rel="top" title="Chapel Documentation 1.12 1.12.0 documentation" href="../index.html"/>
        <link rel="up" title="Platform-Specific Notes" href="index.html"/>
        <link rel="next" title="Using Chapel on SGI Altix" href="sgi.html"/>
        <link rel="prev" title="Using Chapel on Mac OS X" href="macosx.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> Chapel Documentation</a>
        
        
<?php   // Variables given by sphinx 
   $chplTitle = "1.12";   $pagename = "./platforms/marenostrum";   include "../versionButton.php";   ?>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/README.html">Quickstart Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/README.html#quick-start-instructions">Quick Start Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/README.html#what-s-next">What&#8217;s next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/building.html">Building Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/debugging.html">Debugging Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usingchapel/bugs.html">Reporting Chapel Bugs</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Platform-Specific Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cray.html">Using Chapel on Cray Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="cygwin.html">Using Chapel on Cygwin</a></li>
<li class="toctree-l2"><a class="reference internal" href="ibm.html">Using Chapel on IBM Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="knc.html">Using Chapel on Intel Xeon Phi</a></li>
<li class="toctree-l2"><a class="reference internal" href="macosx.html">Using Chapel on Mac OS X</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Using Chapel on MareNostrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="sgi.html">Using Chapel on SGI Altix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/builtins.html">Built-in Types and Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/Atomics.html">Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelArray.html">Domain and Array Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelComplex_forDocs.html">Complex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelIO.html">IO Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelIteratorSupport.html">Vectorizing Iterator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelLocale.html">Locales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelRange.html">Ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelSyncvar.html">Synchronization Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/ChapelTuple.html">Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/internal/UtilMisc_forDocs.html">Misc Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standardlibrary.html">Standard Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/distributions.html">Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/layouts.html">Layouts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../technotes/allocators.html">Chapel&#8217;s Use of Allocators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/atomics.html">Runtime Support for Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/auxIO.html">Auxiliary I/O Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/chpl-ipe.html">Interactive Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/chpldoc.html">Documenting Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/dsi.html">Domain Map Standard Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/extern.html">C Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/firstClassFns.html">First-class Functions in Chapel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/libraries.html">Exporting Chapel as a Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/llvm.html">LLVM Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/local.html">The &#8216;local&#8217; Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/localeModels.html">Locale Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/main.html">Support for main() Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/module_search.html">Module Search Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/reduceIntents.html">Reduce Intents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/sets.html">Associative Set Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../technotes/subquery.html">Querying a Local Subdomain</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/chplvis/index.html">chplvis</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Chapel Documentation 1.12</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Platform-Specific Notes</a> &raquo;</li>
      
    <li>Using Chapel on MareNostrum</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/platforms/marenostrum.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="using-chapel-on-marenostrum">
<span id="readme-marenostrum"></span><h1>Using Chapel on MareNostrum<a class="headerlink" href="#using-chapel-on-marenostrum" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">We have not used Chapel on MareNostrum in several years.  It is
likely the information presented here is stale or outdated.  If
you are interested in using Chapel on MareNostrum, please let us
know.</p>
</div>
<p>The following information describes how to build and use Chapel on
Barcelona Supercomputing Center&#8217;s MareNostrum machine for users who
have an account there.  If you are not familiar with Chapel, it is
recommended that you first try the <a class="reference internal" href="../usingchapel/README.html#chapelhome-quickstart"><em>Quick Start Instructions</em></a>
to get started with the language.</p>
<ol class="arabic">
<li><p class="first">Set <tt class="docutils literal"><span class="pre">CHPL_HOME</span></tt> to point to the directory of your installation as
usual.  For example:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">export </span><span class="nv">CHPL_HOME</span><span class="o">=</span>~/chapel-x.y.z/chapel
</pre></div>
</div>
</li>
<li><p class="first">Set <tt class="docutils literal"><span class="pre">CHPL_HOST_PLATFORM</span></tt> to <tt class="docutils literal"><span class="pre">marenostrum</span></tt> and <tt class="docutils literal"><span class="pre">CHPL_COMM</span></tt> to
<tt class="docutils literal"><span class="pre">gasnet</span></tt>.  For example:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">export </span><span class="nv">CHPL_HOST_PLATFORM</span><span class="o">=</span>marenostrum
<span class="nb">export </span><span class="nv">CHPL_COMM</span><span class="o">=</span>gasnet
</pre></div>
</div>
<p>Additional information about running using multiple locales and
GASNet can be found in <a class="reference internal" href="../usingchapel/multilocale.html#readme-multilocale"><em>Multilocale Chapel Execution</em></a></p>
</li>
<li><p class="first">Make sure you&#8217;re in the top-level chapel/ directory:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd</span> <span class="nv">$CHPL_HOME</span>
</pre></div>
</div>
<p>Make/re-make the compiler and runtime:</p>
<div class="highlight-sh"><div class="highlight"><pre>gmake
</pre></div>
</div>
</li>
<li><p class="first">Set your <tt class="docutils literal"><span class="pre">PATH</span></tt> to include <tt class="docutils literal"><span class="pre">$CHPL_HOME/bin/marenostrum</span></tt> which
is created when you build the compiler.  For example:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:</span><span class="nv">$CHPL_HOME</span><span class="s2">/bin/marenostrum&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Compile your Chapel program as usual.  See
<a class="reference internal" href="../usingchapel/compiling.html#readme-compiling"><em>Compiling Chapel Programs</em></a> for details.  For example:</p>
<div class="highlight-sh"><div class="highlight"><pre>chpl -o hello6-taskpar-dist <span class="nv">$CHPL_HOME</span>/examples/hello6-taskpar-dist.chpl
</pre></div>
</div>
</li>
<li><p class="first">The above settings will result in a multi-locale compilation.  When
you compile a Chapel program, you should see two binaries (e.g.,
<tt class="docutils literal"><span class="pre">hello6-taskpar-dist</span></tt> and <tt class="docutils literal"><span class="pre">hello6-taskpar-dist_real</span></tt>).  The
first binary contains code to launch the Chapel program onto the
compute nodes using <tt class="docutils literal"><span class="pre">mnsubmit</span></tt>.  The second contains the program
code itself; it is not intended to be executed directly from the
shell prompt.</p>
</li>
<li><p class="first">On MareNostrum, a marenostrum-specific launcher is used by default
to wrap the <tt class="docutils literal"><span class="pre">mnsubmit</span></tt> and <tt class="docutils literal"><span class="pre">slurm</span></tt> scripts required to launch a
job on the compute nodes.  This launcher accepts the following
flags:</p>
<div class="highlight-sh"><div class="highlight"><pre>--walltime &lt;HH:MM:SS&gt; : <span class="o">(</span>required<span class="o">)</span> <span class="nb">set </span>the max wallclock <span class="nb">time</span>
--queue &lt;name&gt;        : <span class="o">(</span>optional<span class="o">)</span> specify the debug or interactive queue
</pre></div>
</div>
<p>These options can also be set using the <tt class="docutils literal"><span class="pre">CHPL_LAUNCHER_WALLTIME</span></tt>
and <tt class="docutils literal"><span class="pre">CHPL_LAUNCHER_QUEUE</span></tt> environment variables, respectively.</p>
</li>
<li><p class="first">Multi-locale binaries require the number of locales to be specified
on the command line.  Other than this, execute your Chapel program
as usual.  For example:</p>
<div class="highlight-sh"><div class="highlight"><pre>./hello6-taskpar-dist -nl <span class="m">2</span> --walltime 00:03:00 --queue debug
</pre></div>
</div>
<p>You can use the <tt class="docutils literal"><span class="pre">-v</span></tt> flag to see the commands used to launch your
program.  If you set the <tt class="docutils literal"><span class="pre">CHPL_LAUNCHER_DEBUG</span></tt> environment
variable, the script used with the <tt class="docutils literal"><span class="pre">mnsubmit</span></tt> command will be
preserved after your program executes.</p>
</li>
<li><p class="first">On MareNostrum, jobs cannot be run in an interactive mode, so all
program will end up in a <tt class="docutils literal"><span class="pre">.out</span></tt> file whose name matches the
executable.  For example, the program above would leave its output
in <tt class="docutils literal"><span class="pre">hello6-taskpar-dist.out</span></tt></p>
</li>
</ol>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sgi.html" class="btn btn-neutral float-right" title="Using Chapel on SGI Altix">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="macosx.html" class="btn btn-neutral" title="Using Chapel on Mac OS X"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Cray Inc.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.12.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 

</body>
</html>
