<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GPU &mdash; Chapel Documentation 2.2</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=70f659a1" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=b21de401"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Allocators" href="Allocators.html" />
    <link rel="prev" title="DynamicIters" href="DynamicIters.html" />
   
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>2.2
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "2.2";
$pagename = "modules/standard/GPU";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../standard.html">Standard Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../standard.html#automatic-modules">Automatic Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#algorithms">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#data-structures">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#diagnostics">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#files-io">Files/IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#language-support">Language Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#math-numerical">Math/Numerical</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../standard.html#parallelism-distributed-computing">Parallelism/Distributed Computing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Collectives.html">Collectives</a></li>
<li class="toctree-l3"><a class="reference internal" href="Communication.html">Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="DynamicIters.html">DynamicIters</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">GPU</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#system-interoperability">System/Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../standard.html">Standard Modules</a></li>
      <li class="breadcrumb-item active">GPU</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/modules/standard/GPU.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gpu">
<span id="module-GPU"></span><h1>GPU<a class="headerlink" href="#gpu" title="Link to this heading">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">GPU</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">GPU</span><span class="p">;</span>
</pre></div>
</div>
<p>Supports utility functions for operating with GPUs.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This module is unstable and its interface is subject to change in the
future.</p>
<p>GPU support is a relatively new feature to Chapel and is under active
development.</p>
<p>For the most up-to-date information about GPU support see the
<a class="reference internal" href="../../technotes/gpu.html#readme-gpu"><span class="std std-ref">technical note</span></a> about it.</p>
</div>
<dl class="chpl annotation">
<dt class="sig sig-object chpl" id="GPU.&#64;gpu.assertEligible">
<em class="property"><span class="pre">attribute</span> </em><span class="sig-name descname"><span class="pre">&#64;gpu.assertEligible</span></span><a class="headerlink" href="#GPU.@gpu.assertEligible" title="Link to this definition">¶</a></dt>
<dd><p>This attribute can be applied to loops to ensure that they are eligible
for GPU execution. Unlike <a class="reference internal" href="#GPU.&#64;assertOnGpu" title="GPU.&#64;assertOnGpu"><code class="xref chpl chpl-annotation docutils literal notranslate"><span class="pre">&#64;assertOnGpu</span></code></a>, this attribute has no
execution-time effect. It only asserts that the code <cite>could</cite> be executed on
the GPU, and not that it <cite>will</cite> be executed.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">@</span><span class="nd">gpu.assertEligible</span>
<span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="c1">// variable version (applies to loop expressions and promoted expressions)</span>
<span class="k">@</span><span class="nd">gpu.assertEligible</span>
<span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">(</span><span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="k">do</span> <span class="nx">i</span><span class="o">*</span><span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</dd></dl>

<dl class="chpl data">
<dt class="sig sig-object chpl" id="GPU.silenceAssertOnGpuWarning">
<em class="property"><span class="pre">config</span> <span class="pre">param</span> </em><span class="sig-name descname"><span class="pre">silenceAssertOnGpuWarning</span></span><span class="w"> </span><em class="property"> <span class="pre">=</span> <span class="pre">false</span></em><a class="headerlink" href="#GPU.silenceAssertOnGpuWarning" title="Link to this definition">¶</a></dt>
<dd><p>This configuration parameter is used to disable warnings that are emitted
when <a class="reference internal" href="#GPU.&#64;assertOnGpu" title="GPU.&#64;assertOnGpu"><code class="xref chpl chpl-annotation docutils literal notranslate"><span class="pre">&#64;assertOnGpu</span></code></a> is used in a non-GPU compilation. Since
<a class="reference internal" href="#GPU.&#64;assertOnGpu" title="GPU.&#64;assertOnGpu"><code class="xref chpl chpl-annotation docutils literal notranslate"><span class="pre">&#64;assertOnGpu</span></code></a>’s execution-time semantics are to halt execution
if it is not on the GPU, it will always halt execution when the program is
not compiled for the GPU. This is likely an issue, so the warning is emitted
by default. However, in case the user is aware of this and wants to silence
the warning, they can set this configuration parameter to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</dd></dl>

<dl class="chpl annotation">
<dt class="sig sig-object chpl" id="GPU.&#64;assertOnGpu">
<em class="property"><span class="pre">attribute</span> </em><span class="sig-name descname"><span class="pre">&#64;assertOnGpu</span></span><a class="headerlink" href="#GPU.@assertOnGpu" title="Link to this definition">¶</a></dt>
<dd><p>This attribute can be applied to loops to ensure that they are executed on
the GPU. It has the effect of <a class="reference internal" href="#GPU.&#64;gpu.assertEligible" title="GPU.&#64;gpu.assertEligible"><code class="xref chpl chpl-annotation docutils literal notranslate"><span class="pre">&#64;gpu.assertEligible</span></code></a>, halting
compilation if the construct it is applied to cannot be executed on the GPU.
In addition, this attribute causes an execution-time check to be performed
when it is reached, ensuring that the code is executed on the GPU.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">@</span><span class="nd">assertOnGpu</span>
<span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="c1">// variable version (applies to loop expressions and promoted expressions)</span>
<span class="k">@</span><span class="nd">assertOnGpu</span>
<span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">(</span><span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="k">do</span> <span class="nx">i</span><span class="o">*</span><span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</dd></dl>

<dl class="chpl annotation">
<dt class="sig sig-object chpl" id="GPU.&#64;gpu.blockSize">
<em class="property"><span class="pre">attribute</span> </em><span class="sig-name descname"><span class="pre">&#64;gpu.blockSize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">arg:</span> <span class="pre">integral</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.@gpu.blockSize" title="Link to this definition">¶</a></dt>
<dd><p>This attribute can be applied to loops to specify the GPU block size to use
when executing the loop on the GPU.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="c1">// loop version</span>
<span class="k">@</span><span class="nd">gpu.blockSize</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="c1">// variable version (applies to loop expressions and promoted expressions)</span>
<span class="k">@</span><span class="nd">gpu.blockSize</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">(</span><span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="k">do</span> <span class="nx">i</span><span class="o">*</span><span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</dd></dl>

<dl class="chpl annotation">
<dt class="sig sig-object chpl" id="GPU.&#64;gpu.itersPerThread">
<em class="property"><span class="pre">attribute</span> </em><span class="sig-name descname"><span class="pre">&#64;gpu.itersPerThread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">arg:</span> <span class="pre">integral</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.@gpu.itersPerThread" title="Link to this definition">¶</a></dt>
<dd><p>This attribute requests that the kernel executes each consecutive
<code class="docutils literal notranslate"><span class="pre">numIters</span></code> iterations of the affected loop sequentially within the same
GPU thread. Users must ensure that the arguments to this attribute are
positive.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="c1">// loop version</span>
<span class="k">@</span><span class="nd">gpu.itersPerThread</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="c1">// variable version (applies to loop expressions and promoted expressions)</span>
<span class="k">@</span><span class="nd">gpu.itersPerThread</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">(</span><span class="k">foreach</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">128</span> <span class="k">do</span> <span class="nx">i</span><span class="o">*</span><span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuWrite">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuWrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">args</span> <span class="pre">...?k</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuWrite" title="Link to this definition">¶</a></dt>
<dd><p>This function is intended to be called from within a GPU kernel and is
useful for debugging purposes.</p>
<p>Currently using <a class="reference internal" href="IO.html#IO.write" title="IO.write"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">write</span></code></a> to send output to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> will
make a loop ineligible for GPU execution; use <a class="reference internal" href="#GPU.gpuWrite" title="GPU.gpuWrite"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">gpuWrite</span></code></a> instead.</p>
<p>Currently this function will only work if values of type
<code class="docutils literal notranslate"><span class="pre">c_ptrConst(c_char)</span></code> are passed.</p>
<p>On NVIDIA GPUs the written values will be flushed to the terminal after
the kernel has finished executing.  Note that there is a 1MB limit on the
size of this buffer.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuWriteln">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuWriteln</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">args</span> <span class="pre">...?k</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuWriteln" title="Link to this definition">¶</a></dt>
<dd><p>Pass arguments to <a class="reference internal" href="#GPU.gpuWrite" title="GPU.gpuWrite"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">gpuWrite</span></code></a> and follow with a newline.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuClock">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuClock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">uint</span></em><a class="headerlink" href="#GPU.gpuClock" title="Link to this definition">¶</a></dt>
<dd><p>Returns value of a per-multiprocessor counter that increments every clock cycle.
This function is meant to be called to time sections of code within a GPU
enabled loop.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuClocksPerSec">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuClocksPerSec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">devNum:</span> <span class="pre">int</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuClocksPerSec" title="Link to this definition">¶</a></dt>
<dd><p>Returns the number of clock cycles per second of a GPU multiprocessor.
Note: currently we don’t support calling this function from within a kernel.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.syncThreads">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">syncThreads</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GPU.syncThreads" title="Link to this definition">¶</a></dt>
<dd><p>Synchronize threads within a GPU block.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.syncWarp">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">syncWarp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">mask:</span> <span class="pre">uint(32)</span> <span class="pre">=</span> <span class="pre">0xffffffff</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.syncWarp" title="Link to this definition">¶</a></dt>
<dd><p>Causes the executing thread to wait until all warp lanes named in mask
have executed a <code class="docutils literal notranslate"><span class="pre">syncWarp()</span></code> (with the same mask) before resuming
execution.
Each calling thread must have its own bit set in the mask and all
non-exited threads named in mask must execute a corresponding
<code class="docutils literal notranslate"><span class="pre">syncWarp()</span></code> with the same mask, or the result is undefined.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.createSharedArray">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">createSharedArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">type</span> <span class="pre">eltType</span></em>, <em class="sig-param"><span class="pre">param</span> <span class="pre">size</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">c_ptr(eltType)</span></em><a class="headerlink" href="#GPU.createSharedArray" title="Link to this definition">¶</a></dt>
<dd><p>Allocate block shared memory, enough to store <code class="docutils literal notranslate"><span class="pre">size</span></code> elements of
<code class="docutils literal notranslate"><span class="pre">eltType</span></code>. Returns a <a class="reference internal" href="CTypes.html#CTypes.c_ptr" title="CTypes.c_ptr"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">CTypes.c_ptr</span></code></a> to the allocated array. Note that
although every thread in a block calls this procedure, the same shared array
is returned to all of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eltType</strong> – the type of elements to allocate the array for.</p></li>
<li><p><strong>size</strong> – the number of elements in each GPU thread block’s copy of the array.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicAdd">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicAdd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicAdd" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically add ‘val’ to ‘x’ and store the result in ‘x’.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicSub">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicSub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicSub" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically subtract ‘val’ from ‘x’ and store the result in ‘x’.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicExch">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicExch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicExch" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically exchange the value stored in ‘x’ with ‘val’.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicMin">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicMin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicMin" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically compare ‘x’ and ‘val’ and store the minimum in ‘x’.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicMax">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicMax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicMax" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically compare ‘x’ and ‘val’ and store the maximum in ‘x’.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicInc">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicInc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicInc" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically increments x if the original value of x is
greater-than or equal to val, if so the result is stored in ‘x’. Otherwise x is set to 0.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicDec">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicDec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicDec" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically determine if ‘x’ equals 0 or is greater than ‘val’.
If so store ‘val’ in ‘x’ otherwise decrement ‘x’ by 1. Otherwise x is set to val.
The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicAnd">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicAnd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicAnd" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically perform a bitwise ‘and’ operation on ‘x’ and ‘val’ and store
the result in ‘x’. The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicOr">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicOr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicOr" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically perform a bitwise ‘or’ operation on ‘x’ and ‘val’ and store
the result in ‘x’. The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicXor">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicXor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicXor" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically perform a bitwise ‘xor’ operation on ‘x’ and ‘val’ and store
the result in ‘x’. The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuAtomicCAS">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuAtomicCAS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">x:</span> <span class="pre">?T</span></em>, <em class="sig-param"><span class="pre">cmp:</span> <span class="pre">T</span></em>, <em class="sig-param"><span class="pre">val:</span> <span class="pre">T</span></em><span class="sig-paren">)</span><em class="property"> <span class="pre">:</span> <span class="pre">T</span></em><a class="headerlink" href="#GPU.gpuAtomicCAS" title="Link to this definition">¶</a></dt>
<dd><p>When run on a GPU, atomically compare the value in ‘x’ and ‘cmp’, if they
are equal store ‘val’ in ‘x’. The operation returns the old value of x.</p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuSumReduce">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuSumReduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">ref</span> <span class="pre">A:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuSumReduce" title="Link to this definition">¶</a></dt>
<dd><p>Add all elements of an array together on the GPU (that is, perform a
sum-reduction). The array must be in GPU-accessible memory and the function
must be called from outside a GPU-eligible loop. Only arrays with int, uint,
and real types are supported. A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">gpuSumReduce</span><span class="p">(</span><span class="nx">Arr</span><span class="p">));</span> <span class="c1">// 15</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuMinReduce">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuMinReduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">ref</span> <span class="pre">A:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuMinReduce" title="Link to this definition">¶</a></dt>
<dd><p>Return the minimum element of an array on the GPU (that is, perform a
min-reduction). The array must be in GPU-accessible memory and the function
must be called from outside a GPU-eligible loop. Only arrays with int, uint,
and real types are supported. A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">gpuMinReduce</span><span class="p">(</span><span class="nx">Arr</span><span class="p">));</span> <span class="c1">// 1</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuMaxReduce">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuMaxReduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">ref</span> <span class="pre">A:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuMaxReduce" title="Link to this definition">¶</a></dt>
<dd><p>Return the maximum element of an array on the GPU (that is, perform a
max-reduction). The array must be in GPU-accessible memory and the function
must be called from outside a GPU-eligible loop. Only arrays with int, uint,
and real types are supported. A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">gpuMaxReduce</span><span class="p">(</span><span class="nx">Arr</span><span class="p">));</span> <span class="c1">// 5</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuMinLocReduce">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuMinLocReduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">ref</span> <span class="pre">A:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuMinLocReduce" title="Link to this definition">¶</a></dt>
<dd><p>For an array on the GPU, return a tuple with the value and the index of the
minimum element (that is, perform a minloc-reduction). If there are multiple
elements with the same minimum value, the index of the first one is
returned. The array must be in GPU-accessible memory and the function must
be called from outside a GPU-eligible loop.  Only arrays with int, uint, and
real types are supported. A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">gpuMinLocReduce</span><span class="p">(</span><span class="nx">Arr</span><span class="p">));</span> <span class="c1">// (1, 2). Note that Arr[2]==1.</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuMaxLocReduce">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuMaxLocReduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">ref</span> <span class="pre">A:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuMaxLocReduce" title="Link to this definition">¶</a></dt>
<dd><p>For an array on the GPU, return a tuple with the value and the index of the
maximum element (that is, perform a maxloc-reduction). If there are multiple
elements with the same maximum value, the index of the first one is
returned. The array must be in GPU-accessible memory and the function must
be called from outside a GPU-eligible loop.  Only arrays with int, uint, and
real types are supported. A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">gpuMaxLocReduce</span><span class="p">(</span><span class="nx">Arr</span><span class="p">));</span> <span class="c1">// (5, 3). Note that Arr[3]==5.</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuScan">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuScan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">gpuArr:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><em class="property">&#160; <span class="pre">where</span> <span class="pre">isNumericType(t)</span> <span class="pre">&amp;&amp;</span> <span class="pre">!isComplexType(t)</span></em><a class="headerlink" href="#GPU.gpuScan" title="Link to this definition">¶</a></dt>
<dd><p>Calculates an exclusive prefix sum (scan) of an array on the GPU.
The array must be in GPU-accessible memory and the function
must be called from outside a GPU-eligible loop.
Arrays of numeric types are supported.
A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">gpuScan</span><span class="p">(</span><span class="nx">Arr</span><span class="p">);</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">Arr</span><span class="p">);</span> <span class="c1">// [0, 3, 5, 6, 11]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="GPU.gpuSort">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">gpuSort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ref</span> <span class="pre">gpuInputArr:</span> <span class="pre">[]</span> <span class="pre">?t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#GPU.gpuSort" title="Link to this definition">¶</a></dt>
<dd><p>Sort an array on the GPU.
The array must be in GPU-accessible memory and the function must
be called from outside a GPU-eligible loop.
Only arrays of numeric types are supported.
A simple example is the following:</p>
<blockquote>
<div><div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">on</span> <span class="nx">here</span><span class="p">.</span><span class="nx">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">:</span> <span class="kt">uint</span><span class="p">;</span> <span class="c1">// will be GPU-accessible</span>
  <span class="nx">gpuSort</span><span class="p">(</span><span class="nx">Arr</span><span class="p">);</span>
  <span class="nx">writeln</span><span class="p">(</span><span class="nx">Arr</span><span class="p">);</span> <span class="c1">// [1, 2, 3, 4, 5]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="DynamicIters.html" class="btn btn-neutral float-left" title="DynamicIters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Allocators.html" class="btn btn-neutral float-right" title="Allocators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>