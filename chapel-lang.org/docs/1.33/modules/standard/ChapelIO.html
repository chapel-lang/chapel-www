<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ChapelIO &mdash; Chapel Documentation 1.33</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Math" href="Math.html" />
    <link rel="prev" title="Types" href="Types.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.33
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.33";
$pagename = "modules/standard/ChapelIO";
include "../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../standard.html">Standard Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../standard.html#automatic-modules">Automatic Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Errors.html">Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="Types.html">Types</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">A subset of the IO symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing">Writing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-serialize-and-deserialize-methods">The ‘serialize’ and ‘deserialize’ Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-readthis-and-writethis-methods">The readThis() and writeThis() Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-writethis-and-readthis-methods">Default writeThis and readThis Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Math.html">A subset of the Math symbols</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#data-structures">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#diagnostics">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#files-io">Files/IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#language-support">Language Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#math-numerical">Math/Numerical</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#parallelism-distributed-computing">Parallelism/Distributed Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#system-interoperability">System/Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../standard.html">Standard Modules</a> &raquo;</li>
      <li>ChapelIO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/modules/standard/ChapelIO.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="module-ChapelIO"></span><div class="section" id="chapelio">
<h1>ChapelIO<a class="headerlink" href="#chapelio" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All Chapel programs automatically <code class="docutils literal notranslate"><span class="pre">use</span></code> this module by default.
An explicit <code class="docutils literal notranslate"><span class="pre">use</span></code> statement is not necessary.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The module name ‘ChapelIO’ is unstable.  If you want to use qualified naming on the symbols within it, please ‘use’ or ‘import’ the <a class="reference internal" href="IO.html#module-IO" title="IO: Support for a variety of kinds of input and output."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">IO</span></code></a> module</p>
</div>
<p>Basic types and utilities in support of I/O operation.</p>
<p>Most of Chapel’s I/O support is within the <a class="reference internal" href="IO.html#module-IO" title="IO: Support for a variety of kinds of input and output."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">IO</span></code></a> module.  This section
describes automatically included basic types and routines that support the
<a class="reference internal" href="IO.html#module-IO" title="IO: Support for a variety of kinds of input and output."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">IO</span></code></a> module.</p>
<div class="section" id="writing">
<h2>Writing<a class="headerlink" href="#writing" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#ChapelIO.writeln" title="ChapelIO.writeln"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">writeln</span></code></a> function allows for a simple implementation
of a Hello World program:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="nx">writeln</span><span class="p">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="p">);</span>
<span class="c1">// outputs</span>
<span class="c1">// Hello, World!</span>
</pre></div>
</div>
</div>
<div class="section" id="the-serialize-and-deserialize-methods">
<span id="serialize-deserialize"></span><h2>The ‘serialize’ and ‘deserialize’ Methods<a class="headerlink" href="#the-serialize-and-deserialize-methods" title="Permalink to this headline">¶</a></h2>
<p>A Chapel program can implement <code class="docutils literal notranslate"><span class="pre">serialize</span></code> and <code class="docutils literal notranslate"><span class="pre">deserialize</span></code> methods
on a user-defined data type to define how that type is deserialized from a
<code class="docutils literal notranslate"><span class="pre">fileReader</span></code> or serialized to a <code class="docutils literal notranslate"><span class="pre">fileWriter</span></code>. The method signatures for
non-class types are:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">T.serialize</span><span class="p">(</span><span class="nx">writer</span><span class="p">:</span> <span class="nx">fileWriter</span><span class="p">(</span><span class="nx">locking</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="p">?),</span>
                 <span class="kd">ref</span> <span class="nx">serializer</span><span class="p">:</span> <span class="p">?</span><span class="nx">st</span><span class="p">)</span> <span class="k">throws</span>

<span class="k">proc</span> <span class="nf">ref</span> <span class="nx">T</span><span class="p">.</span><span class="nx">deserialize</span><span class="p">(</span><span class="nx">reader</span><span class="p">:</span> <span class="nx">fileReader</span><span class="p">(</span><span class="nx">locking</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="p">?),</span>
                       <span class="kd">ref</span> <span class="nx">deserializer</span><span class="p">:</span> <span class="p">?</span><span class="nx">dt</span><span class="p">)</span> <span class="k">throws</span>
</pre></div>
</div>
<p>The signatures for classes are slightly different:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">override</span> <span class="k">proc</span> <span class="nf">T.serialize</span><span class="p">(</span><span class="nx">writer</span><span class="p">:</span> <span class="nx">fileWriter</span><span class="p">(</span><span class="nx">locking</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="p">?),</span>
                          <span class="kd">ref</span> <span class="nx">serializer</span><span class="p">:</span> <span class="p">?</span><span class="nx">st</span><span class="p">)</span> <span class="k">throws</span>

<span class="k">override</span> <span class="k">proc</span> <span class="nf">T.deserialize</span><span class="p">(</span><span class="nx">reader</span><span class="p">:</span> <span class="nx">fileReader</span><span class="p">(</span><span class="nx">locking</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="p">?),</span>
                            <span class="kd">ref</span> <span class="nx">deserializer</span><span class="p">:</span> <span class="p">?</span><span class="nx">dt</span><span class="p">)</span> <span class="k">throws</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">serializer</span></code> and <code class="docutils literal notranslate"><span class="pre">deserializer</span></code> arguments must satisfy the
<a class="reference internal" href="../../technotes/ioSerializers.html#io-serializer-api"><span class="std std-ref">Serializer API</span></a> and the
<a class="reference internal" href="../../technotes/ioSerializers.html#io-deserializer-api"><span class="std std-ref">Deserializer API</span></a>, respectively.</p>
<div class="section" id="basic-usage">
<h3>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h3>
<p>Implementations of <code class="docutils literal notranslate"><span class="pre">serialize</span></code> and <code class="docutils literal notranslate"><span class="pre">deserialize</span></code> methods are not
necessarily required to utilize their <code class="docutils literal notranslate"><span class="pre">serializer</span></code> and <code class="docutils literal notranslate"><span class="pre">deserializer</span></code>
arguments, and can instead trivially read and write from their <code class="docutils literal notranslate"><span class="pre">fileReader</span></code>
and <code class="docutils literal notranslate"><span class="pre">fileWriter</span></code> arguments. For example:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="c1">// A record &#39;R&#39; that serializes as an integer</span>
<span class="k">record</span> <span class="nc">R</span> <span class="p">:</span> <span class="nx">writeSerializable</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="p">:</span> <span class="kt">int</span><span class="p">;</span>

  <span class="k">proc</span> <span class="nf">serialize</span><span class="p">(</span><span class="nx">writer</span><span class="p">:</span> <span class="nx">fileWriter</span><span class="p">(</span><span class="nx">locking</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="p">?),</span>
                 <span class="kd">ref</span> <span class="nx">serializer</span><span class="p">:</span> <span class="p">?</span><span class="nx">st</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">writer</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">R</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">writeln</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span> <span class="c1">// prints &#39;5&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-serializers-and-deserializers">
<h3>Using Serializers and Deserializers<a class="headerlink" href="#using-serializers-and-deserializers" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../../technotes/ioSerializers.html#io-serializer-user-api"><span class="std std-ref">Serializers</span></a> and
<a class="reference internal" href="../../technotes/ioSerializers.html#io-deserializer-user-api"><span class="std std-ref">Deserializers</span></a> support a variety of methods
to support serializing various kinds of types. These methods can be used
to serialize or deserialize a type in a format-agnostic way. For example,
consider a simple ‘point’ type:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">point</span> <span class="p">:</span> <span class="nx">writeSerializable</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">y</span> <span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The default implementation of <code class="docutils literal notranslate"><span class="pre">point</span></code>’s <code class="docutils literal notranslate"><span class="pre">serialize</span></code> method will naturally
serialize <code class="docutils literal notranslate"><span class="pre">point</span></code> as a record. In the default serialization format, this
would look something like <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">=</span> <span class="pre">2,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">4)</span></code>. In the JSON serialization format,
the output would instead be <code class="docutils literal notranslate"><span class="pre">{&quot;x&quot;:4,</span> <span class="pre">&quot;y&quot;:2}</span></code>. While this may be perfectly
acceptable, what if the author of <code class="docutils literal notranslate"><span class="pre">point</span></code> wished to always serialize a
<code class="docutils literal notranslate"><span class="pre">point</span></code> as a tuple?</p>
<p>Serializers and Deserializers have “start” methods that begin serialization
or deserialization of a type, and then return a helper object that implements
methods to continue the process. To begin serializing <code class="docutils literal notranslate"><span class="pre">point</span></code> as a tuple,
a user may invoke the <code class="docutils literal notranslate"><span class="pre">startTuple</span></code> method on the <code class="docutils literal notranslate"><span class="pre">serializer</span></code>, passing in
the <code class="docutils literal notranslate"><span class="pre">fileWriter</span></code> to use when writing serialized output and the number of
elements in the tuple. The returned value from <code class="docutils literal notranslate"><span class="pre">startTuple</span></code> is a helper
object that implements <code class="docutils literal notranslate"><span class="pre">writeElement</span></code> and <code class="docutils literal notranslate"><span class="pre">endTuple</span></code> methods:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">proc</span> <span class="nf">point.serialize</span><span class="p">(</span><span class="nx">writer</span><span class="p">:</span> <span class="nx">fileWriter</span><span class="p">(</span><span class="nx">locking</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="p">?),</span>
                     <span class="kd">ref</span> <span class="nx">serializer</span><span class="p">:</span> <span class="p">?</span><span class="nx">st</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Start serializing and get the helper object</span>
  <span class="c1">// &#39;2&#39; represents the number of tuple elements to be serialized</span>
  <span class="kd">var</span> <span class="nx">ser</span> <span class="o">=</span> <span class="nx">serializer</span><span class="p">.</span><span class="nx">startTuple</span><span class="p">(</span><span class="nx">writer</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

  <span class="nx">ser</span><span class="p">.</span><span class="nx">writeElement</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// serialize &#39;x&#39; as a tuple element</span>
  <span class="nx">ser</span><span class="p">.</span><span class="nx">writeElement</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span> <span class="c1">// serialize &#39;y&#39; as a tuple element</span>

  <span class="c1">// End serialization of the tuple</span>
  <span class="nx">ser</span><span class="p">.</span><span class="nx">endTuple</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, when using different Serializers like the <a class="reference internal" href="IO.html#IO.defaultSerializer" title="IO.defaultSerializer"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">defaultSerializer</span></code></a> or
the <a class="reference internal" href="JSON.html#JSON.jsonSerializer" title="JSON.jsonSerializer"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">jsonSerializer</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">point</span></code> type can be serialized without
introducing special cases for each format:</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">IO</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">point</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="c1">// Prints &#39;(4, 2)&#39; in the default serialization format</span>
<span class="nx">stdout</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>

<span class="c1">// Prints &#39;[4, 2]&#39; in the JSON serialization format</span>
<span class="kd">var</span> <span class="nx">jsonWriter</span> <span class="o">=</span> <span class="nx">stdout</span><span class="p">.</span><span class="nx">withSerializer</span><span class="p">(</span><span class="nx">jsonSerializer</span><span class="p">);</span>
<span class="nx">jsonWriter</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
</pre></div>
</div>
<p>A similar API exists for deserialization that would allow for deserializing a
<code class="docutils literal notranslate"><span class="pre">point</span></code> as a tuple. Please refer to the
<a class="reference internal" href="../../technotes/ioSerializers.html#ioserializers"><span class="std std-ref">IO Serializers technote</span></a> for more detail on the various
kinds of types that can be serialized and deserialized. As of Chapel 1.32 the
supported type-kinds are Classes, Records, Tuples, Arrays, Lists, and Maps.</p>
</div>
<div class="section" id="compiler-generated-default-methods">
<h3>Compiler-Generated Default Methods<a class="headerlink" href="#compiler-generated-default-methods" title="Permalink to this headline">¶</a></h3>
<p>Default <code class="docutils literal notranslate"><span class="pre">serialize</span></code> methods are created for all types for which a
user-defined <code class="docutils literal notranslate"><span class="pre">serialize</span></code> method is not provided.</p>
<p>Classes will be serialized as a ‘Class’ type-kind using the Serializer API,
and will invoke their parent <code class="docutils literal notranslate"><span class="pre">serialize</span></code> method before serializing their
own fields.</p>
<p>Records will be serialized as a ‘Record’ type-kind using the Serializer API,
and will serialize each field in the record.</p>
<p>Default <code class="docutils literal notranslate"><span class="pre">deserialize</span></code> methods are created for all types for which a
user-defined <code class="docutils literal notranslate"><span class="pre">deserialize</span></code> method is not provided.  The default
<code class="docutils literal notranslate"><span class="pre">deserialize</span></code> methods will mirror the relevant API calls in the default
<code class="docutils literal notranslate"><span class="pre">serialize</span></code> methods.</p>
<p>For more information on the default serialization format, please refer to the
<a class="reference internal" href="IO.html#IO.defaultSerializer" title="IO.defaultSerializer"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">defaultSerializer</span></code></a> and <a class="reference internal" href="IO.html#IO.defaultDeserializer" title="IO.defaultDeserializer"><code class="xref chpl chpl-type docutils literal notranslate"><span class="pre">defaultDeserializer</span></code></a> types.</p>
<p>If the compiler sees a user-defined implementation of the <code class="docutils literal notranslate"><span class="pre">serialize</span></code> method,
the <code class="docutils literal notranslate"><span class="pre">deserialize</span></code> method, or the deserializing initializer, then the compiler
may choose to not automatically generate any of the other unimplemented
methods. This is out of concern that the user has intentionally deviated from
the default implementation of serialization and deserialization.</p>
<p>Types with compiler-generated versions of these methods do not need to
explicitly indicate that they satisfy any of the relevant serialization
interfaces (such as <code class="docutils literal notranslate"><span class="pre">writeSerializable</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that it is not currently possible to read and write circular
data structures with these mechanisms.</p>
</div>
</div>
</div>
<div class="section" id="the-readthis-and-writethis-methods">
<span id="readthis-writethis"></span><h2>The readThis() and writeThis() Methods<a class="headerlink" href="#the-readthis-and-writethis-methods" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">readThis</span></code> and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods are deprecated. Please use
<a class="reference internal" href="#serialize-deserialize"><span class="std std-ref">serialize and deserialize</span></a> methods instead.
Until <code class="docutils literal notranslate"><span class="pre">readThis</span></code> and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods are removed, any
compiler-generated implementations of the ‘serialize’ and ‘deserialize’
methods will attempt to invoke <code class="docutils literal notranslate"><span class="pre">readThis</span></code> and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods for
the sake of compatibility.</p>
</div>
<p>A Chapel program can implement <code class="docutils literal notranslate"><span class="pre">readThis</span></code> and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods on a
custom data type to define how that type is read from a fileReader or written to
a fileWriter.  <code class="docutils literal notranslate"><span class="pre">readThis</span></code> accepts a fileReader as its only argument and the
file must be readable.  <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> accepts a fileWriter as its only argument
and the file must be writable. If neither of these methods is defined, a default
version of <code class="docutils literal notranslate"><span class="pre">readThis</span></code> and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> will be generated by the compiler.</p>
<p>Note that arguments to <code class="docutils literal notranslate"><span class="pre">readThis</span></code> and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> may be locked; as a
result, calling methods on the fileReader or fileWriter in parallel from within
a <code class="docutils literal notranslate"><span class="pre">readThis</span></code> or <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> may cause undefined behavior.  Additionally,
performing I/O on a global fileReader or fileWriter that is the same as the one
<code class="docutils literal notranslate"><span class="pre">readThis</span></code> or <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> is operating on can result in a deadlock. In
particular, these methods should not refer to <a class="reference internal" href="IO.html#IO.stdin" title="IO.stdin"><code class="xref chpl chpl-var docutils literal notranslate"><span class="pre">stdin</span></code></a>,
<a class="reference internal" href="IO.html#IO.stdout" title="IO.stdout"><code class="xref chpl chpl-var docutils literal notranslate"><span class="pre">stdout</span></code></a>, or <a class="reference internal" href="IO.html#IO.stderr" title="IO.stderr"><code class="xref chpl chpl-var docutils literal notranslate"><span class="pre">stderr</span></code></a> explicitly or implicitly (such as by
calling the global <a class="reference internal" href="#ChapelIO.writeln" title="ChapelIO.writeln"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">writeln</span></code></a> function).  Instead, these methods should
only perform I/O on the fileReader or fileWriter passed as an argument.</p>
<p>Note that the procedures <a class="reference internal" href="IO.html#IO.fileReader.readLiteral" title="IO.fileReader.readLiteral"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">readLiteral</span></code></a> and
<a class="reference internal" href="IO.html#IO.fileWriter.writeLiteral" title="IO.fileWriter.writeLiteral"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">writeLiteral</span></code></a> may be useful when implementing <code class="docutils literal notranslate"><span class="pre">readThis</span></code>
and <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods. These methods are not included by default.</p>
<p>This example defines a writeThis method - so that there will be a function
resolution error if the record NoRead is read.</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">record</span> <span class="nc">NoRead</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">;</span>
  <span class="k">proc</span> <span class="nf">writeThis</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// Note that no readThis function will be generated.</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">nr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NoRead</span><span class="p">();</span>
<span class="nx">write</span><span class="p">(</span><span class="nx">nr</span><span class="p">);</span>
<span class="c1">// prints out</span>
<span class="c1">// hello</span>

<span class="c1">// Note that read(nr) will generate a compiler error.</span>
</pre></div>
</div>
</div>
<div class="section" id="default-writethis-and-readthis-methods">
<span id="default-readthis-writethis"></span><h2>Default writeThis and readThis Methods<a class="headerlink" href="#default-writethis-and-readthis-methods" title="Permalink to this headline">¶</a></h2>
<p>Default <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods are created for all types for which a
user-defined <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> method is not provided.  They have the following
semantics:</p>
<ul class="simple">
<li><p>for a class: outputs the values within the fields of the class prefixed by
the name of the field and the character <code class="docutils literal notranslate"><span class="pre">=</span></code>.  Each field is separated by a
comma.  The output is delimited by <code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">}</span></code>.</p></li>
<li><p>for a record: outputs the values within the fields of the class prefixed by
the name of the field and the character <code class="docutils literal notranslate"><span class="pre">=</span></code>.  Each field is separated by a
comma.  The output is delimited by <code class="docutils literal notranslate"><span class="pre">(</span></code> and <code class="docutils literal notranslate"><span class="pre">)</span></code>.</p></li>
</ul>
<p>Default <code class="docutils literal notranslate"><span class="pre">readThis</span></code> methods are created for all types for which a user-defined
<code class="docutils literal notranslate"><span class="pre">readThis</span></code> method is not provided.  The default <code class="docutils literal notranslate"><span class="pre">readThis</span></code> methods are
defined to read in the output of the default <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> method.</p>
<p>Additionally, the Chapel implementation includes <code class="docutils literal notranslate"><span class="pre">writeThis</span></code> methods for
built-in types as follows:</p>
<ul class="simple">
<li><p>for an array: outputs the elements of the array in row-major order
where rows are separated by line-feeds and blank lines are used to separate
other dimensions.</p></li>
<li><p>for a domain: outputs the dimensions of the domain enclosed by
<code class="docutils literal notranslate"><span class="pre">{</span></code> and <code class="docutils literal notranslate"><span class="pre">}</span></code>.</p></li>
<li><p>for a range: output the lower bound of the range, output <code class="docutils literal notranslate"><span class="pre">..</span></code>,
then output the upper bound of the range.  If the stride of the range
is not <code class="docutils literal notranslate"><span class="pre">1</span></code>, output the word <code class="docutils literal notranslate"><span class="pre">by</span></code> and then the stride of the range.
If the range has special alignment, output the word <code class="docutils literal notranslate"><span class="pre">align</span></code> and then the
alignment.</p></li>
<li><p>for tuples, outputs the components of the tuple in order delimited by <code class="docutils literal notranslate"><span class="pre">(</span></code>
and <code class="docutils literal notranslate"><span class="pre">)</span></code>, and separated by commas.</p></li>
</ul>
<p>These types also include <code class="docutils literal notranslate"><span class="pre">readThis</span></code> methods to read the corresponding format.
Note that when reading an array, the domain of the array must be set up
appropriately before the elements can be read.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that it is not currently possible to read and write circular
data structures with these mechanisms.</p>
</div>
<dl class="chpl function">
<dt class="sig sig-object chpl" id="ChapelIO.write">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">args</span> <span class="pre">...?n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ChapelIO.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">try!</span> <span class="pre">stdout.write</span></code>. See <a class="reference internal" href="IO.html#IO.fileWriter.write" title="IO.fileWriter.write"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">IO.fileWriter.write</span></code></a></p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="ChapelIO.writeln">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">writeln</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">const</span> <span class="pre">args</span> <span class="pre">...?n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ChapelIO.writeln" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">try!</span> <span class="pre">stdout.writeln</span></code>. See <a class="reference internal" href="IO.html#IO.fileWriter.writeln" title="IO.fileWriter.writeln"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">IO.fileWriter.writeln</span></code></a></p>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="ChapelIO.writef">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">writef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fmt:</span> <span class="pre">?t</span></em>, <em class="sig-param"><span class="pre">const</span> <span class="pre">args</span> <span class="pre">...?k</span></em><span class="sig-paren">)</span><em class="property">&#160; <span class="pre">where</span> <span class="pre">isStringType(t)</span> <span class="pre">||</span> <span class="pre">isBytesType(t)</span></em><a class="headerlink" href="#ChapelIO.writef" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">try!</span> <span class="pre">stdout.writef</span></code>. See
<a class="reference internal" href="IO/FormattedIO.html#FormattedIO.fileWriter.writef" title="FormattedIO.fileWriter.writef"><code class="xref chpl chpl-proc docutils literal notranslate"><span class="pre">FormattedIO.fileWriter.writef</span></code></a>.</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Types.html" class="btn btn-neutral float-left" title="Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Math.html" class="btn btn-neutral float-right" title="Math" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>