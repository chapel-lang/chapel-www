<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PCGRandom &mdash; Chapel Documentation 1.33</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="PCGRandomLib" href="PCGRandomLib.html" />
    <link rel="prev" title="Random" href="../Random.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../../../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.33
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.33";
$pagename = "modules/standard/Random/PCGRandom";
include "../../..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../standard.html">Standard Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#automatic-modules">Automatic Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#data-structures">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#diagnostics">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#files-io">Files/IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#language-support">Language Support</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../standard.html#math-numerical">Math/Numerical</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../BigInteger.html">BigInteger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../BitOps.html">BitOps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../GMP.html">GMP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Math.html">Math</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../Random.html">Random</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">PCGRandom</a></li>
<li class="toctree-l4"><a class="reference internal" href="PCGRandomLib.html">PCGRandomLib</a></li>
<li class="toctree-l4"><a class="reference internal" href="RandomSupport.html">RandomSupport</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Random.html#seed-generation">Seed Generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Random.html#note-about-deprecations-and-future-work">Note About Deprecations and Future Work</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#parallelism-distributed-computing">Parallelism/Distributed Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#system-interoperability">System/Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../standard.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../../../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../../../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../standard.html">Standard Modules</a> &raquo;</li>
          <li><a href="../Random.html">Random</a> &raquo;</li>
      <li>PCGRandom</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/modules/standard/Random/PCGRandom.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="module-PCGRandom"></span><div class="section" id="pcgrandom">
<h1>PCGRandom<a class="headerlink" href="#pcgrandom" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Random</span><span class="p">.</span><span class="nx">PCGRandom</span><span class="p">;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-chapel notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">Random</span><span class="p">.</span><span class="nx">PCGRandom</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>the ‘PCGRandom’ module is unstable and may be removed in the future</p>
</div>
<p>Permuted Linear Congruential Random Number Generator.</p>
<p>This module provides PCG random number generation routines.
See <a class="reference external" href="http://www.pcg-random.org/">http://www.pcg-random.org/</a>
and the paper, <cite>PCG: A Family of Simple Fast Space-Efficient Statistically
Good Algorithms for Random Number Generation</cite> by M.E. O’Neill.</p>
<p>It also includes some Chapel-specific features, such as generating real,
imag, and complex numbers; and generating numbers in a range in parallel.
These features are not available in the reference implementations of PCG.</p>
<p>The related module <a class="reference internal" href="PCGRandomLib.html#module-PCGRandomLib" title="PCGRandomLib: Low-level PCG RNG implementation."><code class="xref chpl chpl-mod docutils literal notranslate"><span class="pre">PCGRandomLib</span></code></a> provides a lower-level interface to
many PCG functions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The interface provided by this module is expected to change.</p>
</div>
<dl class="chpl type">
<dt class="sig sig-object chpl" id="PCGRandom.PCGRandomStream">
<em class="property"><span class="pre">type</span> </em><span class="sig-name descname"><span class="pre">PCGRandomStream</span></span> <span class="pre">=</span> <span class="pre">PCGRandomStreamInternal(?)</span><a class="headerlink" href="#PCGRandom.PCGRandomStream" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>‘PCGRandomStream’ is deprecated; please use <a class="reference internal" href="../Random.html#Random.randomStream" title="Random.randomStream"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">randomStream</span></code></a> instead</p>
</div>
<p>Models a stream of pseudorandom numbers generated by the PCG random number
generator.  See <a class="reference external" href="http://www.pcg-random.org/">http://www.pcg-random.org/</a> and the paper, <cite>PCG: A Family
of Simple Fast Space-Efficient Statistically Good Algorithms for Random
Number Generation</cite> by M.E. O’Neill.</p>
<p>This class builds upon the <a class="reference internal" href="PCGRandomLib.html#PCGRandomLib.pcg_setseq_64_xsh_rr_32_rng" title="PCGRandomLib.pcg_setseq_64_xsh_rr_32_rng"><code class="xref chpl chpl-record docutils literal notranslate"><span class="pre">pcg_setseq_64_xsh_rr_32_rng</span></code></a> PCG RNG
which has 64 bits of state and 32 bits of output.</p>
<p>While the PCG RNG used here is believed to have good statistical
properties, it is not suitable for generating key material for encryption
since the output of this RNG may be predictable.
Additionally, if statistical properties of the random numbers are very
important, another strategy may be required.</p>
<p>We have good confidence that the random numbers generated by this class
match the C PCG reference implementation and have specifically verified
equal output given the same seed. However, this implementation differs
from the C PCG reference implementation in how it produces random integers
within particular bounds (with <code class="docutils literal notranslate"><span class="pre">PCGRandomStream.getNext</span></code> using <code class="docutils literal notranslate"><span class="pre">min</span></code>
and <code class="docutils literal notranslate"><span class="pre">max</span></code> arguments). In addition, this implementation directly supports
the generation of random <cite>real</cite> values, unlike the C PCG implementation.</p>
<p>Smaller numbers, such as <cite>uint(8)</cite> or <cite>uint(16)</cite>, are generated from
the high-order bits of the 32-bit output.</p>
<p>To generate larger numbers, several 32-bit-output RNGs are ganged
together.  This strategy is recommended by the author of PCG (and
demonstrated in the file <cite>pcg32x2-demo.c</cite>. Each of these 32-bit RNGs has a
different sequence constant and so will be independent and uncorrelated.
For example, to generate 128-bit complex numbers, this RNG will use
4 ganged 32-bit PCG RNGs with different sequence constants. One impact of
this approach is that this implementation will only generate 2**64
different complex numbers with a given seed (for example).</p>
<p>This class also supports generating integers within particular bounds.
When that is required, this class uses a strategy different from the PCG
reference implementation in order to work better in a parallel setting. In
particular, when more than 1 random value is required as part of
generating a value in a range, conceptually it uses more ganged-together
RNGs (as with the 32x2 strategy). Each new value beyond the first that
is computed will be computed with a different ganged-together RNG.
This strategy is meant to avoid statistical bias. While we have tested
this strategy to our satisfaction, it has not been subject to rigorous
analysis and may have undesirable statistical properties.</p>
<p>When generating a real, imaginary, or complex number, this implementation
uses the strategy of generating a 64-bit unsigned integer and then
multiplying it by 2.0**-64 in order to convert it to a floating point
number. While this does construct a uniform distribution on rounded
floating point values, it leaves out many possible real values (for
example, 2**-128). We believe that this strategy has reasonable
statistical properties. One side effect of this strategy is that the real
number 1.0 can be generated because of rounding. The real number 0.0 can
be generated because PCG can produce the value 0 as a random integer.</p>
<p>We have tested this implementation with TestU01 (available at
<a class="reference external" href="http://simul.iro.umontreal.ca/testu01/tu01.html">http://simul.iro.umontreal.ca/testu01/tu01.html</a> ).  We measured our
implementation with TestU01 1.2.3 and the Crush suite, which consists of
144 statistical tests. The results were:</p>
<blockquote>
<div><ul class="simple">
<li><p>no failures for generating uniform reals</p></li>
<li><p>1 failure for generating 32-bit values (which is also true for the
reference version of PCG with the same configuration)</p></li>
<li><p>0 failures for generating 64-bit values (which we provided to TestU01
as 2 different 32-bit values since it only accepts 32 bits at a time)</p></li>
<li><p>0 failures for generating bounded integers (which we provided to
TestU01 by requesting values in [0..,2**31+2**30+1) until we
had two values &lt; 2**31, removing the top 0 bit, and then combining
the top 16 bits into the value provided to TestU01).</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="chpl function">
<dt class="sig sig-object chpl" id="PCGRandom.randlc">
<em class="property"><span class="pre">proc</span> </em><span class="sig-name descname"><span class="pre">randlc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">type</span> <span class="pre">resultType</span></em>, <em class="sig-param"><span class="pre">ref</span> <span class="pre">states</span></em><span class="sig-paren">)</span><a class="headerlink" href="#PCGRandom.randlc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Random.html" class="btn btn-neutral float-left" title="Random" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="PCGRandomLib.html" class="btn btn-neutral float-right" title="PCGRandomLib" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>