<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using Chapel on Raspberry Pi &mdash; Chapel Documentation 1.33</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Chapel with InfiniBand" href="infiniband.html" />
    <link rel="prev" title="Using Chapel on Amazon Web Services" href="aws.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.33
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.33";
$pagename = "platforms/raspberrypi";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingchapel/index.html">Using Chapel</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Platform-Specific Notes</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#major-platforms">Major Platforms</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="macosx.html">Using Chapel on Mac OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="cray.html">Using Chapel on Cray Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="cygwin.html">Using Chapel on Cygwin</a></li>
<li class="toctree-l3"><a class="reference internal" href="aws.html">Using Chapel on Amazon Web Services</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using Chapel on Raspberry Pi</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-for-raspberry-pi">Configuring for Raspberry Pi</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clustering-the-pis">Clustering the Pis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-for-multi-locale-execution">Configuring for Multi-Locale Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-multilocale-chapel-programs">Running Multilocale Chapel Programs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#networks">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#older-platforms">Older Platforms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Platform-Specific Notes</a> &raquo;</li>
      <li>Using Chapel on Raspberry Pi</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/platforms/raspberrypi.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="using-chapel-on-raspberry-pi">
<span id="readme-raspberrypi"></span><h1><a class="toc-backref" href="#id1">Using Chapel on Raspberry Pi</a><a class="headerlink" href="#using-chapel-on-raspberry-pi" title="Permalink to this headline">¶</a></h1>
<p>This document describes how to run Chapel on a standalone Raspberry Pi, as well
as multi-locale on a Raspberry Pi cluster.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As the Chapel compiler has modernized, the memory requirements to build it
have grown. If you find you can’t build Chapel in the memory you have
available on your system, please let us know.</p>
</div>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#using-chapel-on-raspberry-pi" id="id1">Using Chapel on Raspberry Pi</a></p>
<ul>
<li><p><a class="reference internal" href="#configuring-for-raspberry-pi" id="id2">Configuring for Raspberry Pi</a></p></li>
<li><p><a class="reference internal" href="#clustering-the-pis" id="id3">Clustering the Pis</a></p></li>
<li><p><a class="reference internal" href="#configuring-for-multi-locale-execution" id="id4">Configuring for Multi-Locale Execution</a></p></li>
<li><p><a class="reference internal" href="#running-multilocale-chapel-programs" id="id5">Running Multilocale Chapel Programs</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="configuring-for-raspberry-pi">
<h2><a class="toc-backref" href="#id2">Configuring for Raspberry Pi</a><a class="headerlink" href="#configuring-for-raspberry-pi" title="Permalink to this headline">¶</a></h2>
<p>To build Chapel with support for Raspberry Pi, set:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CHPL_ATOMICS</span><span class="o">=</span>locks
</pre></div>
</div>
</div>
<div class="section" id="clustering-the-pis">
<h2><a class="toc-backref" href="#id3">Clustering the Pis</a><a class="headerlink" href="#clustering-the-pis" title="Permalink to this headline">¶</a></h2>
<p>If you have a working cluster already, you can forgo this section of the guide.</p>
<p>This section describes just one of several ways to set up a Pi cluster. This
section assumes that the user has already equipped each Pi with an SD card
flashed with the operating system of the users’ choice – for example,
<a class="reference external" href="https://downloads.raspberrypi.org/raspios_oldstable_lite_armhf/images/raspios_oldstable_lite_armhf-2022-09-26/2022-09-22-raspios-buster-armhf-lite.img.xz">Raspberry Pi OS Lite (Legacy)</a>.</p>
<p>In order to cluster all of the nodes, we must set up password-less SSH. This
guide borrows from <a class="reference external" href="https://magpi.raspberrypi.com/articles/build-a-raspberry-pi-cluster-computer">MagPi</a>.</p>
<ol class="arabic simple">
<li><p>Connect all nodes via Ethernet</p></li>
</ol>
<p>Connect each node to a network switch via Ethernet cables. For a cluster with
only two nodes, you can connect the two nodes directly without the need for a
network switch.</p>
<ol class="arabic simple" start="2">
<li><p>For each node, set a static IP address in the same subnet.</p></li>
</ol>
<p>In this example, we will use <code class="docutils literal notranslate"><span class="pre">10.0.0.0</span></code> as our subnet. If your regular network
uses this, choose something different like <code class="docutils literal notranslate"><span class="pre">192.168.10.0</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /etc/dhcpcd.conf
</pre></div>
</div>
<p>At the end of the file, add the lines:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>interface eth0
static <span class="nv">ip_address</span><span class="o">=</span><span class="m">10</span>.0.0.1/24
</pre></div>
</div>
<p>For each node, replace the last digit of the subnet with a new unique value,
such as 2, 3, and so on. You should be able to ping each node – for example,
from 10.0.0.1:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ping <span class="m">10</span>.0.0.2
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Generate SSH keys</p></li>
</ol>
<p>On each node, generate an SSH key by running the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh-keygen -t rsa
</pre></div>
</div>
<p>Press RETURN for each prompt and do not create a passphrase when asked.</p>
<ol class="arabic simple" start="4">
<li><p>Copy SSH keys to all nodes in the cluster</p></li>
</ol>
<p>For each non-master node, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh-copy-id <span class="m">10</span>.0.0.1
</pre></div>
</div>
<p>to copy that node’s SSH key to the master node. Once that has been done on all
non-master nodes, copy the master node’s SSH key to all other nodes in the
cluster by running the same command from the master node, using the IP addresses
of the other nodes as the command argument.</p>
<ol class="arabic simple" start="5">
<li><p>Set up a shared filesystem</p></li>
</ol>
<p>In order for each node to reference the same Chapel executable, the executable
must be stored in a shared filesystem that all of the nodes in the cluster have
simultaneous access to. There are several ways to do this.</p>
<p>One way is to mount a flash drive and export it as a network file system to the
other nodes in the cluster. The steps to achieve this are described in sections
4.1 to 4.3 from this <a class="reference external" href="https://glmdev.medium.com/building-a-raspberry-pi-cluster-784f0df9afbd">Medium article</a>.</p>
</div>
<div class="section" id="configuring-for-multi-locale-execution">
<h2><a class="toc-backref" href="#id4">Configuring for Multi-Locale Execution</a><a class="headerlink" href="#configuring-for-multi-locale-execution" title="Permalink to this headline">¶</a></h2>
<p>For more in-depth information about GASNet or multilocale execution with Chapel,
refer to the <a class="reference external" href="https://gasnet.lbl.gov/dist/udp-conduit/README">GASNet documentation</a> and <a class="reference internal" href="../usingchapel/multilocale.html#readme-multilocale"><span class="std std-ref">Multilocale Chapel Execution</span></a> page,
respectively.</p>
<p>Ensure that the Chapel tree is installed in the shared filesystem (or that the
Chapel tree is built on each node in your cluster), each node is running the
same version of Chapel, and that all nodes in the cluster have SSH access to
each other.</p>
<p>Complete these steps on the master node of your cluster.</p>
<ol class="arabic simple">
<li><p>Set Chapel to use GASNet for multilocale execution</p></li>
</ol>
<p>Set the following environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CHPL_COMM</span><span class="o">=</span>gasnet
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Set up GASNet environment variables</p></li>
</ol>
<p>Set the following GASNet environment variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">GASNET_SPAWNFN</span><span class="o">=</span>S <span class="c1"># Job spawn mechanism, where &#39;S&#39; means ssh/rsh-based spawn</span>
<span class="nv">GASNET_MASTERIP</span><span class="o">=</span> <span class="c1"># IP address of master node in your cluster, eg. 10.0.0.1</span>
<span class="nv">GASNET_SSH_SERVERS</span><span class="o">=</span> <span class="c1"># Space-delimited list of server names, eg. 10.0.0.1 10.0.0.2 10.0.0.3</span>
</pre></div>
</div>
</div>
<div class="section" id="running-multilocale-chapel-programs">
<h2><a class="toc-backref" href="#id5">Running Multilocale Chapel Programs</a><a class="headerlink" href="#running-multilocale-chapel-programs" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Move Chapel executable to shared directory</p></li>
</ol>
<p>This is necessary if your Chapel executables are not output to the shared filesystem by default.</p>
<p>eg.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mv hello /clusterfs/
mv hello_real /clusterfs/
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Run the program</p></li>
</ol>
<p>Run the program as you would any other multilocale program:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/clusterfs/hello -nl <span class="m">2</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="aws.html" class="btn btn-neutral float-left" title="Using Chapel on Amazon Web Services" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="infiniband.html" class="btn btn-neutral float-right" title="Using Chapel with InfiniBand" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>