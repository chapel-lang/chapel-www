<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building Chapel &mdash; Chapel Documentation 1.33</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Compiling Chapel Programs" href="compiling.html" />
    <link rel="prev" title="Setting up Your Environment for Chapel" href="chplenv.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<a href="../index.html" class="icon icon-home"> Chapel Documentation

<!-- display version if button won't be rendered -->
<?php if (false) { ?>
<br>1.33
<?php } ?>

</a>

<?php
// Variables given by sphinx
$chplTitle = "1.33";
$pagename = "usingchapel/building";
include "..//versionButton.php";
?>


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Compiling and Running Chapel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="QUICKSTART.html">Quickstart Instructions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using Chapel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="prereqs.html">Chapel Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="chplenv.html">Setting up Your Environment for Chapel</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building Chapel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-chapel-in-a-different-shell-terminal-session">Using Chapel in a Different Shell / Terminal / Session</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-chapel">Installing Chapel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#switching-between-multiple-configurations">Switching Between Multiple Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#makefile-targets">Makefile Targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#makefile-options">Makefile Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controlling-build-output">Controlling Build Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="compiling.html">Compiling Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="man.html">Chapel Man Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="executing.html">Executing Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="multilocale.html">Multilocale Chapel Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="launcher.html">Chapel Launchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Chapel Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging Chapel Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="bugs.html">Reporting Chapel Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/index.html">Platform-Specific Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technotes/index.html">Technical Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Docs for Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Writing Chapel Programs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Hello World Variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primers/index.html">Primers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/spec/index.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/standard.html">Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/packages.html">Package Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/layoutdist.html">Standard Layouts and Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mason-packages/index.html">Mason Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">Chapel Users Guide (WIP)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/evolution.html">Chapel Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/archivedSpecs.html">Documentation Archives</a></li>
</ul>

  <p class="caption" role="heading"><span class="caption-text">Indexes</span></p>
  <ul>
    <li class="toctree-11"><a class="reference internal" href="../chpl-modindex.html">Chapel Module Index</a></li>
    <li class="toctree-11"><a class="reference internal" href="../genindex.html">Complete Docs Index</a></li>
  </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Chapel Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Using Chapel</a> &raquo;</li>
      <li>Building Chapel</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/usingchapel/building.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="building-chapel">
<span id="readme-building"></span><h1>Building Chapel<a class="headerlink" href="#building-chapel" title="Permalink to this headline">¶</a></h1>
<p>To build the Chapel compiler, set up your environment as described in
<a class="reference internal" href="chplenv.html#readme-chplenv"><span class="std std-ref">Setting up Your Environment for Chapel</span></a>, cd to <code class="docutils literal notranslate"><span class="pre">$CHPL_HOME</span></code> (the root directory of
your unpacked Chapel release), and run GNU make.  This will build the
compiler and runtime libraries for your current environment as
indicated by running <code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/util/printchplenv</span> <span class="pre">--all</span></code>.</p>
<p>On many systems, GNU make is available simply as <code class="docutils literal notranslate"><span class="pre">make</span></code>. On others,
it is called <code class="docutils literal notranslate"><span class="pre">gmake</span></code>.  To check whether <code class="docutils literal notranslate"><span class="pre">make</span></code> refers to GNU make
on your system, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make -v
</pre></div>
</div>
<p>If the first line includes “GNU Make”, you have GNU Make.  The rest of
these instructions will assume <code class="docutils literal notranslate"><span class="pre">make</span></code> refers to GNU Make. If that’s
not the case, you’ll need to replace <code class="docutils literal notranslate"><span class="pre">make</span></code> with <code class="docutils literal notranslate"><span class="pre">gmake</span></code>.</p>
<p>Now build the Chapel compiler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$CHPL_HOME</span>
make
</pre></div>
</div>
<p>Parallel builds such as <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-j</span> <span class="pre">6</span></code> are also supported.</p>
<p>If everything works as intended, you ought to see:</p>
<ol class="arabic">
<li><p>each of the compiler source subdirectories being compiled</p></li>
<li><p>the compiler binary getting linked and stored as:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/bin/$CHPL_HOST_PLATFORM-$CHPL_HOST_ARCH/chpl</span></code></p>
</div></blockquote>
</li>
<li><p>the runtime support libraries being compiled, archived, and stored
in a configuration-specific subdirectory under:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$CHPL_HOME/lib/$CHPL_TARGET_PLATFORM/.../</span></code></p>
</div></blockquote>
</li>
</ol>
<p>If you get an error or failure during the make process, double-check
that you have the required prerequisites (see
<a class="reference internal" href="prereqs.html#readme-prereqs"><span class="std std-ref">Chapel Prerequisites</span></a>). If you do, please submit a bug report for the
failure through <a class="reference internal" href="bugs.html#readme-bugs"><span class="std std-ref">Reporting Chapel Issues</span></a>.</p>
<p>After a successful build, you should be able to run the compiler and
display its help message using:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chpl --help
</pre></div>
</div>
<p>In which case, you are ready to move on to compiling with the Chapel
compiler (see <a class="reference internal" href="compiling.html#readme-compiling"><span class="std std-ref">Compiling Chapel Programs</span></a>).  The next few sections provide
more information about using Chapel across multiple sessions,
installing Chapel, and supporting multiple Chapel configurations.
Following that are sections describing Chapel’s Makefiles for advanced
users or developers of Chapel.</p>
<div class="section" id="using-chapel-in-a-different-shell-terminal-session">
<span id="using-chapel-in-other-sessions"></span><h2>Using Chapel in a Different Shell / Terminal / Session<a class="headerlink" href="#using-chapel-in-a-different-shell-terminal-session" title="Permalink to this headline">¶</a></h2>
<p>Once you have built Chapel, you can use it in other sessions (new
shells or terminals) as long as:</p>
<ol class="arabic simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">chpl</span></code> compiler is in your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code></p></li>
<li><p>your <code class="docutils literal notranslate"><span class="pre">$CHPL_</span></code> environment variables are set or inferred to values
that match a configuration you have already built</p></li>
</ol>
<p>Typically, this is accomplished in one of the following ways:</p>
<ul class="simple">
<li><p>by manually re-sourcing the <code class="docutils literal notranslate"><span class="pre">setchplenv.*</span></code> file that you used
when building Chapel.</p></li>
<li><p>by editing your ‘dot files’ (e.g., <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>, <code class="docutils literal notranslate"><span class="pre">bash_profile</span></code>, or
whatever your shell uses to start up each session) to explicitly set
your path and <code class="docutils literal notranslate"><span class="pre">$CHPL_</span></code> settings as desired, or to source the
appropriate <code class="docutils literal notranslate"><span class="pre">setchplenv.*</span></code> script.</p></li>
<li><p>by creating a <code class="docutils literal notranslate"><span class="pre">chplconfig</span></code> file to store your preferred <code class="docutils literal notranslate"><span class="pre">$CHPL_</span></code>
settings (see <a class="reference internal" href="chplenv.html#readme-chplenv-chplconfig"><span class="std std-ref">Chapel Configuration Files</span></a> for further details
on creating a chplconfig file).  Note, however, that some other
standard technique is still required to ensure that <code class="docutils literal notranslate"><span class="pre">chpl</span></code> is in
your path.</p></li>
<li><p>by installing Chapel to a specific location that is in your path
using the instructions in the next section.</p></li>
</ul>
</div>
<div class="section" id="installing-chapel">
<span id="readme-installing"></span><h2>Installing Chapel<a class="headerlink" href="#installing-chapel" title="Permalink to this headline">¶</a></h2>
<p>Chapel can be built and installed to a specific location as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure  <span class="c1"># use &#39;./configure --help&#39; for specific options</span>
make
make install
</pre></div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">./configure</span></code> will save your current configuration of
<code class="docutils literal notranslate"><span class="pre">$CHPL_</span></code> settings into a <code class="docutils literal notranslate"><span class="pre">chplconfig</span></code> file.  Running it with the
<code class="docutils literal notranslate"><span class="pre">--prefix</span></code> or <code class="docutils literal notranslate"><span class="pre">--chpl-home</span></code> options permits you to specify where
and how Chapel should be installed during the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> step.
Specifically:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--prefix=/dir/for/install/</span></code> causes the Chapel compiler,
libraries, and supporting code to be installed into the directories:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/dir/for/install/bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/dir/for/install/lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/dir/for/install/share</span></code></p></li>
</ul>
<p>This technique is designed to install Chapel using a standard
directory structure for the purposes of integrating it into a
standard location that is already in your path, such as
<code class="docutils literal notranslate"><span class="pre">/usr/local/</span></code> or <code class="docutils literal notranslate"><span class="pre">~/</span></code>.  Note that elevated privileges are likely
to be required for any system-wide installation locations.</p>
<p>Please note that for any prefix-installed version of Chapel, the
meaning of <code class="docutils literal notranslate"><span class="pre">$CHPL_HOME</span></code> (e.g., as printed by compiler messages)
typically refers to <code class="docutils literal notranslate"><span class="pre">/dir/for/install/share/chapel/x.yz</span></code> where
<code class="docutils literal notranslate"><span class="pre">x.yz</span></code> is the Chapel version that was installed.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--chpl-home=/dir/for/install</span></code> copies key files and directories
from the Chapel source tree into <code class="docutils literal notranslate"><span class="pre">/dir/for/install</span></code>, preserving
Chapel’s traditional directory structure.  As you might expect, the
meaning of <code class="docutils literal notranslate"><span class="pre">$CHPL_HOME</span></code> for such installs is <code class="docutils literal notranslate"><span class="pre">/dir/for/install</span></code>.</p></li>
</ul>
</div>
<div class="section" id="switching-between-multiple-configurations">
<h2>Switching Between Multiple Configurations<a class="headerlink" href="#switching-between-multiple-configurations" title="Permalink to this headline">¶</a></h2>
<p>A single installation of Chapel can simultaneously support multiple
configuration options, such as target platforms or compilers, because
all binary files and executables are stored in unique subdirectories
as determined by the <code class="docutils literal notranslate"><span class="pre">CHPL_</span></code> environment variables.  However, note
that each <code class="docutils literal notranslate"><span class="pre">make</span></code> command only builds the compiler and runtime for
the current set of <code class="docutils literal notranslate"><span class="pre">CHPL_</span></code> environment variables defined by—and
inferred for—your environment.  To build support for additional
configurations, you will need to modify your <code class="docutils literal notranslate"><span class="pre">CHPL_</span></code> environment
variables and re-make.</p>
<p>Once you have built multiple configurations, you can switch between
them either by setting your <code class="docutils literal notranslate"><span class="pre">CHPL_</span></code> environment variables to the
same values as when the configuration was built, or using the <code class="docutils literal notranslate"><span class="pre">chpl</span></code>
compiler’s command-line options that correspond to the environment
variables (see the ‘Compiler Configuration Options’ section of the
<a class="reference internal" href="man.html#man-chpl"><span class="std std-ref">chpl</span></a> man page for details).</p>
</div>
<div class="section" id="makefile-targets">
<h2>Makefile Targets<a class="headerlink" href="#makefile-targets" title="Permalink to this headline">¶</a></h2>
<p>The Chapel sources are structured so that a GNU-compatible <code class="docutils literal notranslate"><span class="pre">make</span></code>
utility can be used in any source directory to build the sources
contained in that directory and its subdirectories.  All of these
Makefiles support the following targets:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Target</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(nothing)
default
all</p></td>
<td><p>Build the appropriate targets — e.g., objects files,
libraries, executables</p></td>
</tr>
<tr class="row-odd"><td><p>check</p></td>
<td><p>verify basic functionality of a Chapel build</p></td>
</tr>
<tr class="row-even"><td><p>clean</p></td>
<td><p>Remove the intermediate files for this configuration</p></td>
</tr>
<tr class="row-odd"><td><p>cleanall</p></td>
<td><p>Remove the intermediate files for all configurations</p></td>
</tr>
<tr class="row-even"><td><p>clobber</p></td>
<td><p>Remove everything created by the Makefiles
as well as <code class="docutils literal notranslate"><span class="pre">chplconfig</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>install</p></td>
<td><p>Install Chapel to a previously configured location</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Each target processes all subdirectories, then the current directory.</p>
</div>
<div class="section" id="makefile-options">
<h2>Makefile Options<a class="headerlink" href="#makefile-options" title="Permalink to this headline">¶</a></h2>
<p>The Chapel Makefiles have a few options that enable or disable
optimization, debugging support, profiling, and back-end C compiler
warnings. The variables are described below. Set the value to 1 to
enable the feature or 0 to disable it (e.g., <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">DEBUG=1</span> <span class="pre">OPTIMIZE=1</span>
<span class="pre">WARNINGS=0</span></code>).</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ASSERTS</p></td>
<td><p>Enables correctness assertions in the compiler and runtime</p></td>
</tr>
<tr class="row-odd"><td><p>DEBUG</p></td>
<td><p>Generate debug information (e.g., pass <code class="docutils literal notranslate"><span class="pre">-g</span></code> to the C compiler)</p></td>
</tr>
<tr class="row-even"><td><p>OPTIMIZE</p></td>
<td><p>Enable optimizations (e.g., pass <code class="docutils literal notranslate"><span class="pre">-O3</span></code> to the C compiler)</p></td>
</tr>
<tr class="row-odd"><td><p>PROFILE</p></td>
<td><p>Enable profiling support (e.g., pass <code class="docutils literal notranslate"><span class="pre">-pg</span></code> to C compiler)</p></td>
</tr>
<tr class="row-even"><td><p>WARNINGS</p></td>
<td><p>Enable more warnings and treat them as errors</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note that these settings only affect how the <code class="docutils literal notranslate"><span class="pre">chpl</span></code> compiler and its
runtime libraries are built, as well as the third-party packages that
they rely upon.  In particular, building Chapel with <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> or
<code class="docutils literal notranslate"><span class="pre">OPTIMIZE</span></code> set will not cause invocations of the resulting <code class="docutils literal notranslate"><span class="pre">chpl</span></code>
compiler to automatically generate executables with debugging or
optimizations enabled.</p>
</div>
<div class="section" id="controlling-build-output">
<h2>Controlling Build Output<a class="headerlink" href="#controlling-build-output" title="Permalink to this headline">¶</a></h2>
<p>Aside from the default build output, the Chapel compiler Makefile also supports
two options to increase or decrease the verbosity of the build. These options
can be set either on the command-line as arguments to <code class="docutils literal notranslate"><span class="pre">make</span></code>, or through the
environment. To enable either option, set the variable to 1
(e.g., <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">VERBOSE=1</span></code> or <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">VERBOSE=1</span></code>).</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VERBOSE</p></td>
<td><p>Print verbose CMake output and all commands executed by the Makefiles</p></td>
</tr>
<tr class="row-odd"><td><p>QUIET</p></td>
<td><p>Print the minimum output from CMake (e.g., only errors, warnings)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="chplenv.html" class="btn btn-neutral float-left" title="Setting up Your Environment for Chapel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="compiling.html" class="btn btn-neutral float-right" title="Compiling Chapel Programs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Hewlett Packard Enterprise Development LP.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>